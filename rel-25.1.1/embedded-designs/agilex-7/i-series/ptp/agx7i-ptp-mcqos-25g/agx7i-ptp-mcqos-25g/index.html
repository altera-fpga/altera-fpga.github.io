
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://altera-fpga.github.io/rel-25.1.1/embedded-designs/agilex-7/i-series/ptp/agx7i-ptp-mcqos-25g/agx7i-ptp-mcqos-25g/">
      
      
        <link rel="prev" href="../../../../../../ed-ai-suite/agilex7/iseries_ofs_pcie/iseries_ofs_pcie/">
      
      
        <link rel="next" href="../../../soc/gsrd/ug-gsrd-agx7i-soc/">
      
      <link rel="icon" href="../../../../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.9">
    
    
      
        <title>Agilex 7 Multi-Channel 25GbE Time Precision Protocol System Example Design (I-Series, 4x F-Tile) - Altera FPGA Developer Site</title>
      
    
    
      <link rel="stylesheet" href="../../../../../../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../../../../../../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#multi-channel-25gbe-precision-time-protocol-system-example-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../../.." title="Altera FPGA Developer Site" class="md-header__button md-logo" aria-label="Altera FPGA Developer Site" data-md-component="logo">
      
  <img src="../../../../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Altera FPGA Developer Site
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Agilex 7 Multi-Channel 25GbE Time Precision Protocol System Example Design (I-Series, 4x F-Tile)
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/altera-fpga" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    altera-fpga
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../../.." class="md-tabs__link">
      Welcome
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../driver-list_linux/" class="md-tabs__link">
        Linux Drivers
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../driver-list_zephyr/" class="md-tabs__link">
        Zephyr Drivers
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../virtualization/hypervisors/xen/xen-overview/" class="md-tabs__link">
        Virtualization
      </a>
    </li>
  

  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../driver-list_baremetal/" class="md-tabs__link">
        Baremetal Drivers
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../sw-tools-list/host-attach-tools/" class="md-tabs__link">
        Host Attach Utilities
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../ed-demo-list/ed-list/" class="md-tabs__link md-tabs__link--active">
        Example Designs
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../../.." title="Altera FPGA Developer Site" class="md-nav__button md-logo" aria-label="Altera FPGA Developer Site" data-md-component="logo">
      
  <img src="../../../../../../assets/logo.png" alt="logo">

    </a>
    Altera FPGA Developer Site
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/altera-fpga" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    altera-fpga
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../../driver-list_linux/">Linux Drivers</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Linux Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          HPS Host Drivers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          HPS Host Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/hwmon/hwmon/" class="md-nav__link">
        Altera Hardware Monitor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/clock_manager/clock_manager/" class="md-nav__link">
        Clock Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/dma/dma/" class="md-nav__link">
        DMA Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/edac/edac/" class="md-nav__link">
        Error Detection & Correction (EDAC)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/ptp_tod/ptp_emb_tod/" class="md-nav__link">
        Ethernet 1588 PTP Time of Day Clock
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/emac/emac/" class="md-nav__link">
        Ethernet Media Access Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/hssi/hssi/" class="md-nav__link">
        Ethernet Subsystem FPGA IP MAC Specific Ctrl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/hssi_xtile/hssi_xtile/" class="md-nav__link">
        Ethernet Subsystem FPGA IP Tile Specific Ctrl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/apb_timers/apb_timers/" class="md-nav__link">
        General Purpose Timers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/gpio/gpio/" class="md-nav__link">
        General Purpose I/O (GPIO)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/i2c/i2c/" class="md-nav__link">
        I2C
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/i3c/i3c/" class="md-nav__link">
        I3C
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/interrupt_controller_GICv3/irq_gic_v3/" class="md-nav__link">
        Interrupt Controller (GICv3)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/msgdma/msgdma/" class="md-nav__link">
        MSGDMA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/nand/nand/" class="md-nav__link">
        NAND Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/qsfp/qsfp/" class="md-nav__link">
        QSFP Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/qspi/qspi/" class="md-nav__link">
        QSPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/reset_manager/reset_manager/" class="md-nav__link">
        Reset Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/sd-emmc/sd-emmc/" class="md-nav__link">
        SD/eMMC Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/spi/spi/" class="md-nav__link">
        SPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/system_manager/system_manager/" class="md-nav__link">
        System Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/smmu/smmu/" class="md-nav__link">
        System Memory Management Unit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/uart/uart/" class="md-nav__link">
        UART
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/usb2_0_otg/usb_2_0_otg/" class="md-nav__link">
        USB 2.0 OTG
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/usb3_1/usb3_1/" class="md-nav__link">
        USB 3.1 Gen-1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/watchdog_timers/watchdog_timers/" class="md-nav__link">
        Watchdog Timers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/drivers/zarlink_clock_synchronizer/zarlink_clock_synchronizer/" class="md-nav__link">
        Zarlink Clock Synchronizer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          PCIe Host Drivers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          PCIe Host Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/uart_16550/uart_16550/" class="md-nav__link">
        Altera 16550 Compatible UART
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/dfl_afu/dfl_afu/" class="md-nav__link">
        Accelerator Functional Unit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/intel_m10_bmc_core/intel_m10_bmc_core/" class="md-nav__link">
        Board Management Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/dfl/dfl/" class="md-nav__link">
        Device Feature List
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/s10hssi/s10hssi/" class="md-nav__link">
        Ethernet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/ptp_dfl_tod/ptp_dfl_tod/" class="md-nav__link">
        Ethernet 1588 PTP Time of Day Clock
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/dfl_fme/dfl_fme/" class="md-nav__link">
        FPGA Management Engine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/dfl_pci/dfl_pci/" class="md-nav__link">
        PCIe Subsystem
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/dfl_emif/dfl_emif/" class="md-nav__link">
        Memory Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/intel_m10_bmc_core/intel_m10_bmc_core/" class="md-nav__link">
        MAX 10 Board Management Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/spi_altera_dfl/spi_altera_dfl/" class="md-nav__link">
        SPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/uio_dfl/uio_dfl/" class="md-nav__link">
        User space I/O (UIO)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../../driver-list_zephyr/">Zephyr Drivers</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Zephyr Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          HPS Zephyr Drivers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          HPS Zephyr Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/clock_manager/clock_manager/" class="md-nav__link">
        Clock Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/psci/psci/" class="md-nav__link">
        Cold & Warm Reset -Power State Coordination Interface (PSCI)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/dma/dma/" class="md-nav__link">
        DMA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/timer/timer/" class="md-nav__link">
        General Purpose Timer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/gpio/gpio/" class="md-nav__link">
        GPIO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/qspi/qspi/" class="md-nav__link">
        Quad SPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/reset_manager/reset_manager/" class="md-nav__link">
        Reset Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/seu/seu/" class="md-nav__link">
        Single Event Upset (SEU)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/smp/smp/" class="md-nav__link">
        SMP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/uart/uart/" class="md-nav__link">
        UART
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/watchdog/watchdog/" class="md-nav__link">
        Watchdog Timer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Virtualization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Virtualization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
          Hypervisors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Hypervisors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
          Xen
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_1">
          <span class="md-nav__icon md-icon"></span>
          Xen
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../virtualization/hypervisors/xen/xen-overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1_2" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1_1_2" id="__nav_4_1_1_2_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_1_2">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../virtualization/hypervisors/xen/ug-xen-agx5e-premium/" class="md-nav__link">
        Agilex™ 5 E-Series Premium Development Kit Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../virtualization/hypervisors/xen/ug-xen-agx5e-modular/" class="md-nav__link">
        Agilex™ 5 E-Series Modular Development Kit Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../virtualization/hypervisors/xen/ug-xen-agx7f-soc/" class="md-nav__link">
        Agilex™ 7 F-Series SoC Development Kit Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../../driver-list_baremetal/">Baremetal Drivers</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Baremetal Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Host Attach Utilities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Host Attach Utilities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../sw-tools-list/host-attach-tools/" class="md-nav__link">
        Host Attach Utilities Summary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/fpgaconf/fpgaconf/" class="md-nav__link">
        fpgaconf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/fpgad/fpgad/" class="md-nav__link">
        fpgad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/fpgainfo/fpgainfo/" class="md-nav__link">
        fpgainfo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/fpgaport/fpgaport/" class="md-nav__link">
        fpgaport
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/fpgasupdate/fpgasupdate/" class="md-nav__link">
        fpgasupdate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/hssi/hssi/" class="md-nav__link">
        hssi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/host_exerciser/host_exerciser/" class="md-nav__link">
        host_exerciser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/hssi_ethernet/hssimac/" class="md-nav__link">
        HSSI ethernet loopback
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/hssi_ethernet/hssistats/" class="md-nav__link">
        HSSI ethernet statistics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/hssi_ethernet/hssimac/" class="md-nav__link">
        HSSI ethernet mac
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/mem_tg/mem_tg/" class="md-nav__link">
        mem_tg
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/mmlink/mmlink/" class="md-nav__link">
        mmlink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/ofs_uio/ofs_uio/" class="md-nav__link">
        ofs.uio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/opae_io/opae_io/" class="md-nav__link">
        opae.io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/opaeuio/opaeuio/" class="md-nav__link">
        opaeuio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/opaevfio/opaevfio/" class="md-nav__link">
        opaevfio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/pac_hssi_config/pac_hssi_config/" class="md-nav__link">
        pac_hssi_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/packager/packager/" class="md-nav__link">
        packager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/pci_device/pci_device/" class="md-nav__link">
        pci_device
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/rsu/rsu/" class="md-nav__link">
        rsu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/userclk/userclk/" class="md-nav__link">
        userclk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/vabtool/vabtool/" class="md-nav__link">
        vabtool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Example Designs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Example Designs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../ed-demo-list/ed-list/" class="md-nav__link">
        Summary
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
          Agilex™ 3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Agilex™ 3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_1" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2_1" id="__nav_7_2_1_label" tabindex="0">
          C-Series SoC and FPGA Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_2_1">
          <span class="md-nav__icon md-icon"></span>
          C-Series SoC and FPGA Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/drive-on-chip/doc-plc/" class="md-nav__link">
        Drive-On-Chip with PLC Design Example for Agilex™ Devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-3/c-series/gsrd/ug-gsrd-agx3/" class="md-nav__link">
        HPS GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-3/c-series/boot-examples/ug-linux-boot-agx3/" class="md-nav__link">
        HPS GHRD Linux Boot Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-3/c-series/rsu/ug-rsu-agx3c-fpga/" class="md-nav__link">
        HPS Remote System Update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-3/c-series/remote-debug/ug-remote-debug-agx3/" class="md-nav__link">
        SoC FPGA Remote Debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-3/c-series/armds-debug-u-boot/ug-armds-debug-uboot-agx3/" class="md-nav__link">
        Debugging U-Boot with Arm Development Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-3/c-series/riscfree-debug-u-boot/ug-riscfree-debug-uboot-agx3/" class="md-nav__link">
        Debugging U-Boot with Ashling RiscFree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-3/c-series/riscfree-debug-linux/ug-riscfree-debug-linux-agx3/" class="md-nav__link">
        Debugging Linux with Ashling RiscFree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-3/c-series/armds-debug-linux/ug-armds-debug-linux-agx3/" class="md-nav__link">
        Debugging Linux with Arm Development Studio
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
          Agilex™ 5
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Agilex™ 5
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_1" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_1" id="__nav_7_3_1_label" tabindex="0">
          E-Series Premium Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_1">
          <span class="md-nav__icon md-icon"></span>
          E-Series Premium Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/gsrd/ug-gsrd-agx5e-premium/" class="md-nav__link">
        HPS GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/egsrd/ug-ehps-agx5e-premium/" class="md-nav__link">
        Enhanced HPS User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/gsrd_zephyr/ug-zgsrd-agx5e-premium/" class="md-nav__link">
        HPS Zephyr GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/boot-examples/ug-linux-boot-agx5e-premium/" class="md-nav__link">
        HPS GHRD Linux Boot Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_1_5" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_1_5" id="__nav_7_3_1_5_label" tabindex="0">
          TSN Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_1_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_1_5">
          <span class="md-nav__icon md-icon"></span>
          TSN Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/tsn/rgmii-hps/ug-tsncfg1-agx5e-premium/" class="md-nav__link">
        HPS TSN RGMII System Example Design User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/tsn/rgmii-hvio/ug-tsncfg2-agx5e-premium/" class="md-nav__link">
        HPS TSN RGMII HVIO System Example Design User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/tsn/sgmii_xcvr/ug-tsn-sgmii-xcvr-agilex5/" class="md-nav__link">
        HPS TSN SGMII XCVR System Example Design User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/usb3p1/ug-usb3p1-dev-drd-modes/" class="md-nav__link">
        USB 3.1 Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/remote-debug/ug-remote-debug-agx5e-premium/" class="md-nav__link">
        SoC FPGA Remote Debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/rsu/ug-rsu-agx5e-soc/" class="md-nav__link">
        HPS Remote System Update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/xen/ug-xen-agx5e-premium/" class="md-nav__link">
        HPS Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/pcie_rp/ug-pcie_rp-agx5e-premium/" class="md-nav__link">
        PCIe Root Port
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_1_11" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_1_11" id="__nav_7_3_1_11_label" tabindex="0">
          Nios V Processor Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_1_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_1_11">
          <span class="md-nav__icon md-icon"></span>
          Nios V Processor Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_1_11_1" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_1_11_1" id="__nav_7_3_1_11_1_label" tabindex="0">
          Nios V/c
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_1_11_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_1_11_1">
          <span class="md-nav__icon md-icon"></span>
          Nios V/c
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/niosv/niosv_c/niosv_c_helloworld_ocm_mem_test/ug-helloworld-ocm-mem-test-agx5e-premium/" class="md-nav__link">
        Helloworld and OCM memory test design on Nios® V/c Processor
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_1_11_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_1_11_2" id="__nav_7_3_1_11_2_label" tabindex="0">
          Nios V/m
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_1_11_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_1_11_2">
          <span class="md-nav__icon md-icon"></span>
          Nios V/m
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/niosv/niosv_m/niosv_m_baseline_ghrd/ug-baseline-ghrd-agx5e-premium/" class="md-nav__link">
        Nios® V/m Processor Baseline GHRD Design
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_1_11_3" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_1_11_3" id="__nav_7_3_1_11_3_label" tabindex="0">
          Nios V/g
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_1_11_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_1_11_3">
          <span class="md-nav__icon md-icon"></span>
          Nios V/g
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/niosv/niosv_g/tinyml_liteRT/ug-tinyml-liteRT-agx5e-premium/" class="md-nav__link">
        Nios® V/g TinyML LiteRT for Microcontroller Design
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../baremetal-embedded/agilex-5/e-series/premium/ug-baremetal-agx5e-premium/" class="md-nav__link">
        Baremetal Hello World Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/altera-fpga/agilex5-demo-hps2fpga-interfaces/blob/main/documentation/01_index.md" class="md-nav__link">
        Third Party Boards - HPS-FPGA Interfaces Demos User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-5/e-series/premium/armds-debug-uboot/ug-armds-debug-uboot-agx5e-premium/" class="md-nav__link">
        Debugging U-Boot with Arm Development Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-5/e-series/premium/riscfree-debug-u-boot/ug-riscfree-debug-uboot-agx5e-premium/" class="md-nav__link">
        Debugging U-Boot with Ashling RiscFree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-5/e-series/premium/riscfree-debug-linux/ug-riscfree-debug-linux-agx5e-premium/" class="md-nav__link">
        Debugging Linux with Ashling RiscFree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-5/e-series/premium/armds-debug-linux/ug-armds-debug-linux-agx5e-premium/" class="md-nav__link">
        Debugging Linux with Arm Development Studio
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_2" id="__nav_7_3_2_label" tabindex="0">
          E-Series Modular Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_2">
          <span class="md-nav__icon md-icon"></span>
          E-Series Modular Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../ed-ai-suite/agilex5/modular_jtag/modular_jtag/" class="md-nav__link">
        Hostless JTAG Example Design
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/gsrd/ug-gsrd-agx5e-modular/" class="md-nav__link">
        HPS GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/boot-examples/ug-linux-boot-agx5e-modular/" class="md-nav__link">
        HPS GHRD Linux Boot Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/xen/ug-xen-agx5e-modular/" class="md-nav__link">
        HPS Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/drive-on-chip/doc-funct-safety/" class="md-nav__link">
        Drive-On-Chip with Functional Safety Design Example for Agilex™ 5 Devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/drive-on-chip/doc-plc/" class="md-nav__link">
        Drive-On-Chip with PLC Design Example for Agilex™ Devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/drive-on-chip/doc-crc/" class="md-nav__link">
        ROS Consolidated Robot Controller Example Design for Agilex™ 5 Devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/camera/camera_4k/camera_4k/" class="md-nav__link">
        4Kp60 Multi-Sensor HDR Camera Solution System Example Design for Agilex™ 5 Devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/ethernet/agx5e-ethernet-10g/ug-agx5e-ethernet-10g/" class="md-nav__link">
        Agilex™ 5 FPGA E-Series Modular Development Kit 1x10G Ethernet System Example Design
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_2_10" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_2_10" id="__nav_7_3_2_10_label" tabindex="0">
          TSN Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_2_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_2_10">
          <span class="md-nav__icon md-icon"></span>
          TSN Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/tsn/sgmii_xcvr_3x2.5G/ug-tsn-sgmii-xcvr-3x2.5G-agilex5/" class="md-nav__link">
        HPS TSN SGMII XCVR System 3x2.5G Example Design User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_3" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_3" id="__nav_7_3_3_label" tabindex="0">
          Intel Simics Virtual Platform Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_3">
          <span class="md-nav__icon md-icon"></span>
          Intel Simics Virtual Platform Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/common/virtual-platforms/linux-gsrd/ug-linux-gsrd-agilex5-virtual-platforms/" class="md-nav__link">
        Simics Linux GSRD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/common/virtual-platforms/zephyr-gsrd/ug-zephyr-gsrd-agilex5-virtual-platforms/" class="md-nav__link">
        Simics Zephyr GSRD
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
          Agilex™ 7
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_7_4">
          <span class="md-nav__icon md-icon"></span>
          Agilex™ 7
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_1" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_1" id="__nav_7_4_1_label" tabindex="0">
          F-Series SoC Development Kit (P-Tiles & E-Tile)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4_1">
          <span class="md-nav__icon md-icon"></span>
          F-Series SoC Development Kit (P-Tiles & E-Tile)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/gsrd/ug-gsrd-agx7f-soc/" class="md-nav__link">
        HPS GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/rsu/ug-rsu-agx7f-soc/" class="md-nav__link">
        HPS Remote System Update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/rsu/ug-rsu-multiqspi-agx7f-soc/" class="md-nav__link">
        HPS Multi-QSPI Remote System Update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/remote-debug/ug-remote-debug-agx7f-soc/" class="md-nav__link">
        SoC FPGA Remote Debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/emmc/ug-emmc-agx7f-soc/" class="md-nav__link">
        HPS eMMC Boot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/fabric-config/ug-linux-fabric-config-agx7f-soc/" class="md-nav__link">
        SoC Fabric Configuration from Linux Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/boot-examples/ug-linux-boot-agx7-soc/" class="md-nav__link">
        HPS GHRD Linux Boot Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/xen/ug-xen-agx7f-soc/" class="md-nav__link">
        HPS Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/setup-use-bridges/ug-setup-use-bridges-agx7f-soc/" class="md-nav__link">
        Setting up and Using Bridges HPS Linux Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/security/crypto/cryptoservices/ug-fpga-cryptoservice-agx7-soc/" class="md-nav__link">
        FPGA Crypto Services (FCS) Tutorial Example Design User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/security/crypto/sdos/ug-sdos-agx7f-soc/" class="md-nav__link">
        Secure Data Object Storage (SDOS) Tutorial Example User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/security/vab/hps-first/ug-vab-hps-first-agx7f-soc/" class="md-nav__link">
        Vendor Authorized Boot (HPS-First) Tutorial Example Design User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/security/vab/fpga-first/ug-vab-fpga-first-agx7f-soc/" class="md-nav__link">
        Vendor Authorized Boot (FPGA-First) Tutorial Example Design User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_1_14" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_1_14" id="__nav_7_4_1_14_label" tabindex="0">
          Nios V Processor Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_4_1_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4_1_14">
          <span class="md-nav__icon md-icon"></span>
          Nios V Processor Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_1_14_1" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_1_14_1" id="__nav_7_4_1_14_1_label" tabindex="0">
          Nios V/g
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_4_1_14_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4_1_14_1">
          <span class="md-nav__icon md-icon"></span>
          Nios V/g
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/soc/niosv/niosv_g/fpu_test/ug-fpu-agx7f-fpga/" class="md-nav__link">
        Nios® V/g Processor Floating Point Unit (FPU) Design
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_2" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_2" id="__nav_7_4_2_label" tabindex="0">
          F-Series FPGA Development Kit (2x F-Tile)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4_2">
          <span class="md-nav__icon md-icon"></span>
          F-Series FPGA Development Kit (2x F-Tile)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/fpga/gsrd/ug-gsrd-agx7f-fpga/" class="md-nav__link">
        HPS GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_2_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_2_2" id="__nav_7_4_2_2_label" tabindex="0">
          Nios V Processor Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_4_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4_2_2">
          <span class="md-nav__icon md-icon"></span>
          Nios V Processor Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_2_2_1" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_2_2_1" id="__nav_7_4_2_2_1_label" tabindex="0">
          Nios V/g
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_4_2_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          Nios V/g
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f-series/fpga/niosv/niosv_g/tinyml_liteRT/ug-tinyml-litert-agx7f-fpga/" class="md-nav__link">
        Nios® V/g TinyML LiteRT for Microcontroller Design
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_3" checked>
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_3" id="__nav_7_4_3_label" tabindex="0">
          I-Series FPGA Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_7_4_3">
          <span class="md-nav__icon md-icon"></span>
          I-Series FPGA Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../ed-ai-suite/agilex7/iseries_ofs_pcie/iseries_ofs_pcie/" class="md-nav__link">
        Agilex 7 PCIe-Attached Example Design with OFS (I-Series, 2x R-Tile and 1x F-Tile)
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Agilex 7 Multi-Channel 25GbE Time Precision Protocol System Example Design (I-Series, 4x F-Tile)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Agilex 7 Multi-Channel 25GbE Time Precision Protocol System Example Design (I-Series, 4x F-Tile)
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-example-design-overview" class="md-nav__link">
    System Example Design Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#glossary" class="md-nav__link">
    Glossary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#release-contents" class="md-nav__link">
    Release Contents
  </a>
  
    <nav class="md-nav" aria-label="Release Contents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binaries" class="md-nav__link">
    Binaries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sources" class="md-nav__link">
    Sources
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#release-notes" class="md-nav__link">
    Release Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-channel-25gbe-precision-time-protocol-system-example-design-architecture" class="md-nav__link">
    Multi-Channel 25GbE Precision Time Protocol System Example Design Architecture
  </a>
  
    <nav class="md-nav" aria-label="Multi-Channel 25GbE Precision Time Protocol System Example Design Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hardware-architecture" class="md-nav__link">
    Hardware Architecture
  </a>
  
    <nav class="md-nav" aria-label="Hardware Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hps-subsystem" class="md-nav__link">
    HPS Subsystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethernet-subsystem" class="md-nav__link">
    Ethernet Subsystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dma-subsystem" class="md-nav__link">
    DMA Subsystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-subsystem" class="md-nav__link">
    Packet Switch Subsystem
  </a>
  
    <nav class="md-nav" aria-label="Packet Switch Subsystem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tcam-data-structure" class="md-nav__link">
    TCAM Data Structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#main-time-of-the-day-subsystem-subordinate-time-of-the-day-subsystem" class="md-nav__link">
    Main Time Of the Day Subsystem &amp; Subordinate Time Of the Day Subsystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethernet-packet-generators" class="md-nav__link">
    Ethernet Packet Generators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sed-custom-ip" class="md-nav__link">
    SED Custom IP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#board-level-clocking-architecture" class="md-nav__link">
    Board Level Clocking Architecture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fpga-design-clocking-architecture" class="md-nav__link">
    FPGA Design Clocking Architecture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software-architecture" class="md-nav__link">
    Software Architecture
  </a>
  
    <nav class="md-nav" aria-label="Software Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intel-agilex-7-soc-fpga-f-tile-drivers" class="md-nav__link">
    Intel Agilex&trade; 7 SoC FPGA F-Tile Drivers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-space-applications" class="md-nav__link">
    User Space Applications
  </a>
  
    <nav class="md-nav" aria-label="User Space Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ptp4l" class="md-nav__link">
    ptp4l
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phc2sys" class="md-nav__link">
    phc2sys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethtool" class="md-nav__link">
    ethtool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packetgenerator" class="md-nav__link">
    packetgenerator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ptpbridge" class="md-nav__link">
    ptpbridge
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#address-map-details" class="md-nav__link">
    Address Map Details
  </a>
  
    <nav class="md-nav" aria-label="Address Map Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#address-map" class="md-nav__link">
    Address Map
  </a>
  
    <nav class="md-nav" aria-label="Address Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packet-generator-register-description" class="md-nav__link">
    Packet Generator Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qsfpdd-spi-control-pio-register-description" class="md-nav__link">
    QSFPDD SPI Control PIO Register description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qsfpdd-status-pio-register-description" class="md-nav__link">
    QSFPDD Status PIO Register description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f-tile-status-register-description" class="md-nav__link">
    F-Tile Status Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dma-subsystem-port-memory-map" class="md-nav__link">
    DMA SubSystem Port Memory Map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dma-subsystem-channel-memory-map" class="md-nav__link">
    DMA SubSystem Channel Memory Map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-register-map" class="md-nav__link">
    Packet Switch Register Map
  </a>
  
    <nav class="md-nav" aria-label="Packet Switch Register Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packet-switch-ingress-arbiter-register-description" class="md-nav__link">
    Packet Switch Ingress Arbiter Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-egress-rx-demux-register-description" class="md-nav__link">
    Packet Switch Egress RX Demux Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-ingress-rx-width-adjuster-register-description" class="md-nav__link">
    Packet Switch Ingress RX Width Adjuster Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-egress-rx-width-adjuster-register-description" class="md-nav__link">
    Packet Switch Egress RX Width Adjuster Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcam-key-register-map" class="md-nav__link">
    TCAM Key Register Map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interrupt-map" class="md-nav__link">
    Interrupt Map
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-setup" class="md-nav__link">
    Hardware Setup
  </a>
  
    <nav class="md-nav" aria-label="Hardware Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-the-serial-connection" class="md-nav__link">
    Configure the Serial Connection
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-flow" class="md-nav__link">
    User Flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-setup" class="md-nav__link">
    Environment Setup
  </a>
  
    <nav class="md-nav" aria-label="Environment Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tools-download-and-installation" class="md-nav__link">
    Tools Download and Installation
  </a>
  
    <nav class="md-nav" aria-label="Tools Download and Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#altera-quartus-prime-pro" class="md-nav__link">
    Altera Quartus Prime Pro
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dependency-packages-for-sw-compilation" class="md-nav__link">
    Install dependency packages for SW compilation
  </a>
  
    <nav class="md-nav" aria-label="Install dependency packages for SW compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arm-gnu-toolchain-113rel1" class="md-nav__link">
    Arm GNU Toolchain 11.3.Rel1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yocto-build-prerequisites" class="md-nav__link">
    Yocto Build Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bash-as-default-command-interpreter" class="md-nav__link">
    Bash as Default Command Interpreter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#package-download" class="md-nav__link">
    Package Download
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation" class="md-nav__link">
    Compilation
  </a>
  
    <nav class="md-nav" aria-label="Compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hw-compilation" class="md-nav__link">
    HW compilation
  </a>
  
    <nav class="md-nav" aria-label="HW compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-hps-and-core-rbf-file" class="md-nav__link">
    Build HPS and CORE RBF file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-qspi-image" class="md-nav__link">
    Build QSPI Image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sw-compilation" class="md-nav__link">
    SW Compilation
  </a>
  
    <nav class="md-nav" aria-label="SW Compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-yocto" class="md-nav__link">
    Build Yocto
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yocto-update" class="md-nav__link">
    Yocto Update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programming" class="md-nav__link">
    Programming
  </a>
  
    <nav class="md-nav" aria-label="Programming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#programming-the-sw-binary" class="md-nav__link">
    Programming the SW binary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programming-the-hw-binary" class="md-nav__link">
    Programming the HW binary
  </a>
  
    <nav class="md-nav" aria-label="Programming the HW binary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#program-the-onboard-max10-device" class="md-nav__link">
    Program the onboard MAX10 device
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#program-the-onboard-agilex-7-device" class="md-nav__link">
    Program the onboard Agilex&trade; 7 device
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux-boot" class="md-nav__link">
    Linux Boot
  </a>
  
    <nav class="md-nav" aria-label="Linux Boot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethernet-link-status" class="md-nav__link">
    Ethernet Link Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initial-system-configuration" class="md-nav__link">
    Initial System Configuration
  </a>
  
    <nav class="md-nav" aria-label="Initial System Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-via-script" class="md-nav__link">
    Configuration Via Script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-configuration" class="md-nav__link">
    Manual Configuration
  </a>
  
    <nav class="md-nav" aria-label="Manual Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-interrupt-core-handling" class="md-nav__link">
    Define Interrupt Core Handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-old-configurations" class="md-nav__link">
    Clear Old Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-ipv4-addresses" class="md-nav__link">
    Set IPv4 Addresses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-rules" class="md-nav__link">
    Packet Switch Rules
  </a>
  
    <nav class="md-nav" aria-label="Packet Switch Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generic-traffic-rules" class="md-nav__link">
    Generic Traffic Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iperf3-synthetic-traffic-rules" class="md-nav__link">
    iPerf3 Synthetic Traffic Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ptp-traffic-rules" class="md-nav__link">
    PTP Traffic Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-generator-traffic-rules" class="md-nav__link">
    Packet Generator Traffic Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipv6-traffic-rules" class="md-nav__link">
    IPv6 Traffic Rules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traffic-classes" class="md-nav__link">
    Traffic Classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethernet-connectivity-test" class="md-nav__link">
    Ethernet Connectivity Test
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-ping-test" class="md-nav__link">
    Run Ping Test
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-iperf3-test" class="md-nav__link">
    Run iPerf3 Test
  </a>
  
    <nav class="md-nav" aria-label="Run iPerf3 Test">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iperf-traffic-to-dma-0" class="md-nav__link">
    iPerf traffic to DMA 0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iperf-traffic-to-dma-1" class="md-nav__link">
    iPerf traffic to DMA 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iperf-traffic-to-dma-2" class="md-nav__link">
    iPerf traffic to DMA 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-packet-generator-test" class="md-nav__link">
    Run Packet Generator Test
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-ptp4l-test" class="md-nav__link">
    Run ptp4l Test
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    Debug
  </a>
  
    <nav class="md-nav" aria-label="Debug">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethernet-interfaces-are-missing" class="md-nav__link">
    Ethernet Interfaces are Missing
  </a>
  
    <nav class="md-nav" aria-label="Ethernet Interfaces are Missing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#incorrect-onboard-max10-bitstream" class="md-nav__link">
    Incorrect onboard MAX10 bitstream
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethernet-interfaces-are-down" class="md-nav__link">
    Ethernet Interfaces are DOWN
  </a>
  
    <nav class="md-nav" aria-label="Ethernet Interfaces are DOWN">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#suboptimal-link-quality" class="md-nav__link">
    Suboptimal Link Quality
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-debug-tools" class="md-nav__link">
    System Debug Tools
  </a>
  
    <nav class="md-nav" aria-label="System Debug Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reading-the-ethernet-subsystem-ip-configuration-and-status-registers-with-the-hps" class="md-nav__link">
    Reading the Ethernet Subsystem IP Configuration and Status Registers with the HPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-to-the-ethernet-subsystem-ip-configuration-and-status-registers-with-the-hps" class="md-nav__link">
    Access to the Ethernet Subsystem IP Configuration and Status Registers with the HPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-transceiver-tool-kit-for-the-ethernet-subsystem" class="md-nav__link">
    Enabling Transceiver Tool Kit for the Ethernet Subsystem
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation" class="md-nav__link">
    Simulation
  </a>
  
    <nav class="md-nav" aria-label="Simulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simulation-environment-setup" class="md-nav__link">
    Simulation Environment Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simulation-directory" class="md-nav__link">
    Simulation Directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uvm-test-use-cases" class="md-nav__link">
    UVM Test Use Cases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-uvm-environment" class="md-nav__link">
    Configuring UVM Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-flow" class="md-nav__link">
    Test Flow
  </a>
  
    <nav class="md-nav" aria-label="Test Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simulation-results" class="md-nav__link">
    Simulation Results
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simulation-command-summary" class="md-nav__link">
    Simulation Command Summary
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    Reference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notices-disclaimers" class="md-nav__link">
    Notices &amp; Disclaimers
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../soc/gsrd/ug-gsrd-agx7i-soc/" class="md-nav__link">
        HPS GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../avst_cii/agilex7-ed-pcie-cii/" class="md-nav__link">
        CII Example Design
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_4" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_4" id="__nav_7_4_4_label" tabindex="0">
          M-Series HBM2e Development Kit (3x F-Tile & 1x R-Tile)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4_4">
          <span class="md-nav__icon md-icon"></span>
          M-Series HBM2e Development Kit (3x F-Tile & 1x R-Tile)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../m-series/hbm2e/ug-gsrd-agx7m-hbm2e/" class="md-nav__link">
        HPS GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../m-series/pcie_rp/ug-pcie_rp-agx7m-hbm2e/" class="md-nav__link">
        PCIe Root Port User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_5" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_5" id="__nav_7_4_5_label" tabindex="0">
          DE10-Agilex Terasic
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4_5">
          <span class="md-nav__icon md-icon"></span>
          DE10-Agilex Terasic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../ed-ai-suite/agilex7/de10_pcie/de10_pcie/" class="md-nav__link">
        Agilex 7 PCIe-Attached Example Design (DE10)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_6" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_6" id="__nav_7_4_6_label" tabindex="0">
          FPGA SmartNIC N6001-PL Platform
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4_6">
          <span class="md-nav__icon md-icon"></span>
          FPGA SmartNIC N6001-PL Platform
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../ed-ai-suite/agilex7/n6001_ofs_pcie/n6001_ofs_pcie/" class="md-nav__link">
        Agilex 7 PCIe-Attached Example Design with OFS (N6001)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_5" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_5" id="__nav_7_5_label" tabindex="0">
          Stratix® 10
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_5">
          <span class="md-nav__icon md-icon"></span>
          Stratix® 10
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_5_1" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_5_1" id="__nav_7_5_1_label" tabindex="0">
          SX SoC Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_5_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_5_1">
          <span class="md-nav__icon md-icon"></span>
          SX SoC Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/gsrd/ug-gsrd-s10sx-soc/" class="md-nav__link">
        HPS GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/rsu/ug-rsu-s10sx-soc/" class="md-nav__link">
        HPS Remote System Update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/remote-debug/ug-remote-debug-s10sx-soc/" class="md-nav__link">
        SoC FPGA Remote Debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/emmc/ug-emmc-s10sx-soc/" class="md-nav__link">
        HPS eMMC Boot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/fabric-config/ug-linux-fabric-config-s10sx-soc/" class="md-nav__link">
        SoC Fabric Configuration from Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/security/secure-boot/hps-first/ug-secure-boot-hps-first-s10sx-soc/" class="md-nav__link">
        Secure Boot Tutorial Example Design User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/boot-examples/ug-linux-boot-s10-soc/" class="md-nav__link">
        HPS GHRD Linux Boot Examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
          Arria® 10
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_6">
          <span class="md-nav__icon md-icon"></span>
          Arria® 10
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6_1" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_6_1" id="__nav_7_6_1_label" tabindex="0">
          SX SoC Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_6_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_6_1">
          <span class="md-nav__icon md-icon"></span>
          SX SoC Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../arria-10/sx/soc/gsrd/ug-gsrd-a10sx-soc/" class="md-nav__link">
        GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../arria-10/sx/soc/boot-examples/ug-linux-boot-a10-soc/" class="md-nav__link">
        HPS GHRD Linux Boot Examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_7" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_7" id="__nav_7_7_label" tabindex="0">
          Cyclone® V
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_7">
          <span class="md-nav__icon md-icon"></span>
          Cyclone® V
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_7_1" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_7_1" id="__nav_7_7_1_label" tabindex="0">
          SX SoC Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_7_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_7_1">
          <span class="md-nav__icon md-icon"></span>
          SX SoC Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../cyclone-v/sx/soc/gsrd/ug-gsrd-cve-soc/" class="md-nav__link">
        GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../cyclone-v/sx/soc/boot-examples/ug-linux-boot-cve-soc/" class="md-nav__link">
        HPS GHRD Linux Boot Examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-example-design-overview" class="md-nav__link">
    System Example Design Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#glossary" class="md-nav__link">
    Glossary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#release-contents" class="md-nav__link">
    Release Contents
  </a>
  
    <nav class="md-nav" aria-label="Release Contents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binaries" class="md-nav__link">
    Binaries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sources" class="md-nav__link">
    Sources
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#release-notes" class="md-nav__link">
    Release Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-channel-25gbe-precision-time-protocol-system-example-design-architecture" class="md-nav__link">
    Multi-Channel 25GbE Precision Time Protocol System Example Design Architecture
  </a>
  
    <nav class="md-nav" aria-label="Multi-Channel 25GbE Precision Time Protocol System Example Design Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hardware-architecture" class="md-nav__link">
    Hardware Architecture
  </a>
  
    <nav class="md-nav" aria-label="Hardware Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hps-subsystem" class="md-nav__link">
    HPS Subsystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethernet-subsystem" class="md-nav__link">
    Ethernet Subsystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dma-subsystem" class="md-nav__link">
    DMA Subsystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-subsystem" class="md-nav__link">
    Packet Switch Subsystem
  </a>
  
    <nav class="md-nav" aria-label="Packet Switch Subsystem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tcam-data-structure" class="md-nav__link">
    TCAM Data Structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#main-time-of-the-day-subsystem-subordinate-time-of-the-day-subsystem" class="md-nav__link">
    Main Time Of the Day Subsystem &amp; Subordinate Time Of the Day Subsystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethernet-packet-generators" class="md-nav__link">
    Ethernet Packet Generators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sed-custom-ip" class="md-nav__link">
    SED Custom IP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#board-level-clocking-architecture" class="md-nav__link">
    Board Level Clocking Architecture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fpga-design-clocking-architecture" class="md-nav__link">
    FPGA Design Clocking Architecture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software-architecture" class="md-nav__link">
    Software Architecture
  </a>
  
    <nav class="md-nav" aria-label="Software Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intel-agilex-7-soc-fpga-f-tile-drivers" class="md-nav__link">
    Intel Agilex&trade; 7 SoC FPGA F-Tile Drivers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-space-applications" class="md-nav__link">
    User Space Applications
  </a>
  
    <nav class="md-nav" aria-label="User Space Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ptp4l" class="md-nav__link">
    ptp4l
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phc2sys" class="md-nav__link">
    phc2sys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethtool" class="md-nav__link">
    ethtool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packetgenerator" class="md-nav__link">
    packetgenerator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ptpbridge" class="md-nav__link">
    ptpbridge
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#address-map-details" class="md-nav__link">
    Address Map Details
  </a>
  
    <nav class="md-nav" aria-label="Address Map Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#address-map" class="md-nav__link">
    Address Map
  </a>
  
    <nav class="md-nav" aria-label="Address Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packet-generator-register-description" class="md-nav__link">
    Packet Generator Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qsfpdd-spi-control-pio-register-description" class="md-nav__link">
    QSFPDD SPI Control PIO Register description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qsfpdd-status-pio-register-description" class="md-nav__link">
    QSFPDD Status PIO Register description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f-tile-status-register-description" class="md-nav__link">
    F-Tile Status Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dma-subsystem-port-memory-map" class="md-nav__link">
    DMA SubSystem Port Memory Map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dma-subsystem-channel-memory-map" class="md-nav__link">
    DMA SubSystem Channel Memory Map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-register-map" class="md-nav__link">
    Packet Switch Register Map
  </a>
  
    <nav class="md-nav" aria-label="Packet Switch Register Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packet-switch-ingress-arbiter-register-description" class="md-nav__link">
    Packet Switch Ingress Arbiter Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-egress-rx-demux-register-description" class="md-nav__link">
    Packet Switch Egress RX Demux Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-ingress-rx-width-adjuster-register-description" class="md-nav__link">
    Packet Switch Ingress RX Width Adjuster Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-egress-rx-width-adjuster-register-description" class="md-nav__link">
    Packet Switch Egress RX Width Adjuster Register Description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcam-key-register-map" class="md-nav__link">
    TCAM Key Register Map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interrupt-map" class="md-nav__link">
    Interrupt Map
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-setup" class="md-nav__link">
    Hardware Setup
  </a>
  
    <nav class="md-nav" aria-label="Hardware Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-the-serial-connection" class="md-nav__link">
    Configure the Serial Connection
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-flow" class="md-nav__link">
    User Flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-setup" class="md-nav__link">
    Environment Setup
  </a>
  
    <nav class="md-nav" aria-label="Environment Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tools-download-and-installation" class="md-nav__link">
    Tools Download and Installation
  </a>
  
    <nav class="md-nav" aria-label="Tools Download and Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#altera-quartus-prime-pro" class="md-nav__link">
    Altera Quartus Prime Pro
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dependency-packages-for-sw-compilation" class="md-nav__link">
    Install dependency packages for SW compilation
  </a>
  
    <nav class="md-nav" aria-label="Install dependency packages for SW compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arm-gnu-toolchain-113rel1" class="md-nav__link">
    Arm GNU Toolchain 11.3.Rel1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yocto-build-prerequisites" class="md-nav__link">
    Yocto Build Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bash-as-default-command-interpreter" class="md-nav__link">
    Bash as Default Command Interpreter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#package-download" class="md-nav__link">
    Package Download
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation" class="md-nav__link">
    Compilation
  </a>
  
    <nav class="md-nav" aria-label="Compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hw-compilation" class="md-nav__link">
    HW compilation
  </a>
  
    <nav class="md-nav" aria-label="HW compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-hps-and-core-rbf-file" class="md-nav__link">
    Build HPS and CORE RBF file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-qspi-image" class="md-nav__link">
    Build QSPI Image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sw-compilation" class="md-nav__link">
    SW Compilation
  </a>
  
    <nav class="md-nav" aria-label="SW Compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-yocto" class="md-nav__link">
    Build Yocto
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yocto-update" class="md-nav__link">
    Yocto Update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programming" class="md-nav__link">
    Programming
  </a>
  
    <nav class="md-nav" aria-label="Programming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#programming-the-sw-binary" class="md-nav__link">
    Programming the SW binary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programming-the-hw-binary" class="md-nav__link">
    Programming the HW binary
  </a>
  
    <nav class="md-nav" aria-label="Programming the HW binary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#program-the-onboard-max10-device" class="md-nav__link">
    Program the onboard MAX10 device
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#program-the-onboard-agilex-7-device" class="md-nav__link">
    Program the onboard Agilex&trade; 7 device
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux-boot" class="md-nav__link">
    Linux Boot
  </a>
  
    <nav class="md-nav" aria-label="Linux Boot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethernet-link-status" class="md-nav__link">
    Ethernet Link Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initial-system-configuration" class="md-nav__link">
    Initial System Configuration
  </a>
  
    <nav class="md-nav" aria-label="Initial System Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-via-script" class="md-nav__link">
    Configuration Via Script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-configuration" class="md-nav__link">
    Manual Configuration
  </a>
  
    <nav class="md-nav" aria-label="Manual Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-interrupt-core-handling" class="md-nav__link">
    Define Interrupt Core Handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-old-configurations" class="md-nav__link">
    Clear Old Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-ipv4-addresses" class="md-nav__link">
    Set IPv4 Addresses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-switch-rules" class="md-nav__link">
    Packet Switch Rules
  </a>
  
    <nav class="md-nav" aria-label="Packet Switch Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generic-traffic-rules" class="md-nav__link">
    Generic Traffic Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iperf3-synthetic-traffic-rules" class="md-nav__link">
    iPerf3 Synthetic Traffic Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ptp-traffic-rules" class="md-nav__link">
    PTP Traffic Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packet-generator-traffic-rules" class="md-nav__link">
    Packet Generator Traffic Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipv6-traffic-rules" class="md-nav__link">
    IPv6 Traffic Rules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traffic-classes" class="md-nav__link">
    Traffic Classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethernet-connectivity-test" class="md-nav__link">
    Ethernet Connectivity Test
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-ping-test" class="md-nav__link">
    Run Ping Test
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-iperf3-test" class="md-nav__link">
    Run iPerf3 Test
  </a>
  
    <nav class="md-nav" aria-label="Run iPerf3 Test">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iperf-traffic-to-dma-0" class="md-nav__link">
    iPerf traffic to DMA 0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iperf-traffic-to-dma-1" class="md-nav__link">
    iPerf traffic to DMA 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iperf-traffic-to-dma-2" class="md-nav__link">
    iPerf traffic to DMA 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-packet-generator-test" class="md-nav__link">
    Run Packet Generator Test
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-ptp4l-test" class="md-nav__link">
    Run ptp4l Test
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    Debug
  </a>
  
    <nav class="md-nav" aria-label="Debug">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethernet-interfaces-are-missing" class="md-nav__link">
    Ethernet Interfaces are Missing
  </a>
  
    <nav class="md-nav" aria-label="Ethernet Interfaces are Missing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#incorrect-onboard-max10-bitstream" class="md-nav__link">
    Incorrect onboard MAX10 bitstream
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethernet-interfaces-are-down" class="md-nav__link">
    Ethernet Interfaces are DOWN
  </a>
  
    <nav class="md-nav" aria-label="Ethernet Interfaces are DOWN">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#suboptimal-link-quality" class="md-nav__link">
    Suboptimal Link Quality
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-debug-tools" class="md-nav__link">
    System Debug Tools
  </a>
  
    <nav class="md-nav" aria-label="System Debug Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reading-the-ethernet-subsystem-ip-configuration-and-status-registers-with-the-hps" class="md-nav__link">
    Reading the Ethernet Subsystem IP Configuration and Status Registers with the HPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-to-the-ethernet-subsystem-ip-configuration-and-status-registers-with-the-hps" class="md-nav__link">
    Access to the Ethernet Subsystem IP Configuration and Status Registers with the HPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-transceiver-tool-kit-for-the-ethernet-subsystem" class="md-nav__link">
    Enabling Transceiver Tool Kit for the Ethernet Subsystem
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation" class="md-nav__link">
    Simulation
  </a>
  
    <nav class="md-nav" aria-label="Simulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simulation-environment-setup" class="md-nav__link">
    Simulation Environment Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simulation-directory" class="md-nav__link">
    Simulation Directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uvm-test-use-cases" class="md-nav__link">
    UVM Test Use Cases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-uvm-environment" class="md-nav__link">
    Configuring UVM Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-flow" class="md-nav__link">
    Test Flow
  </a>
  
    <nav class="md-nav" aria-label="Test Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simulation-results" class="md-nav__link">
    Simulation Results
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simulation-command-summary" class="md-nav__link">
    Simulation Command Summary
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    Reference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notices-disclaimers" class="md-nav__link">
    Notices &amp; Disclaimers
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="multi-channel-25gbe-precision-time-protocol-system-example-design">Multi-Channel 25GbE Precision Time Protocol System Example Design<a class="headerlink" href="#multi-channel-25gbe-precision-time-protocol-system-example-design" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>The Precision Time Protocol (PTP) synchronizes clocks across networked devices to maintain a unified and precise time reference. In systems where components must coordinate actions —such as logging, data exchange, or event triggering— PTP ensures consistent timing, enabling deterministic operations and improving overall system integrity.</p>
<p>Agilex&trade; 7 I-Series is designed to operate as a PTP network node configured as an Ordinary Clock, Boundary Clock or Transparent Clock, as defined by IEEE 1588-2008 - Standard for a Precision Clock Synchronization Protocol for Networked Measurement and Control Systems.</p>
<p>The details of Precision Time Protocol are beyond the scope of this document.  For comprehensive information, refer to the <a href="https://standards.ieee.org/ieee/1588/4355/">1588-2008 - IEEE Standard for a Precision Clock Synchronization Protocol for Networked Measurement and Control Systems</a>.</p>
<h3 id="system-example-design-overview">System Example Design Overview<a class="headerlink" href="#system-example-design-overview" title="Permanent link">&para;</a></h3>
<p>The Multi-Channel 25GbE Precision Time Protocol System Example Design includes two Ethernet ports with built-in 2-step hardware PTP timestamping capabilities. The integrated Agilex&trade; 7 Hard Processor System (HPS) operates a PTP software stack that complements the hardware-based timestamping functionality.</p>
<p>The System Example Design (SED) provides the necessary drivers and user applications to support the Linux Network stack, the Linux PTP stack, and network Quality of Service (QoS) through the Linux kernel Traffic Control (TC) system. T-BC and T-TSC conformance test reports are available with the SED <a href="#binaries">binaries</a>.</p>
<p>The system's primary components include:</p>
<ul>
<li>Golden Hardware Reference Design (GHRD)</li>
<li>Reference HPS software including:<ul>
<li>Arm Trusted Firmware</li>
<li>U-Boot</li>
<li>Linux Kernel</li>
<li>Linux Drivers</li>
<li>User Space Applications</li>
</ul>
</li>
</ul>
<p>The high-level hardware setup for the system example design is shown below:</p>
<p><a class="glightbox" href="../images/mcqos_sed_arch.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/mcqos_sed_arch.png" /></a></p>
<p><strong>Figure 1.</strong> Multi-channel 25GbE Precision Time Protocol system example design hardware setup</p>
<h3 id="glossary">Glossary<a class="headerlink" href="#glossary" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th><em>Acronym</em></th>
<th><em>Full Form</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>PTP</td>
<td>Precision Time Protocol</td>
</tr>
<tr>
<td>SED</td>
<td>System Example Design</td>
</tr>
<tr>
<td>ToD</td>
<td>Time of Day</td>
</tr>
<tr>
<td>mSGDMA</td>
<td>Modular Scatter-Gather DMA</td>
</tr>
<tr>
<td>QoS</td>
<td>Quality of Service</td>
</tr>
<tr>
<td>AVST</td>
<td>Avalon Streaming</td>
</tr>
<tr>
<td>AXI</td>
<td>Advanced eXtensible Interface</td>
</tr>
<tr>
<td>CDC</td>
<td>Clock Domain Crossing</td>
</tr>
<tr>
<td>ETS</td>
<td>Egress Timestamp</td>
</tr>
<tr>
<td>ITS</td>
<td>Ingress Timestamp</td>
</tr>
<tr>
<td>TS</td>
<td>Timestamp</td>
</tr>
<tr>
<td>FP</td>
<td>Fingerprint</td>
</tr>
<tr>
<td>NVM</td>
<td>Non Volatile Memory</td>
</tr>
<tr>
<td>GHRD</td>
<td>Golden Hardware Reference Design</td>
</tr>
<tr>
<td>GSRD</td>
<td>Golden Software Reference Design</td>
</tr>
</tbody>
</table>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<p>This system example design builds upon the <a href="https://altera-fpga.github.io/rel-24.3/embedded-designs/agilex-7/i-series/soc/gsrd/ug-gsrd-agx7i-soc/">Golden System Reference Design (GSRD) for the Agilex&trade; 7 I-Series Transceiver-SoC Development Kit (4x F-Tile)</a>. It is recommended to familiarize yourself with the GSRD development flow before proceeding with this document.</p>
<p>The following items are required to fully exercise the SED:</p>
<ul>
<li>Agilex&trade; I-Series Transceiver-SoC Development Kit (4x F-Tile) (<a href="https://www.intel.com/content/www/us/en/products/details/fpga/development-kits/agilex/si-agi027.html">DK-SI-AGI027FC</a>) x 2.<ul>
<li>HPS IO48 OOBE daughter card x 2.</li>
<li>Micro USB cable for serial output x 2.</li>
<li>USB Type B cable for on-board FPGA Download Cable II x 2.</li>
<li>Micro SD card (4GB or greater) x 2.</li>
<li>Mini USB cable for OOBE daughter card serial port x 2.</li>
<li>100G QSFP Cable. Design tested with:<ul>
<li><a href="https://www.fs.com/products/50171.html">FS (Q28-AO05)</a> - 5m (16ft) 100G QSFP28 Active Optical Cable.</li>
<li><a href="https://www.fs.com/products/47096.html?attribute=10124&amp;id=4695132">FS (Q28-PC01)</a> - 1m (3ft) 100G QSFP28 Passive Direct Attach Copper Twinax Cable</li>
</ul>
</li>
</ul>
</li>
<li>Host PC with:<ul>
<li>OS Ubuntu 22.04 LTS. System example design source files were compiled using Ubuntu 22.04 LTS. Other versions and distributions may also be compatible.</li>
<li>Serial terminal software (e.g., Minicom on Linux, Tera Term or PuTTY on Windows) is required.</li>
<li>Micro SD card slot or Micro SD card writer/reader</li>
<li>Altera Quartus Prime Pro 25.1.1</li>
</ul>
</li>
</ul>
<p>U-Boot and Linux compilation, Yocto build, and SD card image creation require a Linux host PC. All other operations can be performed on either Windows or Linux.</p>
<h2 id="release-contents">Release Contents<a class="headerlink" href="#release-contents" title="Permanent link">&para;</a></h2>
<h3 id="binaries">Binaries<a class="headerlink" href="#binaries" title="Permanent link">&para;</a></h3>
<p>Release notes and pre-built binaries are available under the <a href="https://github.com/altera-fpga/agilex7-ed-ptp-mcqos-25g/releases/tag/SED-2x25GE-1588PTP-MCQOS-agi027fc-si-devkit-Q25.1.1-Rel-1.1">GitHub repository release</a>.</p>
<table>
<thead>
<tr>
<th><em>File</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>calnex_conformance_test_report_f-tile_25g.zip</td>
<td>T-BC and T-TSC conformance test reports</td>
</tr>
<tr>
<td>images.zip</td>
<td>Pre-compiled bitstream files for system example design devices.</td>
</tr>
<tr>
<td>sdimage.tar.gz</td>
<td>SD binary image containing Linux boot files.</td>
</tr>
<tr>
<td>Source code (zip)</td>
<td>System example design source files provided as a ZIP archive</td>
</tr>
<tr>
<td>Source code (tar.gz)</td>
<td>System example design source files provided as a TAR GZ archive</td>
</tr>
</tbody>
</table>
<h3 id="sources">Sources<a class="headerlink" href="#sources" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th><em>Component</em></th>
<th><em>Location</em></th>
<th><em>Branch</em></th>
<th><em>Commit ID/Tag</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>GHRD</td>
<td>https://github.com/altera-fpga/agilex7-ed-ptp-mcqos-25g/tree/main/agi027fc-si-devkit/src/hw</td>
<td></td>
<td>SED-2x25GE-1588PTP-MCQOS-agi027fc-si-devkit-Q25.1.1-Rel-1.1</td>
</tr>
<tr>
<td>Linux</td>
<td>https://github.com/altera-fpga/linux-socfpga</td>
<td>socfpga-6.12.19-lts-ethernet-sed</td>
<td>SED-2x25GE-1588PTP-MCQOS-agi027fc-si-devkit-Q25.1.1-Rel-1.1</td>
</tr>
<tr>
<td>Arm Trusted Firmware</td>
<td>https://github.com/altera-fpga/arm-trusted-firmware</td>
<td>socfpga_v2.11.0</td>
<td>9aee18305b73651b74301483510c29fef9ce23ce</td>
</tr>
<tr>
<td>U-Boot</td>
<td>https://github.com/altera-fpga/u-boot-socfpga</td>
<td>socfpga_v2024.04</td>
<td>135e53726d3dfbe55b4d61c2bf3fdf32cdc372e5</td>
</tr>
<tr>
<td>Yocto Project: poky</td>
<td>https://git.yoctoproject.org/poky/</td>
<td>scarthgap</td>
<td>d1c25a3ce446a23e453e40ac2ba8f22b0e7ccefd</td>
</tr>
<tr>
<td>Yocto Project: meta-intel-fpga</td>
<td>https://git.yoctoproject.org/meta-intel-fpga/</td>
<td>scarthgap</td>
<td>9714ae1ef8f22302bac60b7d2081bbdf3199ca70</td>
</tr>
<tr>
<td>Yocto Project: meta-intel-fpga-refdes</td>
<td>https://github.com/altera-fpga/meta-intel-fpga-refdes/</td>
<td>scarthgap</td>
<td>bffc5bc012f1653beb58878b54b44e74b0f27404</td>
</tr>
<tr>
<td>Yocto Project: meta-agilex7-sed</td>
<td>https://github.com/altera-fpga/agilex7-ed-ptp-mcqos-25g/tree/main/agi027fc-si-devkit/src/sw/yocto/meta-agilex7-sed</td>
<td>scarthgap</td>
<td>SED-2x25GE-1588PTP-MCQOS-agi027fc-si-devkit-Q25.1.1-Rel-1.1</td>
</tr>
<tr>
<td>GSRD Build Script: gsrd-socfpga</td>
<td>https://github.com/altera-fpga/agilex7-ed-ptp-mcqos-25g/tree/main/agi027fc-si-devkit/src/sw/yocto/build.sh</td>
<td></td>
<td>SED-2x25GE-1588PTP-MCQOS-agi027fc-si-devkit-Q25.1.1-Rel-1.1</td>
</tr>
</tbody>
</table>
<h2 id="release-notes">Release Notes<a class="headerlink" href="#release-notes" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/altera-fpga/agilex7-ed-ptp-mcqos-25g/releases/tag/SED-2x25GE-1588PTP-MCQOS-agi027fc-si-devkit-Q25.1.1-Rel-1.1">Multi-Channel 25GbE Precision Time Protocol System Example Design Release Notes</a>.</p>
<h2 id="multi-channel-25gbe-precision-time-protocol-system-example-design-architecture">Multi-Channel 25GbE Precision Time Protocol System Example Design Architecture<a class="headerlink" href="#multi-channel-25gbe-precision-time-protocol-system-example-design-architecture" title="Permanent link">&para;</a></h2>
<h3 id="hardware-architecture">Hardware Architecture<a class="headerlink" href="#hardware-architecture" title="Permanent link">&para;</a></h3>
<p>Figure 2 illustrates the high-level architecture of the system example design. The main components include:</p>
<ul>
<li>HPS Subsystem</li>
<li>DMA Subsystem</li>
<li>Packet Switch Subsystem (Also referred to as the PTP Bridge Subsystem)</li>
<li>Ethernet Subsystem</li>
<li>Main Time Of the Day Subsystem</li>
<li>Subordinate Time Of the Day Subsystem</li>
<li>Ethernet Packet Generators</li>
</ul>
<p><a class="glightbox" href="../images/mcqos_25g_high_arch.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/mcqos_25g_high_arch.png" /></a></p>
<p><strong>Figure 2.</strong> Multi-Channel 25GbE Precision Time Protocol SED High Level Hardware Architecture</p>
<h4 id="hps-subsystem">HPS Subsystem<a class="headerlink" href="#hps-subsystem" title="Permanent link">&para;</a></h4>
<p>The HPS Subsystem, built around the Agilex&trade; 7 Hard Processor System (HPS) and supporting logic, manages PTP synchronization and handles Time of Day (ToD) adjustments. It also provides access to status and control registers for other system components.</p>
<p>The subsystem communicates with onboard components via its peripherals, using an I2C bus to monitor and configure the QSFP28 module. It also controls the Microchip <a href="https://www.microchip.com/en-us/product/zl30733">Microchip ZL30733 PTP &amp; SyncE Network Synchronizer</a> over the same bus, performing phase and frequency adjustments to maintain system-wide timing accuracy.</p>
<h4 id="ethernet-subsystem">Ethernet Subsystem<a class="headerlink" href="#ethernet-subsystem" title="Permanent link">&para;</a></h4>
<p>This module instantiates the Ethernet Subsystem FPGA IP. Refer to its <a href="https://www.intel.com/content/www/us/en/docs/programmable/773413/current/introduction.html">user guide</a> for details.</p>
<h4 id="dma-subsystem">DMA Subsystem<a class="headerlink" href="#dma-subsystem" title="Permanent link">&para;</a></h4>
<p>The DMA Subsystem uses mSGDMA engines to transfer data between the HPS and the Ethernet Subsystem. It includes six DMA Ports, each with two Channels for transmit (TX) and receive (RX) traffic. These channels natively handle PTP timestamps and fingerprints.</p>
<p>The subsystem groups DMA Ports into sets of three, assigning each group to one Ethernet port in the Ethernet Subsystem. It also translates protocols between Avalon® Streaming (AVST) and AXI-Stream (AXI-ST) interfaces, and performs clock domain crossing between the HPS Subsystem and Ethernet Subsystem clock domains. Figure 3 shows a high level architecture diagram of one of the DMA Subsystem ports.</p>
<p><a class="glightbox" href="../images/mcqos_dma_subsys_high_arch.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/mcqos_dma_subsys_high_arch.png" /></a></p>
<p><strong>Figure 3.</strong> DMA Subsystem Port High Level Architecture</p>
<h4 id="packet-switch-subsystem">Packet Switch Subsystem<a class="headerlink" href="#packet-switch-subsystem" title="Permanent link">&para;</a></h4>
<p>The Packet Switch Subsystem implements an L2–L4 Ethernet packet switch that arbitrates among four client interfaces per port, connecting three DMA engines and a traffic generator to the transmit path. On the receive path, packet routing between ports and clients is handled by a <a href="https://www.intel.com/content/www/us/en/docs/programmable/789389/latest/tcam.html">Ternary Content-Addressable Memory (TCAM)</a>, with rules dynamically configurable via software. By default, packets without a TCAM match are dropped for security reasons. For matched entries, the Packet Switch subsystem routes packets to either a DMA Port or a User Port (Traffic Generator).</p>
<p>The TX datapath arbitration ignores Ethernet packet type and uses a weighted priority round-robin scheme to manage requests from DMA and User Port. Figure 4 illustrates the high-level architecture of the Packet Switch transmitter path. On the transmit path, the Ethernet Subsystem returns the egress timestamp (ETS) for each packet along with its corresponding fingerprint for tracking.</p>
<p>The RX datapath does not implement priority-based arbitration. Instead, traffic priority to the HPS is software-defined, with each DMA Port represented as a queue and assigned a configurable priority level. Figure 5 illustrates the high-level architecture of the Packet Switch receiver path.</p>
<p><a class="glightbox" href="../images/mcqos_25g_ptp_bridge_tx_arch.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/mcqos_25g_ptp_bridge_tx_arch.png" /></a></p>
<p><strong>Figure 4.</strong> Packet Switch Subsystem TX Datapath High Level Architecture</p>
<p><a class="glightbox" href="../images/mcqos_25g_ptp_bridge_rx_arch.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/mcqos_25g_ptp_bridge_rx_arch.png" /></a></p>
<p><strong>Figure 5.</strong> Packet Switch Subsystem RX Datapath High Level Architecture</p>
<h5 id="tcam-data-structure">TCAM Data Structure<a class="headerlink" href="#tcam-data-structure" title="Permanent link">&para;</a></h5>
<p>The TCAM supports lookups using Ethernet frame headers, protocol headers, and IEEE 1588-specific fields.</p>
<p>The table below lists the 492-bit TCAM key fields. If a packet lacks a corresponding header field, the key field is set to 0. Otherwise, the Packet Switch parser populates the field with extracted data. Unused bits from shorter headers are also zeroed.</p>
<table>
<thead>
<tr>
<th><em>Field</em></th>
<th align="center"><em>Width (bits)</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>rsvd</td>
<td align="center">32</td>
<td>Reserved.</td>
</tr>
<tr>
<td>flagField</td>
<td align="center">16</td>
<td>flagField field in PTP header.</td>
</tr>
<tr>
<td>messageType</td>
<td align="center">4</td>
<td>messageType field in PTP header.</td>
</tr>
<tr>
<td>ip_protocol</td>
<td align="center">8</td>
<td>IP header protocol field, defined as Protocol in IPv4 or next_header in IPv6.</td>
</tr>
<tr>
<td>ethtype</td>
<td align="center">16</td>
<td>Ethernet header ethtype</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td><strong>dot2q</strong>: (eth.{da,sa}) / (vlana.{tpid,tci}) / (vlanb.{tpid,tci}) / ethtype <br> <strong>dot1q</strong>: (eth.{da,sa}) / (vlana.{tpid,tci}) / ethtype <br> <strong>eth</strong>:   (eth.{da,sa,ethtype})  <br> - ethtype = ethtype</td>
</tr>
<tr>
<td>tci_vlana</td>
<td align="center">16</td>
<td>TCI field for VLAN A in IEEE 802.1Q frames</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td><strong>dot2q</strong>: (eth.{da,sa}) / (vlana.{tpid,tci}) / (vlanb.{tpid,tci}) / ethtype <br> - tci_vlana = vlana.tci <br> <strong>dot1q</strong>: (eth.{da,sa}) / (vlana.{tpid,tci}) / ethtype <br> - tci_vlana = vlana.tci <br> <strong>eth</strong>:   (eth.{da,sa,ethtype}) <br> - tci_vlana = '0</td>
</tr>
<tr>
<td>tci_vlanb</td>
<td align="center">16</td>
<td>TCI field for VLAN B in IEEE 802.1Q frames</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td><strong>dot2q</strong>: (eth.{da,sa}) / (vlana.{tpid,tci}) / (vlanb.{tpid,tci}) / ethtype <br> - tci_vlanb = vlanb.tci <br> <strong>dot1q</strong>: (eth.{da,sa}) / (vlana.{tpid,tci}) / ethtype <br> - tci_vlanb = '0 <br> <strong>eth</strong>:   (eth.{da,sa,ethtype}) <br> - tci_vlanb = '0</td>
</tr>
<tr>
<td>l4_src_port</td>
<td align="center">16</td>
<td>L4 header source port.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>- l4_src_port = udp.sport <br> - l4_src_port = tcp.sport</td>
</tr>
<tr>
<td>l4_dst_port</td>
<td align="center">16</td>
<td>L4 header destination port.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>- l4_dst_port = udp.dport <br> - l4_dst_port = tcp.dport</td>
</tr>
<tr>
<td>src_ip</td>
<td align="center">128</td>
<td>L3 source address field.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td><strong>IPv4</strong>: <br> - src_ip[31:0] = ipv4.src_ip, src_ip[127:32] = '0 <br> <strong>IPv6</strong>: <br> - src_ip[127:0] = ipv6.src_ip</td>
</tr>
<tr>
<td>dst_ip</td>
<td align="center">128</td>
<td>L3 destination address field.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td><strong>IPv4</strong>: <br> - dst_ip[31:0] = ipv4.dst_ip, dst_ip[127:32] = '0 <br> <strong>IPv6</strong>: <br> - dst_ip[127:0] = ipv6.dst_ip</td>
</tr>
<tr>
<td>src_mac</td>
<td align="center">48</td>
<td>Ethernet header source MAC address. <br></td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>- src_mac = eth.sa</td>
</tr>
<tr>
<td>dst_mac</td>
<td align="center">48</td>
<td>Ethernet header destination MAC address.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>- dst_mac = eth.da</td>
</tr>
</tbody>
</table>
<p><strong>Table 1.</strong> TCAM Key Fields</p>
<p>The Linux <a href="#ptpbridge"><code>ptpbridge</code></a> user application provides access to the TCAM key registers from the OS, removing the complexity of doing low level access to the Packet Switch IP.</p>
<p>The table below defines the structure of a TCAM query result. This data is used to route in-transit packets to the destination port specified by the matching TCAM rule.</p>
<table>
<thead>
<tr>
<th><em>Field</em></th>
<th align="center"><em>Width (bits)</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>rsvd</td>
<td align="center">27</td>
<td>Reserved.</td>
</tr>
<tr>
<td>drop</td>
<td align="center">1</td>
<td>Drop packet.</td>
</tr>
<tr>
<td>egr_port</td>
<td align="center">4</td>
<td>Selects which egress port to send traffic. <br> 4’d0: MSGDMA Channel 0 <br> 4’d1: MSGDMA Channel 1 <br> 4’d2: MSGDMA Channel 2 <br> 4’d3 – 4’d7: reserved <br> 4’d8: User <br> 4’d8 – 4’d15: reserved</td>
</tr>
</tbody>
</table>
<p><strong>Table 2.</strong> TCAM Query Result Fields</p>
<h4 id="main-time-of-the-day-subsystem-subordinate-time-of-the-day-subsystem">Main Time Of the Day Subsystem &amp; Subordinate Time Of the Day Subsystem<a class="headerlink" href="#main-time-of-the-day-subsystem-subordinate-time-of-the-day-subsystem" title="Permanent link">&para;</a></h4>
<p>The Main ToD Subsystem wraps the IEEE 1588 Time of Day Clock FPGA IP and its support logic, serving as the system’s local ToD reference. The IP is configured for Accuracy Advanced mode and uses the IOPLL Reconfig FPGA IP, as described in the <a href="https://www.intel.com/content/www/us/en/docs/programmable/683044/current/iopll-and-tod-setup-using-iopll-reconfig-ip.html"><em>IOPLL and TOD Setup using IOPLL Reconfig IP</em></a> chapter of the Ethernet Design Example Components User Guide.</p>
<p>The Subordinate ToD Subsystem instantiates a dedicated IEEE 1588 Time of Day Clock FPGA IP per Ethernet interface and integrates an <a href="https://www.intel.com/content/www/us/en/docs/programmable/683044/current/time-of-day-synchronizer.html">IEEE 1588 TOD Synchronizer FPGA IP</a> to present timestamps in the Ethernet clock domain, as described in the <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/ptp-timestamp-accuracy.html">PTP Timestamp Accuracy in Advanced Mode</a> chapter of the F-Tile Ethernet Hard IP User Guide.</p>
<h4 id="ethernet-packet-generators">Ethernet Packet Generators<a class="headerlink" href="#ethernet-packet-generators" title="Permanent link">&para;</a></h4>
<p>Two system blocks can generate Ethernet packets. The HPS produces PTP packets when the ptp4l service is enabled and can optionally generate synthetic traffic via ping or iperf3. Additionally, two hardware traffic generators can saturate Ethernet bandwidth with synthetic traffic when enabled by HPS software.</p>
<h4 id="sed-custom-ip">SED Custom IP<a class="headerlink" href="#sed-custom-ip" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th><em>Block</em></th>
<th><em>Entity Name</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>AVST to AXI Bridge</td>
<td>avst_axist_bridge</td>
<td>AVST to AXI bridge facilitating data transfer between the DMA channels and the Ethernet Subsystem. The bridge operates bidirectionally, providing AXI to AVST translation for data flowing from the Ethernet Subsystem to the DMA channels. It is a single block servicing both TX and RX DMA channels.</td>
</tr>
<tr>
<td>TX DMA Fifo</td>
<td>tx_dma_fifo</td>
<td>Top-level wrapper for custom blocks in the TX DMA Datapath.</td>
</tr>
<tr>
<td>TX ETS Adapter</td>
<td>hssi_ets_ts_adapter</td>
<td>Adapts the egress timestamp and fingerprint from the Ethernet Subsystem to a format manageable by the TX DMA channel.</td>
</tr>
<tr>
<td>TX DMA PKT FIFO</td>
<td>cdc_packet_fifo</td>
<td>Dual clock FIFO for clock domain crossing of packet information from the DMA channel to the Ethernet Subsystem.</td>
</tr>
<tr>
<td>TX FP Generator</td>
<td>tx_dma_fifo</td>
<td>Sequential fingerprint generator. A fingerprint will be generated for all packet going out of the system. This is combinational logic inside the 'tx_dma_fifo' module.</td>
</tr>
<tr>
<td>TX TS Valid</td>
<td>tx_dma_fifo</td>
<td>Logic that inserts egress timestamps into the MSGDMA prefetcher. This is combinational logic inside the 'tx_dma_fifo' module.</td>
</tr>
<tr>
<td>TX TS/FP FIFO</td>
<td>fp_resp_fifo/ts_fifo</td>
<td>Two independent FIFOs to store the returned egress timestamp and its corresponding fingerprint.</td>
</tr>
<tr>
<td>TX Completion</td>
<td>ts_chs_compl</td>
<td>Timestamp completion follow-up module. Captures FP and TS from the HSSI subsystem and forwards them to the TX DMA FIFO module if they are valid.</td>
</tr>
<tr>
<td>FP Compare</td>
<td>ts_chs_compl</td>
<td>Combinational logic that tracks fingerprints returned by the HSSI Subsystem to validate and return the associated egress timestamp.</td>
</tr>
<tr>
<td>TX TS FIFO</td>
<td>ts_fifo</td>
<td>FIFO to store the returned egress timestamp.</td>
</tr>
<tr>
<td>RX DMA Fifo</td>
<td>rx_dma_fifo</td>
<td>Top-level wrapper for custom blocks in the RX DMA Datapath.</td>
</tr>
<tr>
<td>RX TS Valid</td>
<td>rx_dma_fifo</td>
<td>Logic that inserts ingress timestamps into the MSGDMA prefetcher. This is combinational logic inside the 'rx_dma_fifo' module.</td>
</tr>
<tr>
<td>RX DMA PKT FIFO</td>
<td>cdc_packet_fifo</td>
<td>Dual clock FIFO for clock domain crossing of packet information from the Ethernet Subsystem to the DMA channel.</td>
</tr>
<tr>
<td>RX TS FIFO</td>
<td>ts_fifo</td>
<td>Single clock FIFO to store ingress timestamps from the Ethernet Subsystem.</td>
</tr>
<tr>
<td>Main ToD</td>
<td>eth_f_mtod_top</td>
<td>Wrapper for the Ethernet IEEE 1588 Time of Day Clock FPGA IP. Includes a state machine that flags when the Main ToD Subsystem output is valid for the ToD Subordinate Subsystem to consume.</td>
</tr>
<tr>
<td>Packet Generator</td>
<td>eth_f_packet_client_top</td>
<td>Generic Ethernet packet generator/checker. Packet generation parameters are configurable at runtime via software.</td>
</tr>
<tr>
<td>Packet Generator Adaptor</td>
<td>eth_f_packet_client_top_axi_adaptor</td>
<td>Provides translation services between AVST and AXI-ST for the system Packet Generators.</td>
</tr>
<tr>
<td>Packet Switch</td>
<td>ptp_bridge_subsys</td>
<td>Top level wrapper for TCAM, arbitration and routing logic to handle the system TX/RX data path</td>
</tr>
</tbody>
</table>
<h3 id="board-level-clocking-architecture">Board Level Clocking Architecture<a class="headerlink" href="#board-level-clocking-architecture" title="Permanent link">&para;</a></h3>
<p>At the board level, the system clocking architecture includes the following components:</p>
<ul>
<li>Microchip ZL30733 PTP &amp; SyncE Network Synchronizer (U123)</li>
<li>Oven Controlled Crystal Oscillator (OCXO) (X2)</li>
<li>Agilex&trade; 7 AGIB027R31B (U1)</li>
<li>Si5332 Low-Jitter Clock Generator (U19)</li>
</ul>
<p><a class="glightbox" href="../images/mcqos_25g_board_clock_arch.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/mcqos_25g_board_clock_arch.png" /></a></p>
<p><strong>Figure 6.</strong> Board High Level Clocking Architecture</p>
<p>On power-up, the Microchip ZL30733 PTP &amp; SyncE Network Synchronizer load its configuration profile from internal non-volatile memory (NVM). The default profile doesn't contain the correct configuration needed for the system example design components. At boot time, the HPS establishes access to the ZL30733 via I2C and proceeds to load the correct profile for the system.</p>
<p>To enable HPS access to the onboard Microchip ZL30733, a custom bitstream must be loaded into the MAX10 device on the development kit. The required bitstream file, <code>max10_system_0002aa4F.pof</code>, is available as part of <code>images.zip</code> in the <a href="#binaries">Binaries</a> section.</p>
<h3 id="fpga-design-clocking-architecture">FPGA Design Clocking Architecture<a class="headerlink" href="#fpga-design-clocking-architecture" title="Permanent link">&para;</a></h3>
<p>The clock frequencies for the Ethernet Subsystem IP ports <code>i_p8_clk_tx_tod</code>, <code>i_p8_clk_rx_tod</code>, <code>i_p9_clk_tx_tod</code>, <code>i_p9_clk_rx_tod</code>, <code>i_p8_clk_ptp_sample</code>, and  <code>i_p9_clk_ptp_sample</code> follow the guidelines in the <a href="https://www.intel.com/content/www/us/en/docs/programmable/773413/current/clocks.html">Ethernet Subsystem FPGA IP User Guide</a>.</p>
<p>Figure 7 shows the high-level system clock distribution tree. For clarity, only one Ethernet port (P8) and one DMA Subsystem port are shown. All DMA ports share the same clock connections. Ports connected to Ethernet port 9 use its output clocks.</p>
<p><a class="glightbox" href="../images/mcqos_25g_fpga_clock_arch.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/mcqos_25g_fpga_clock_arch.png" /></a></p>
<p><strong>Figure 7.</strong> FPGA High Level Clocking Architecture Reduced Diagram</p>
<h3 id="software-architecture">Software Architecture<a class="headerlink" href="#software-architecture" title="Permanent link">&para;</a></h3>
<p>The system example design uses a <a href="https://www.intel.com/content/www/us/en/docs/programmable/683389/current/boot-flow-overview.html">HPS-first</a> boot flow, where the HPS initializes before configuring the FPGA fabric. U-Boot is loaded from SPI flash or via a partial RBF. The <a href="https://www.intel.com/content/www/us/en/docs/programmable/683389/current/second-stage-bootloader.html">second-stage boot loader</a> loads the Linux kernel and full FPGA bitstream from the SD card. U-Boot enables the HPS bridges and programs the FPGA via the SDM. Once configured, the HPS boots Linux.</p>
<p>The design includes drivers and user-space tools for the Linux network stack, PTP stack, and QoS via Traffic Control (TC). Ethernet Subsystem IP drivers support standard tools like <code>ethtool</code>. Drivers for the IEEE 1588 TOD Clock IP, Microchip ZL30733 synchronizer, and DMA ports interface are also provided.</p>
<p>Egress QoS is managed by the Linux kernel’s Traffic Control (TC) system. The Ethernet driver uses device tree data to enumerate DMA channels for each physical port. For each channel, it registers a TX buffer ring and exposes it as a separate hardware queue. TC applies queue disciplines (<code>qdiscs</code>) to control packet enqueue/dequeue behavior per queue. The driver integrates with TC to enable per-queue priority and flow control.</p>
<p>For each DMA ingress channel, the Ethernet driver registers an RX buffer. Ingress QoS is controlled by the Packet Switch IP and the <code>ptpbridge</code> application, which defines filtering and routing rules. Packets matching a rule are directed to a specific DMA RX channel, queue, or User Port; unmatched packets are dropped by default.</p>
<p>The HPS polls RX queues based on interrupt priority, with higher-priority channels mapped to higher-priority interrupts.</p>
<h4 id="intel-agilex-7-soc-fpga-f-tile-drivers">Intel Agilex&trade; 7 SoC FPGA F-Tile Drivers<a class="headerlink" href="#intel-agilex-7-soc-fpga-f-tile-drivers" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th><em>Driver</em></th>
<th><em>Description</em></th>
<th><em>File</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>Ethernet Driver</td>
<td>The Ethernet driver exposes a standard <code>netdev</code> API to the kernel, enabling DMA channel discovery, hardware Time-of-Day (ToD) access, and <code>ethtool</code> enabling</td>
<td><code>drivers/net/ethernet/altera/intel_fpga_eth_main.c</code></td>
</tr>
<tr>
<td>ToD Driver</td>
<td>Provides access to the Ethernet Subsystem IP configuration and status registers of the Ethernet IEEE 1588 Time of Day Clock FPGA IP.</td>
<td><code>drivers/net/ethernet/altera/intel_fpga_tod.c</code></td>
</tr>
<tr>
<td>HSSI Subsystem Driver</td>
<td>Provides access to the Ethernet Subsystem IP configuration and status registers, as well as the <a href="https://www.intel.com/content/www/us/en/docs/programmable/773413/current/subsystem-abstraction-layer-sal.html">Subsystem Abstraction Layer (SAL)</a>.</td>
<td><code>drivers/net/ethernet/altera/intel_fpga_hssiss.c</code></td>
</tr>
<tr>
<td>QSFP Driver</td>
<td>The QSFP driver interfaces with the onboard QSFP module, handling configuration registers reads and controlling power and interrupt pins.</td>
<td><code>drivers/net/phy/qsfp.c</code></td>
</tr>
<tr>
<td>ZL30733 Driver</td>
<td>The ZL30733 driver enables frequency steering for Time-of-Day (ToD) adjustment via the onboard ZL30733 SyncE &amp; IEEE 1588 Network Synchronizer.</td>
<td><code>drivers/net/ethernet/altera/intel_freq_control_zl30793.c</code></td>
</tr>
</tbody>
</table>
<h4 id="user-space-applications">User Space Applications<a class="headerlink" href="#user-space-applications" title="Permanent link">&para;</a></h4>
<h5 id="ptp4l">ptp4l<a class="headerlink" href="#ptp4l" title="Permanent link">&para;</a></h5>
<p><code>ptp4l</code> is the IEEE 1588 PTP software implementation from the <a href="https://linuxptp.sourceforge.net">The Linux PTP Project</a>, included in the HPS image. It offers extensive configuration options for system setup. Refer to the <a href="https://manpages.ubuntu.com/manpages/xenial/man8/ptp4l.8.html"><code>ptp4l</code> man page</a> for details</p>
<h5 id="phc2sys">phc2sys<a class="headerlink" href="#phc2sys" title="Permanent link">&para;</a></h5>
<p><code>phc2sys</code> is an open-source utility that synchronizes system clocks, typically aligning the system clock with a PTP Hardware Clock (PHC) managed by <code>ptp4l</code>. For configuration details, refer to the <a href="https://manpages.ubuntu.com/manpages/xenial/man8/phc2sys.8.html"><code>phc2sys</code> man page</a>.</p>
<h5 id="ethtool">ethtool<a class="headerlink" href="#ethtool" title="Permanent link">&para;</a></h5>
<p><code>ethtool</code> is an open-source utility for querying and configuring network driver and hardware settings. For usage details, refer to the <a href="https://manpages.ubuntu.com/manpages/jammy/man8/ethtool.8.html"><code>ethtool</code> man page</a>.</p>
<h5 id="packetgenerator">packetgenerator<a class="headerlink" href="#packetgenerator" title="Permanent link">&para;</a></h5>
<p>This application configures the Packet Generator IP core in the FPGA to generate synthetic Ethernet traffic for validating data path integrity and line rates. It can also modulate bandwidth to test system QoS policies.</p>
<p>Packet generation is customizable via parameters such as:</p>
<ul>
<li>Source and destination MAC addresses</li>
<li>Frame sizes</li>
<li>Idle packet gaps</li>
</ul>
<p><strong>Syntax</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>packetgenerator<span class="w"> </span><span class="o">[</span>--device<span class="o">]</span><span class="w"> </span><span class="o">[</span>/dev/uioX<span class="o">]</span><span class="w"> </span><span class="o">[</span>options<span class="o">]</span>
</code></pre></div>
<p><strong>Parameters</strong></p>
<ul>
<li><code>--help</code>: Print this help contents</li>
<li><code>--device</code>: <code>UIO</code> device name</li>
<li><code>--dump</code>: Dump all register contents</li>
<li><code>--register-offset offset</code>: 32-bit aligned register offset to do direct register read/write</li>
<li><code>--register-value value</code>: 32-bit value to be written to the register</li>
<li><code>--dest-mac</code>: Destination MAC address in the packet</li>
<li><code>--src-mac</code>: Source MAC address in the packet</li>
<li><code>--traffic bool</code>: Enable or disable traffic</li>
<li><code>--one-shot bool</code>: Enable or disable one-shot mode</li>
<li><code>--soft-reset</code>: Trigger a soft reset</li>
<li><code>--dyn-pkt-mode bool</code>: Enable or disable dynamic packet mode</li>
<li><code>--packet-checker bool</code>: Enable or disable packet checker</li>
<li><code>--cntr-snapshot bool</code>: Take a counter snapshot</li>
<li><code>--cntr-clear bool</code>: Clear all counter CSRs</li>
<li><code>--cntr-internal-clear bool</code>: Clear all internal counters</li>
<li><code>--fixed-gap bool</code>: Enable or disable fixed gap between packets</li>
<li><code>--pkt-len-mode value</code>: Set packet generation length mode (Fixed/Incremental) [1,2]</li>
<li><code>--num-idle-cycles value</code>: Number of idle cycles to insert [0...255]</li>
<li><code>--tx-pkt-size value</code>: TX packet size [64...9216]</li>
<li><code>--tx-max-pkt-size value</code>: Maximum TX packet size [64...9216]</li>
<li><code>--num-packets value</code>: Number of packets to generate [0...0xFFFFFFFF]</li>
</ul>
<p>System example design packet generators are mapped to <code>/dev/uio0</code> and <code>/dev/uio1</code>.</p>
<p><strong>Basic Usage</strong></p>
<p><em>Synthetic Traffic Configuration</em> – The command below sets up the packet generator with parameters including dynamic packet mode, fixed gap, packet length mode, idle cycles, packet checker, one-shot mode, and packet sizes before initiating traffic generation.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--traffic<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--dyn-pkt-mode<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--fixed-gap<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--pkt-len-mode<span class="w"> </span>0x01<span class="w"> </span>--num-idle-cycles<span class="w"> </span><span class="m">22</span><span class="w"> </span>--packet-checker<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--one-shot<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--tx-pkt-size<span class="w"> </span><span class="m">1024</span><span class="w"> </span>--tx-max-pkt-size<span class="w"> </span><span class="m">1024</span>
</code></pre></div>
<p><em>Start Packet Generator</em> – The command below initiates traffic generation based on the current configuration parameters.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--traffic<span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p><em>Configuration and Status Report</em> – The command below captures a snapshot of all internal configuration and status registers in the packet generator hardware.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--dump
</code></pre></div>
<h5 id="ptpbridge">ptpbridge<a class="headerlink" href="#ptpbridge" title="Permanent link">&para;</a></h5>
<p>The <code>ptpbridge</code> application configures the hardware Packet Switch IP, which routes incoming packets to one of three DMA channels per Ethernet interface based on user-defined QoS rules. Packets that do not match any rule are dropped by default.</p>
<p>Rule priority is determined by index number, higher index means higher priority. If multiple rules match, the rule with the highest index is applied. To ensure correct behavior, generic rules should be programmed first, followed by more specific rules at higher indices.</p>
<p>A maximum of 32 keys can be programmed (0-31).</p>
<p><strong>Syntax</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>ptpbridge<span class="w"> </span><span class="o">[</span>--device<span class="o">]</span><span class="w"> </span><span class="o">[</span>/dev/uioX<span class="o">]</span><span class="w"> </span><span class="o">[</span>Options<span class="o">]</span>
</code></pre></div>
<p><strong>Parameters</strong></p>
<ul>
<li><code>--help</code>: Print this help contents</li>
<li><code>--device</code>: *UIO device name</li>
<li><code>--dump</code>: Dump all register contents</li>
<li><code>--set-key</code>: Set Key. Requires Key fields to be provided</li>
<li><code>--remove-key</code>: Remove Key using key-index</li>
<li><code>--flush-all-keys</code>: Flush all Key entries from the system</li>
<li><code>--flush-all-counters</code>: Flush all debug counters value to 0</li>
<li><code>--show-key</code>: Search for Keys fulfilling a search criteria for a port</li>
<li><code>--register-rw</code>: Do a direct register read write</li>
<li><code>--key-index</code>: Key index to work on</li>
<li><code>--dest-mac</code>: Key - Destination MAC. <code>ptpbridge</code> can resolve MAC addresses from Ethernet interface names, e.g. eth1.</li>
<li><code>--src-mac</code>: Key - Source MAC. <code>ptpbridge</code> can resolve MAC addresses from Ethernet interface names, e.g. eth1.</li>
<li><code>--dest-ip</code>: Key - Destination IP Address</li>
<li><code>--src-ip</code>: Key - Source IP address</li>
<li><code>--dest-port</code>: Key - Destination L4 port</li>
<li><code>--src-port</code>: Key - Source L4 port</li>
<li><code>--vlanb</code>: Key - VALNB</li>
<li><code>--vlana</code>: Key - VLANA</li>
<li><code>--ethtype</code>: Key - Ethernet type</li>
<li><code>--protocol</code>: Key - IP Protocol type</li>
<li><code>--message</code>: Key - IP Message type</li>
<li><code>--flag</code>: Key - Flag field</li>
<li><code>--result</code>: Defines the DMA or user port to which the Ethernet packet will be routed if the rule evaluation is true. The mapping for this parameter is as follows:<ul>
<li>0x0: route packet to DMA-0</li>
<li>0x1: route packet to DMA-1</li>
<li>0x2: route packet to DMA-2</li>
<li>0x8: route packet to User Port (Packet Generator)</li>
</ul>
</li>
<li><code>port</code>: Ethernet interface to which the rule will apply.<ul>
<li>0: Apply rule to <code>eth1</code> Ethernet interface</li>
<li>1: Apply rule to <code>eth2</code> Ethernet interface</li>
</ul>
</li>
<li><code>register-offset</code>: Register offset to read/write to. Refer to the <a href="#ptp-bridge-register-map">PTP Bridge Register Map</a> for direct registers base address and offsets.</li>
<li><code>register-value</code>: Register value to write. Can be comma separated to write multiple values.</li>
<li><code>length</code>: Number of registers to read</li>
<li><code>mask</code>: Set Mask properties for fields manually</li>
</ul>
<p>System example design Packet Switch is mapped to <code>/dev/uio2</code>.</p>
<p><strong>Basic Usage</strong></p>
<p><em>Route all incoming traffic to DMA 0</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">0</span><span class="w"> </span>--result<span class="w"> </span>0x0
</code></pre></div>
<ul>
<li><code>--port 0</code>: This rule applies to Ethernet interface <code>eth1</code>.</li>
<li><code>--key-index 0</code>: This rule is stored in key index 0, setting the lowest priority for the rule.</li>
<li><code>--result 0x0</code>: Packets fulfilling the rule will be routed to DMA-0.</li>
</ul>
<p>The above command defines the following rule:</p>
<p><em>Route traffic based on destination MAC address</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">0</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;eth1&quot;</span><span class="w"> </span>--result<span class="w"> </span>0x2
</code></pre></div>
<p>The above command defines the following rule:</p>
<ul>
<li><code>--port 0</code>: This rule applies to Ethernet interface <code>eth1</code>.</li>
<li><code>--key-index 0</code>: This rule is stored in key index 0, setting the lowest priority for the rule.</li>
<li><code>--dest-mac "eth1"</code>: This is the filter established by the rule. The rule will return a hit if the evaluated Ethernet frame has the <code>eth1</code> interface MAC address in the MAC address destination field.</li>
<li><code>--result 0x2</code>: Packets fulfilling the rule will be routed to DMA-2.</li>
</ul>
<p><em>Route traffic based on VLAN and DF flag</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">2</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--protocol<span class="w"> </span>0x01<span class="w"> </span>--vlana<span class="w"> </span><span class="m">100</span><span class="w"> </span>--vlanb<span class="w"> </span><span class="m">200</span><span class="w"> </span>--flag<span class="w"> </span>0x2<span class="w"> </span>--result<span class="w"> </span>0x2
</code></pre></div>
<p>The above command defines the following rule:</p>
<ul>
<li><code>--port 0</code>: This rule applies to Ethernet interface eth1.</li>
<li><code>--key-index 2</code>: This rule is stored in key index 2.</li>
<li><code>--ethtype 0x0800</code>: Ethernet Type is set to IPv4.</li>
<li><code>--protocol 0x01</code>: The IP protocol is set to ICMP.</li>
<li><code>--vlana 100</code>: The primary VLAN ID is 100.</li>
<li><code>--vlanb 200</code>: The secondary VLAN ID is 200.</li>
<li><code>--flag 0x2</code>: The fragment flag is set to 0x2.</li>
<li><code>--result 0x2</code>: Packets fulfilling the rule will be routed to DMA-2.</li>
</ul>
<h3 id="address-map-details">Address Map Details<a class="headerlink" href="#address-map-details" title="Permanent link">&para;</a></h3>
<h4 id="address-map">Address Map<a class="headerlink" href="#address-map" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th><em>Subordinate Name</em></th>
<th><em>Component</em></th>
<th align="center"><em>Agilex&trade; HPS H2F AXI Manager</em></th>
<th><em>Register Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>axi4lite_hssi.s0</td>
<td>Ethernet Subsystem CSR</td>
<td align="center">0x0000_0000 - 0x03ff_ffff</td>
<td><a href="https://www.intel.com/content/www/us/en/docs/programmable/773413/current/register-descriptions.html">Link</a></td>
</tr>
<tr>
<td>axi4lite_pktcli_0.s0</td>
<td>Generic Packet Client</td>
<td align="center">0x0406_0000 - 0x0406_ffff</td>
<td><a href="#packet-client-register-description">Link</a></td>
</tr>
<tr>
<td>axi4lite_pktcli_1.s0</td>
<td>Generic Packet Client</td>
<td align="center">0x0407_0000 - 0x0407_ffff</td>
<td><a href="#packet-client-register-description">Link</a></td>
</tr>
<tr>
<td>axi4lite_ptpb.s0</td>
<td>Packet Switch</td>
<td align="center">0x0405_0000 - 0x0405_ffff</td>
<td><a href="#ptp-bridge-register-map">Link</a></td>
</tr>
<tr>
<td>ftile_debug_status_pio_0.s1</td>
<td>F-Tile Status Register</td>
<td align="center">0x0404_0060 - 0x0404_006f</td>
<td></td>
</tr>
<tr>
<td>qsfpdd_status_pio.s1</td>
<td>QSFP-DD Status PIO</td>
<td align="center">0x0404_0050 - 0x0404_005f</td>
<td></td>
</tr>
<tr>
<td>sys_ctrl_pio_0.s1</td>
<td>QSDP-DD Control PIO</td>
<td align="center">0x0404_0040 - 0x0404_004f</td>
<td></td>
</tr>
<tr>
<td>dma_subsys.dma_subsys_port0_csr</td>
<td>DMA Subsystem Port 0</td>
<td align="center">0x0448_0000 - 0x0448_00ff</td>
<td><a href="#dma-subsystem-port-memory-map">Link</a></td>
</tr>
<tr>
<td>dma_subsys.dma_subsys_port1_csr</td>
<td>DMA Subsystem Port 1</td>
<td align="center">0x044c_0000 - 0x044c_00ff</td>
<td><a href="#dma-subsystem-port-memory-map">Link</a></td>
</tr>
<tr>
<td>dma_subsys.dma_subsys_port2_csr</td>
<td>DMA Subsystem Port 2</td>
<td align="center">0x0450_0000 - 0x0450_00ff</td>
<td><a href="#dma-subsystem-port-memory-map">Link</a></td>
</tr>
<tr>
<td>dma_subsys.dma_subsys_port3_csr</td>
<td>DMA Subsystem Port 3</td>
<td align="center">0x0454_0000 - 0x0454_00ff</td>
<td><a href="#dma-subsystem-port-memory-map">Link</a></td>
</tr>
<tr>
<td>dma_subsys.dma_subsys_port4_csr</td>
<td>DMA Subsystem Port 4</td>
<td align="center">0x0458_0000 - 0x0458_00ff</td>
<td><a href="#dma-subsystem-port-memory-map">Link</a></td>
</tr>
<tr>
<td>dma_subsys.dma_subsys_port5_csr</td>
<td>DMA Subsystem Port 5</td>
<td align="center">0x045c_0000 - 0x045c_00ff</td>
<td><a href="#dma-subsystem-port-memory-map">Link</a></td>
</tr>
<tr>
<td>mtod_subsys.master_tod_top_0_csr</td>
<td>Main ToD Subsystem</td>
<td align="center">0x0404_0000 - 0x0404_003f</td>
<td><a href="#dma-subsystem-port-memory-map">Link</a></td>
</tr>
<tr>
<td>mtod_subsys.mtod_subsys_pps_load_tod_0_csr</td>
<td>Main ToD PPS Loader</td>
<td align="center">0x0404_0100 - 0x0404_01ff</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Table 3.</strong> Qsys_top Platform Designer system address map.</p>
<h5 id="packet-generator-register-description">Packet Generator Register Description<a class="headerlink" href="#packet-generator-register-description" title="Permanent link">&para;</a></h5>
<p>Refer to section <a href="https://www.intel.com/content/www/us/en/docs/programmable/767516/current/packet-client-register-map.html">Packet Client Register Map</a> from the MACsec FPGA System Design User Guide for the register description.</p>
<h5 id="qsfpdd-spi-control-pio-register-description">QSFPDD SPI Control PIO Register description<a class="headerlink" href="#qsfpdd-spi-control-pio-register-description" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><em>Address</em></th>
<th><em>Name</em></th>
<th align="center"><em>Bit Offset</em></th>
<th align="center"><em>Reset Value</em></th>
<th align="center"><em>Attribute</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x0</td>
<td>qsfpdd_ctrl_pio</td>
<td align="center">[0]</td>
<td align="center">1'b1</td>
<td align="center">RW</td>
<td>QSFPDD resetn</td>
</tr>
<tr>
<td>^</td>
<td>qsfpdd_ctrl_pio</td>
<td align="center">[1]</td>
<td align="center">1'b1</td>
<td align="center">RW</td>
<td>QSFPDD initmode/lpmode</td>
</tr>
<tr>
<td>^</td>
<td>qsfpdd_ctrl_pio</td>
<td align="center">[2]</td>
<td align="center">1'b0</td>
<td align="center">RW</td>
<td>QSFPDD modseln</td>
</tr>
<tr>
<td>0x1 - 0xF</td>
<td>Reserved</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Table 4.</strong> QSFPDD SPI control PIO register description.</p>
<h5 id="qsfpdd-status-pio-register-description">QSFPDD Status PIO Register description<a class="headerlink" href="#qsfpdd-status-pio-register-description" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><em>Address</em></th>
<th><em>Name</em></th>
<th align="center"><em>Bit Offset</em></th>
<th align="center"><em>Attribute</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x0</td>
<td>qsfpdd_status_pio</td>
<td align="center">[0]</td>
<td align="center">RO</td>
<td>QSFPDD modprsn</td>
</tr>
<tr>
<td>^</td>
<td>qsfpdd_status_pio</td>
<td align="center">[1]</td>
<td align="center">RO</td>
<td>QSFPDD intn</td>
</tr>
<tr>
<td>0x1 - 0xF</td>
<td>Reserved</td>
<td align="center"></td>
<td align="center"></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Table 5.</strong> QSFPDD status PIO register description.</p>
<h5 id="f-tile-status-register-description">F-Tile Status Register Description<a class="headerlink" href="#f-tile-status-register-description" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th align="center"><em>Bit</em></th>
<th align="center"><em>Ethernet Subsystem Port</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="center">Port 8</td>
<td>Ethernet Subsystem 'o_p8_tx_lanes_stable' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/reset-signals.html">Link</a></td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p8_tx_pll_locked' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683872/current/status-signals-descriptions.html">Link</a></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p8_rx_pcs_ready' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/reset-signals.html">Link</a></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p8_tx_ptp_ready' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/ptp-status-interface.html">Link</a></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p8_rx_ptp_ready' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/ptp-status-interface.html">Link</a></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p8_rx_ptp_offset_data_valid' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/ptp-status-interface.html">Link</a></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p8_tx_ptp_offset_data_valid' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/ptp-status-interface.html">Link</a></td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">Port 9</td>
<td>Ethernet Subsystem 'o_p9_tx_lanes_stable' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/reset-signals.html">Link</a></td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p9_tx_pll_locked' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683872/current/status-signals-descriptions.html">Link</a></td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p9_rx_pcs_ready' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/reset-signals.html">Link</a></td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p9_tx_ptp_ready' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/ptp-status-interface.html">Link</a></td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p9_rx_ptp_ready' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/ptp-status-interface.html">Link</a></td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p9_rx_ptp_offset_data_valid' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/ptp-status-interface.html">Link</a></td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">^</td>
<td>Ethernet Subsystem 'o_p9_tx_ptp_offset_data_valid' signal. For more information consult the following <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/ptp-status-interface.html">Link</a></td>
</tr>
</tbody>
</table>
<p><strong>Table 6.</strong> F-Tile status register description.</p>
<h5 id="dma-subsystem-port-memory-map">DMA SubSystem Port Memory Map<a class="headerlink" href="#dma-subsystem-port-memory-map" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><em>Subordinate Name</em></th>
<th><em>Component</em></th>
<th align="center"><em>subsys_ftile_25gbe_1588_csr</em></th>
<th><em>Register Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>ftile_25gbe_rx_dma_ch1</td>
<td>RX DMA channel</td>
<td align="center">0x0080 - 0x00bf</td>
<td><a href="#dma-subsystem-channel-memory-map">Link</a></td>
</tr>
<tr>
<td>ftile_25gbe_tx_dma_ch1</td>
<td>TX DMA channel</td>
<td align="center">0x0000 - 0x003f</td>
<td><a href="#dma-subsystem-channel-memory-map">Link</a></td>
</tr>
</tbody>
</table>
<p><strong>Table 7.</strong> DMA Subsystem port memory map.</p>
<h5 id="dma-subsystem-channel-memory-map">DMA SubSystem Channel Memory Map<a class="headerlink" href="#dma-subsystem-channel-memory-map" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><em>Subordinate Name</em></th>
<th><em>Component</em></th>
<th align="center"><em>[rx/tx]_dma_csr</em></th>
<th><em>Register Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>[tx/rx]_dma_dispatcher</td>
<td>DMA dispatcher</td>
<td align="center">0x0020 - 0x003f</td>
<td><a href="https://www.intel.com/content/www/us/en/docs/programmable/683130/current/register-map-of-msgdma.html">Link</a></td>
</tr>
<tr>
<td>[tx/rx]_dma_prefetcher</td>
<td>DMA prefetcher</td>
<td align="center">0x0000 - 0x001f</td>
<td><a href="https://www.intel.com/content/www/us/en/docs/programmable/683130/current/registers-14229.html">Link</a></td>
</tr>
</tbody>
</table>
<p><strong>Table 8.</strong> DMA Subsystem channel memory map.</p>
<h5 id="packet-switch-register-map">Packet Switch Register Map<a class="headerlink" href="#packet-switch-register-map" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><em>Module</em></th>
<th align="center"><em>Start Address</em></th>
<th align="center"><em>End Address</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>Ingress Arbiter 0</td>
<td align="center">0x0</td>
<td align="center">0x8</td>
</tr>
<tr>
<td>Ingress Arbiter 1</td>
<td align="center">0xC</td>
<td align="center">0x14</td>
</tr>
<tr>
<td>Egress RX Demux 0</td>
<td align="center">0x60</td>
<td align="center">0x70</td>
</tr>
<tr>
<td>Egress RX Demux 1</td>
<td align="center">0x88</td>
<td align="center">0x98</td>
</tr>
<tr>
<td>Ingress RX Width Adapter 0</td>
<td align="center">0x1A0</td>
<td align="center">0x1A8</td>
</tr>
<tr>
<td>Ingress RX Width Adapter 1</td>
<td align="center">0x1AC</td>
<td align="center">0x1B4</td>
</tr>
<tr>
<td>TCAM_0 (16KB)</td>
<td align="center">0x200</td>
<td align="center">0x41FC</td>
</tr>
<tr>
<td>TCAM_1 (16KB)</td>
<td align="center">0x4200</td>
<td align="center">0x81FC</td>
</tr>
<tr>
<td>Egress RX Width Adapter 0 (User port)</td>
<td align="center">0x8200</td>
<td align="center">0x8208</td>
</tr>
<tr>
<td>Egress RX Width Adapter 1 (User port)</td>
<td align="center">0x820C</td>
<td align="center">0x8214</td>
</tr>
</tbody>
</table>
<p><strong>Table 9.</strong> Packet Switch Register Description</p>
<h6 id="packet-switch-ingress-arbiter-register-description">Packet Switch Ingress Arbiter Register Description<a class="headerlink" href="#packet-switch-ingress-arbiter-register-description" title="Permanent link">&para;</a></h6>
<table>
<thead>
<tr>
<th><em>Register Name</em></th>
<th align="center"><em>Offset</em></th>
<th><em>Field</em></th>
<th align="center"><em>Width (bits)</em></th>
<th align="center"><em>Type</em></th>
<th align="center"><em>HW Reset Value</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>scratch_reg</td>
<td align="center">0x00</td>
<td>scratch</td>
<td align="center">32</td>
<td align="center">RW</td>
<td align="center">32'h0</td>
<td>Scratch Register.</td>
</tr>
<tr>
<td>cfg_priority_dma</td>
<td align="center">0x04</td>
<td>reserved</td>
<td align="center">[31:12]</td>
<td align="center">RO</td>
<td align="center">16'h0</td>
<td>Reserved.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>ch_2</td>
<td align="center">[11:8]</td>
<td align="center">RW</td>
<td align="center">4'h3</td>
<td>Configured priority level for DMA channel 2. 0: highest priority, 3: lowest priority, other values are reserved. This register along with cfg_priority_user register (0x8) configures the ingress arbiter priority levels. Values across both registers must have unique priority values.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>ch_1</td>
<td align="center">[7:4]</td>
<td align="center">RW</td>
<td align="center">4'h2</td>
<td>Configured priority level for DMA channel 1. 0: highest priority, 3: lowest priority, other values are reserved. This register along with cfg_priority_user register (0x8) configures the ingress arbiter priority levels. Values across both registers must have unique priority values.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>ch_0</td>
<td align="center">[3:0]</td>
<td align="center">RW</td>
<td align="center">4'h0</td>
<td>Configured priority level for DMA channel 0. 0: highest priority, 3: lowest priority, other values are reserved. This register along with cfg_priority_user register (0x8) configures the ingress arbiter priority levels. Values across both registers must have unique priority values.</td>
</tr>
<tr>
<td>cfg_priority_user</td>
<td align="center">0x08</td>
<td>reserved</td>
<td align="center">[31:4]</td>
<td align="center">RO</td>
<td align="center">28'h0</td>
<td>Reserved.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>port_0</td>
<td align="center">[3:0]</td>
<td align="center">RW</td>
<td align="center">4'h1</td>
<td>Configured priority level for User_0 port. 0: highest priority, 3: lowest priority, ‘d4-‘d15: reserved. This register along with cfg_priority_dma register (0x4) configures the ingress arbiter priority levels. Values across both registers must have unique priority values.</td>
</tr>
</tbody>
</table>
<p><strong>Table 10.</strong> Packet Switch Ingress Arbiter Register Description.</p>
<h6 id="packet-switch-egress-rx-demux-register-description">Packet Switch Egress RX Demux Register Description<a class="headerlink" href="#packet-switch-egress-rx-demux-register-description" title="Permanent link">&para;</a></h6>
<table>
<thead>
<tr>
<th><em>Register Name</em></th>
<th align="center"><em>Offset</em></th>
<th><em>Field</em></th>
<th align="center"><em>Width (bits)</em></th>
<th align="center"><em>Type</em></th>
<th align="center"><em>HW Reset Value</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>scratch_reg</td>
<td align="center">0x00</td>
<td>scratch</td>
<td align="center">[31:0]</td>
<td align="center">RW</td>
<td align="center">32'h0</td>
<td>Scratch Register.</td>
</tr>
<tr>
<td>control_reg</td>
<td align="center">0x04</td>
<td>reserved</td>
<td align="center">[31:3]</td>
<td align="center">RO</td>
<td align="center">29'h0</td>
<td>Reserved.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>dma_2_drop_en</td>
<td align="center">[2]</td>
<td align="center">RW</td>
<td align="center">1'h0</td>
<td>Enable drop threshold to be used for DMA CH_2.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>dma_1_drop_en</td>
<td align="center">[1]</td>
<td align="center">RW</td>
<td align="center">1'h0</td>
<td>Enable drop threshold to be used for DMA CH_1.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>dma_0_drop_en</td>
<td align="center">[0]</td>
<td align="center">RW</td>
<td align="center">1'h0</td>
<td>Enable drop threshold to be used for DMA CH_0.</td>
</tr>
<tr>
<td>dma_0_drop_threshold_reg</td>
<td align="center">0x08</td>
<td>reserved</td>
<td align="center">[31:16]</td>
<td align="center">RO</td>
<td align="center">16'h0</td>
<td>Reserved.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>drop_threshold</td>
<td align="center">[15:0]</td>
<td align="center">RW</td>
<td align="center">16'd496</td>
<td>Drop threshold for DMA CH_0.</td>
</tr>
<tr>
<td>dma_1_drop_threshold_reg</td>
<td align="center">0x0C</td>
<td>reserved</td>
<td align="center">[31:16]</td>
<td align="center">RO</td>
<td align="center">16'h0</td>
<td>Reserved.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>drop_threshold</td>
<td align="center">[15:0]</td>
<td align="center">RW</td>
<td align="center">16'd496</td>
<td>Drop threshold for DMA CH_1.</td>
</tr>
<tr>
<td>dma_2_drop_threshold_reg</td>
<td align="center">0x10</td>
<td>reserved</td>
<td align="center">[31:16]</td>
<td align="center">RO</td>
<td align="center">16'h0</td>
<td>Reserved.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>drop_threshold</td>
<td align="center">[15:0]</td>
<td align="center">RW</td>
<td align="center">16'd496</td>
<td>Drop threshold for DMA CH_2.</td>
</tr>
</tbody>
</table>
<p><strong>Table 11.</strong> Packet Switch Egress RX Demux Register Description.</p>
<h6 id="packet-switch-ingress-rx-width-adjuster-register-description">Packet Switch Ingress RX Width Adjuster Register Description<a class="headerlink" href="#packet-switch-ingress-rx-width-adjuster-register-description" title="Permanent link">&para;</a></h6>
<table>
<thead>
<tr>
<th><em>Register Name</em></th>
<th align="center"><em>Offset</em></th>
<th><em>Field</em></th>
<th align="center"><em>Width (bits)</em></th>
<th align="center"><em>Type</em></th>
<th align="center"><em>HW Reset Value</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>scratch_reg</td>
<td align="center">0x00</td>
<td>scratch</td>
<td align="center">[31:0]</td>
<td align="center">RW</td>
<td align="center">32'h0</td>
<td>Scratch Register.</td>
</tr>
<tr>
<td>control_reg</td>
<td align="center">0x04</td>
<td>Reserved</td>
<td align="center">[31:1]</td>
<td align="center">RO</td>
<td align="center">31'h0</td>
<td></td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>cfg_rx_pause_en</td>
<td align="center">[0]</td>
<td align="center">RW</td>
<td align="center">1'h0</td>
<td>Enable RX pause.</td>
</tr>
<tr>
<td>cfg_threshold_reg</td>
<td align="center">0x08</td>
<td>drop_threshold</td>
<td align="center">[31:16]</td>
<td align="center">RW</td>
<td align="center">16'd1948</td>
<td>Configured threshold when packets are dropped.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>rx_pause_threshold</td>
<td align="center">[15:0]</td>
<td align="center">RW</td>
<td align="center">16'd1024</td>
<td>Configured threshold when RX pause is asserted.</td>
</tr>
</tbody>
</table>
<p><strong>Table 12.</strong> Packet Switch Ingress RX Width Adjuster Register Description.</p>
<h6 id="packet-switch-egress-rx-width-adjuster-register-description">Packet Switch Egress RX Width Adjuster Register Description<a class="headerlink" href="#packet-switch-egress-rx-width-adjuster-register-description" title="Permanent link">&para;</a></h6>
<table>
<thead>
<tr>
<th><em>Register Name</em></th>
<th align="center"><em>Offset</em></th>
<th><em>Field</em></th>
<th align="center"><em>Width (bits)</em></th>
<th align="center"><em>Type</em></th>
<th align="center"><em>HW Reset Value</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>scratch_reg</td>
<td align="center">0x00</td>
<td>scratch</td>
<td align="center">[31:0]</td>
<td align="center">RW</td>
<td align="center">32'h0</td>
<td>Scratch Register.</td>
</tr>
<tr>
<td>control_reg</td>
<td align="center">0x04</td>
<td>reserved</td>
<td align="center">[31:1]</td>
<td align="center">RO</td>
<td align="center">31'h0</td>
<td>Reserved.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>drop_en</td>
<td align="center">[0:0]</td>
<td align="center">RW</td>
<td align="center">1'h0</td>
<td>Enable drop threshold to be used for egress width adapter.</td>
</tr>
<tr>
<td>cfg_drop_threshold_reg</td>
<td align="center">0x08</td>
<td>reserved</td>
<td align="center">[31:16]</td>
<td align="center">RO</td>
<td align="center">16'h0</td>
<td>Reserved.</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td>drop_threshold</td>
<td align="center">[15:0]</td>
<td align="center">RW</td>
<td align="center">16'd496</td>
<td>Drop threshold for egress width adapter.</td>
</tr>
</tbody>
</table>
<p><strong>Table 13.</strong> Packet Switch Egress RX Width Adjuster Register Description.</p>
<h6 id="tcam-key-register-map">TCAM Key Register Map<a class="headerlink" href="#tcam-key-register-map" title="Permanent link">&para;</a></h6>
<table>
<thead>
<tr>
<th><em>Register Field</em></th>
<th align="center"><em>Register Offset</em></th>
<th><em>Register Bit</em></th>
<th><em>Key Field</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>Key_15</td>
<td align="center">0x103C</td>
<td>[31:12]</td>
<td>reserved</td>
</tr>
<tr>
<td>Key_15</td>
<td align="center">0x103C</td>
<td>[11:0]</td>
<td>rsvd[31:20]</td>
</tr>
<tr>
<td>Key_14</td>
<td align="center">0x1038</td>
<td>[31:12]</td>
<td>rsvd[19:0]</td>
</tr>
<tr>
<td>Key_14</td>
<td align="center">0x1038</td>
<td>[11:0]</td>
<td>flagField[15:4]</td>
</tr>
<tr>
<td>Key_13</td>
<td align="center">0x1034</td>
<td>[31:28]</td>
<td>flagField[3:0]</td>
</tr>
<tr>
<td>Key_13</td>
<td align="center">0x1034</td>
<td>[27:24]</td>
<td>messageType[3:0]</td>
</tr>
<tr>
<td>Key_13</td>
<td align="center">0x1034</td>
<td>[23:16]</td>
<td>ip_protocol[7:0]</td>
</tr>
<tr>
<td>Key_13</td>
<td align="center">0x1034</td>
<td>[15:0]</td>
<td>ethtype[15:0]</td>
</tr>
<tr>
<td>Key_12</td>
<td align="center">0x1030</td>
<td>[31:16]</td>
<td>tci_vlana[15:0]</td>
</tr>
<tr>
<td>Key_12</td>
<td align="center">0x1030</td>
<td>[15:0]</td>
<td>tci_vlanb[15:0]</td>
</tr>
<tr>
<td>Key_11</td>
<td align="center">0x102C</td>
<td>[31:16]</td>
<td>l4_src_port[15:0]</td>
</tr>
<tr>
<td>Key_11</td>
<td align="center">0x102C</td>
<td>[15:0]</td>
<td>l4_dst_port[15:0]</td>
</tr>
<tr>
<td>Key_10</td>
<td align="center">0x1028</td>
<td>[31:0]</td>
<td>src_ip[127:96]</td>
</tr>
<tr>
<td>Key_9</td>
<td align="center">0x1024</td>
<td>[31:0]</td>
<td>src_ip[95:64]</td>
</tr>
<tr>
<td>Key_8</td>
<td align="center">0x1020</td>
<td>[31:0]</td>
<td>src_ip[63:32]</td>
</tr>
<tr>
<td>Key_7</td>
<td align="center">0x101C</td>
<td>[31:0]</td>
<td>src_ip[31:0]</td>
</tr>
<tr>
<td>Key_6</td>
<td align="center">0x1018</td>
<td>[31:0]</td>
<td>dst_ip[127:96]</td>
</tr>
<tr>
<td>Key_5</td>
<td align="center">0x1014</td>
<td>[31:0]</td>
<td>dst_ip[95:64]</td>
</tr>
<tr>
<td>Key_4</td>
<td align="center">0x1010</td>
<td>[31:0]</td>
<td>dst_ip[63:32]</td>
</tr>
<tr>
<td>Key_3</td>
<td align="center">0x100C</td>
<td>[31:0]</td>
<td>dst_ip[31:0]</td>
</tr>
<tr>
<td>Key_2</td>
<td align="center">0x1008</td>
<td>[31:0]</td>
<td>src_mac[47:16]</td>
</tr>
<tr>
<td>Key_1</td>
<td align="center">0x1004</td>
<td>[31:16]</td>
<td>src_mac[15:0]</td>
</tr>
<tr>
<td>Key_1</td>
<td align="center">0x1004</td>
<td>[15:0]</td>
<td>dst_mac[47:32]</td>
</tr>
<tr>
<td>Key_0</td>
<td align="center">0x1000</td>
<td>[31:0]</td>
<td>dst_mac[31:0]</td>
</tr>
</tbody>
</table>
<p><strong>Table 14.</strong> TCAM key register map.</p>
<h6 id="interrupt-map">Interrupt Map<a class="headerlink" href="#interrupt-map" title="Permanent link">&para;</a></h6>
<table>
<thead>
<tr>
<th><em>Interrupt</em></th>
<th align="center"><em>F2H IRQ</em></th>
<th align="center"><em>Linux Interrupt</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>dipsw_pio_irq</td>
<td align="center">0</td>
<td align="center"></td>
</tr>
<tr>
<td>button_pio_irq</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr>
<td>mtod_subsys_pps_load_tod_0_pps_irq</td>
<td align="center">2</td>
<td align="center"></td>
</tr>
<tr>
<td>qsfpdd_status_pio</td>
<td align="center">5</td>
<td align="center"></td>
</tr>
<tr>
<td>ftile_debug_status_pio</td>
<td align="center">6</td>
<td align="center"></td>
</tr>
<tr>
<td>dma_subsys_port5_tx_dma_ch1_irq</td>
<td align="center">13</td>
<td align="center">36</td>
</tr>
<tr>
<td>dma_subsys_port5_rx_dma_ch1_irq</td>
<td align="center">14</td>
<td align="center">35</td>
</tr>
<tr>
<td>dma_subsys_port4_tx_dma_ch1_irq</td>
<td align="center">15</td>
<td align="center">34</td>
</tr>
<tr>
<td>dma_subsys_port4_rx_dma_ch1_irq</td>
<td align="center">16</td>
<td align="center">33</td>
</tr>
<tr>
<td>dma_subsys_port3_tx_dma_ch1_irq</td>
<td align="center">17</td>
<td align="center">32</td>
</tr>
<tr>
<td>dma_subsys_port3_rx_dma_ch1_irq</td>
<td align="center">18</td>
<td align="center">31</td>
</tr>
<tr>
<td>dma_subsys_port2_tx_dma_ch1_irq</td>
<td align="center">19</td>
<td align="center">30</td>
</tr>
<tr>
<td>dma_subsys_port2_rx_dma_ch1_irq</td>
<td align="center">20</td>
<td align="center">29</td>
</tr>
<tr>
<td>dma_subsys_port1_tx_dma_ch1_irq</td>
<td align="center">21</td>
<td align="center">28</td>
</tr>
<tr>
<td>dma_subsys_port1_rx_dma_ch1_irq</td>
<td align="center">22</td>
<td align="center">27</td>
</tr>
<tr>
<td>dma_subsys_port0_tx_dma_ch1_irq</td>
<td align="center">23</td>
<td align="center">26</td>
</tr>
<tr>
<td>dma_subsys_port0_rx_dma_ch1_irq</td>
<td align="center">24</td>
<td align="center">25</td>
</tr>
</tbody>
</table>
<p><strong>Table 15.</strong> Interrupt map.</p>
<h2 id="hardware-setup">Hardware Setup<a class="headerlink" href="#hardware-setup" title="Permanent link">&para;</a></h2>
<p><a class="glightbox" href="../images/fm87-devkit.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/fm87-devkit.png" /></a></p>
<p><strong>Figure 8.</strong> Agilex&trade; I-Series Transceiver-SoC Development Kit (4 x F-Tile)</p>
<p>Set up the board default settings, as listed by the the Agilex&trade; I-Series Transceiver-SoC Development Kit User Guide, "<a href="https://www.intel.com/content/www/us/en/docs/programmable/721605/current/default-settings.html">Default Settings</a>" section:</p>
<table>
<thead>
<tr>
<th align="left">Switch</th>
<th align="left">Default Position</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">S19 [1:4]</td>
<td align="left">OFF/OFF/ON/ON</td>
</tr>
<tr>
<td align="left">S20 [1:4]</td>
<td align="left">ON/ON/ON/ON</td>
</tr>
<tr>
<td align="left">S9 [1:4]</td>
<td align="left">ON/OFF/OFF/X</td>
</tr>
<tr>
<td align="left">S10 [1:4]</td>
<td align="left">ON/ON/ON/ON</td>
</tr>
<tr>
<td align="left">S15 [1:4]</td>
<td align="left">ON/ON/ON/OFF</td>
</tr>
<tr>
<td align="left">S1 [1:4]</td>
<td align="left">OFF/OFF/OFF/OFF</td>
</tr>
<tr>
<td align="left">S6 [1:4]</td>
<td align="left">OFF/OFF/OFF/OFF</td>
</tr>
<tr>
<td align="left">S22 [1:4]</td>
<td align="left">ON/ON/ON/ON</td>
</tr>
<tr>
<td align="left">S23 [1:4]</td>
<td align="left">ON/ON/ON/ON</td>
</tr>
<tr>
<td align="left">S4 [1:4]</td>
<td align="left">ON/ON/ON/ON</td>
</tr>
</tbody>
</table>
<p><strong>Table 16.</strong> Factory Default Switch Settings</p>
<p>Connect the Type B USB cable from each development kit to the host for JTAG access.</p>
<p>Connect the two Agilex&trade; I-series Transceiver-SoC Development Kits with a QSFP-DD/28 cable via the QSFP-DD cage J27 (Highlighted in red figure 8).</p>
<p><a class="glightbox" href="../images/io48_oobe_daughter_card.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/io48_oobe_daughter_card.png" /></a></p>
<p><strong>Figure 9.</strong> IO48 OOBE daughter card</p>
<p>Connect the IO48 OOBE Daughter Card to J4 on each development kit.</p>
<p>Connect the mini-USB ports (J7) from each of the IO48 OOBE Daughter Card to your host machine. Both development kits OOBE Daughter Cards are connected to the same host.</p>
<p>Figure 10 shows a high level connectivity diagram for both development kits.</p>
<p><a class="glightbox" href="../images/mcqos_25g_hardware_setup.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/mcqos_25g_hardware_setup.png" /></a></p>
<p><strong>Figure 10.</strong> High level hardware connectivity diagram</p>
<h3 id="configure-the-serial-connection">Configure the Serial Connection<a class="headerlink" href="#configure-the-serial-connection" title="Permanent link">&para;</a></h3>
<p>The Embedded Linux OS on the Agilex&trade; 7 Transceiver-SoC Development Kit can be accessed via a serial terminal such as Minicom or PuTTY. First, identify the serial connection IDs between your host and each development kit. On an Ubuntu host, list the most recently connected USB-to-Serial devices using:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>admin@10.1.23.255:~$<span class="w"> </span>dmesg<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;ttyUSB*&quot;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="o">[</span><span class="w">    </span><span class="m">6</span>.251435<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.2:<span class="w"> </span>FTDI<span class="w"> </span>USB<span class="w"> </span>Serial<span class="w"> </span>Device<span class="w"> </span>converter<span class="w"> </span>now<span class="w"> </span>attached<span class="w"> </span>to<span class="w"> </span>ttyUSB1
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="o">[</span><span class="w">    </span><span class="m">6</span>.255400<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.3:<span class="w"> </span>FTDI<span class="w"> </span>USB<span class="w"> </span>Serial<span class="w"> </span>Device<span class="w"> </span>converter<span class="w"> </span>now<span class="w"> </span>attached<span class="w"> </span>to<span class="w"> </span>ttyUSB2
</code></pre></div>
<p>In this example, the two detected devices correspond to the serial connections for the Agilex&trade; 7 Transceiver-SoC Development Kits, as no other USB-to-Serial cables are connected to the host.</p>
<p>Start a serial session for each development kit using Minicom. Open separate terminal windows and launch a Minicom instance in each to monitor both kits concurrently.</p>
<p>Development Kit 1 terminal:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># Note: Device names may vary depending on your system. Adjust accordingly.</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>admin@10.1.23.255:~$<span class="w"> </span>minicom<span class="w"> </span>-D<span class="w"> </span>/dev/ttyUSB1
</code></pre></div>
<p>Development Kit 2 terminal:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># Note: Device names may vary depending on your system. Adjust accordingly.</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>admin@10.1.23.255:~$<span class="w"> </span>minicom<span class="w"> </span>-D<span class="w"> </span>/dev/ttyUSB2
</code></pre></div>
<p>Access the Minicom configuration screen using the following key combination:</p>
<ul>
<li><code>Ctrl + A</code>, then press <code>Z</code> for the Command Summary menu</li>
<li><code>SHIFT + O</code> for the configuration menu</li>
</ul>
<p>Configure each serial session with the following parameters:</p>
<ul>
<li>Bps/Par/Bits: 115200 8N1</li>
<li>Hardware Flow Control: No</li>
<li>Software Flow Control: No</li>
</ul>
<p>Your 'Serial port setup' screen should resemble the following after adjusting the configuration parameters:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>Welcome<span class="w"> </span>to<span class="w"> </span>minicom<span class="w"> </span><span class="m">2</span>.7.1<span class="w">                                                                  </span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>OPTI+--------------------------------------------------------------------#<span class="w">             </span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>Comp<span class="p">|</span><span class="w"> </span>A<span class="w"> </span>-<span class="w">    </span>Serial<span class="w"> </span>Device<span class="w">      </span>:<span class="w"> </span>/dev/ttyUSB1<span class="w">                              </span><span class="p">|</span><span class="w">             </span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>Port<span class="p">|</span><span class="w"> </span>B<span class="w"> </span>-<span class="w"> </span>Lockfile<span class="w"> </span>Location<span class="w">     </span>:<span class="w"> </span>/var/lock<span class="w">                                 </span><span class="p">|</span><span class="w">             </span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span><span class="p">|</span><span class="w"> </span>C<span class="w"> </span>-<span class="w">   </span>Callin<span class="w"> </span>Program<span class="w">      </span>:<span class="w">                                           </span><span class="p">|</span><span class="w">             </span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>Pres<span class="p">|</span><span class="w"> </span>D<span class="w"> </span>-<span class="w">  </span>Callout<span class="w"> </span>Program<span class="w">      </span>:<span class="w">                                           </span><span class="p">|</span><span class="w">             </span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">    </span><span class="p">|</span><span class="w"> </span>E<span class="w"> </span>-<span class="w">    </span>Bps/Par/Bits<span class="w">       </span>:<span class="w"> </span><span class="m">115200</span><span class="w"> </span>8N1<span class="w">                                </span><span class="p">|</span><span class="w">             </span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">    </span><span class="p">|</span><span class="w"> </span>F<span class="w"> </span>-<span class="w"> </span>Hardware<span class="w"> </span>Flow<span class="w"> </span>Control<span class="w"> </span>:<span class="w"> </span>No<span class="w">                                        </span><span class="p">|</span><span class="w">             </span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">    </span><span class="p">|</span><span class="w"> </span>G<span class="w"> </span>-<span class="w"> </span>Software<span class="w"> </span>Flow<span class="w"> </span>Control<span class="w"> </span>:<span class="w"> </span>No<span class="w">                                        </span><span class="p">|</span><span class="w">             </span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">    </span><span class="p">|</span><span class="w">                                                                       </span><span class="p">|</span><span class="w">             </span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">    </span><span class="p">|</span><span class="w">    </span>Change<span class="w"> </span>which<span class="w"> </span>setting?<span class="w">                                              </span><span class="p">|</span><span class="w">             </span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">    </span>+--------------------------------------------------------------------#<span class="w">             </span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="w">            </span><span class="p">|</span><span class="w"> </span>Screen<span class="w"> </span>and<span class="w"> </span>keyboard<span class="w">      </span><span class="p">|</span><span class="w">                                                  </span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="w">            </span><span class="p">|</span><span class="w"> </span>Save<span class="w"> </span>setup<span class="w"> </span>as<span class="w"> </span>dfl<span class="w">        </span><span class="p">|</span><span class="w">                                                  </span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="w">            </span><span class="p">|</span><span class="w"> </span>Save<span class="w"> </span>setup<span class="w"> </span>as..<span class="w">          </span><span class="p">|</span><span class="w">                                                  </span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="w">            </span><span class="p">|</span><span class="w"> </span>Exit<span class="w">                     </span><span class="p">|</span><span class="w">                                                  </span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="w">            </span>+-----------------------#
</code></pre></div>
<p>Both terminal will remain inactive until the Agilex&trade; 7 device is configured.</p>
<h2 id="user-flow">User Flow<a class="headerlink" href="#user-flow" title="Permanent link">&para;</a></h2>
<p>There are two ways to test the design based on use case.</p>
<ul>
<li><strong>User Flow 1</strong>: Testing with Pre-build Binaries.</li>
</ul>
<ul>
<li><strong>User Flow 2</strong>: Testing Complete Flow.</li>
</ul>
<table>
<thead>
<tr>
<th>User Flow</th>
<th>Description</th>
<th>Required for User Flow 1</th>
<th>Required for User Flow 2</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#environment-setup">Environment Setup</a></td>
<td><a href="#tools-download-and-installation">Tools Download and Installation</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td></td>
<td><a href="#install-dependency-packages-for-sw-compilation">Install dependency packages for SW compilation</a></td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td></td>
<td><a href="#package-download">Package Download</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><a href="#compilation">Compilation</a></td>
<td><a href="#hw-compilation">HW compilation</a></td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td></td>
<td><a href="#sw-compilation">SW compilation</a></td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td><a href="#programming">Programming</a></td>
<td><a href="#programming-the-sw-binary">Programming the SW binary</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td></td>
<td><a href="#programming-the-hw-binary">Programming the HW binary</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td></td>
<td><a href="#linux-boot">Linux boot</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><a href="#testing">Testing</a></td>
<td><a href="#initial-system-configuration">Initial System Configuration</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td></td>
<td><a href="#run-ping-test">Run Ping test</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td></td>
<td><a href="#run-iperf3-test">Run iPerf3 test</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td></td>
<td><a href="#run-packet-generator-test">Run Packet Generator test</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td></td>
<td><a href="#run-ptp4l-test">Run ptp4l test</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p><strong>Table 17.</strong> User Test Flows.</p>
<h2 id="environment-setup">Environment Setup<a class="headerlink" href="#environment-setup" title="Permanent link">&para;</a></h2>
<h3 id="tools-download-and-installation">Tools Download and Installation<a class="headerlink" href="#tools-download-and-installation" title="Permanent link">&para;</a></h3>
<h4 id="altera-quartus-prime-pro">Altera Quartus Prime Pro<a class="headerlink" href="#altera-quartus-prime-pro" title="Permanent link">&para;</a></h4>
<p>Download the Quartus&reg; Prime Pro Edition software version 25.1.1 from the <a href="https://www.intel.com/content/www/us/en/software-kit/862356/intel-quartus-prime-pro-edition-design-software-version-25-1-1-for-linux.html">FPGA Software Download Center</a>. Follow the on-screen instructions to complete the installation process.</p>
<p>Refer to <a href="https://www.intel.com/content/www/us/en/docs/programmable/683472/25-1/faq.html">Altera&reg; FPGA Software Installation and Licensing</a> for more information on the installation and licensing process.</p>
<p>Set up the Altera&reg; Quartus&reg; tools in the PATH enviormental variable.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># Adjust QUARTUS_ROOTDIR target to reflect your Quartus installation path  </span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">QUARTUS_ROOTDIR</span><span class="o">=</span>~/altera_pro/25.1.1/quartus/
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$QUARTUS_ROOTDIR</span>/bin:<span class="nv">$QUARTUS_ROOTDIR</span>/linux64:<span class="nv">$QUARTUS_ROOTDIR</span>/../qsys/bin:<span class="nv">$PATH</span>
</code></pre></div>
<h3 id="install-dependency-packages-for-sw-compilation">Install dependency packages for SW compilation<a class="headerlink" href="#install-dependency-packages-for-sw-compilation" title="Permanent link">&para;</a></h3>
<h4 id="arm-gnu-toolchain-113rel1">Arm GNU Toolchain 11.3.Rel1<a class="headerlink" href="#arm-gnu-toolchain-113rel1" title="Permanent link">&para;</a></h4>
<p>Download the GCC ARM cross-compiler toolchain, add it to the PATH variable, to be used by the GHRD makefile to build the HPS Debug FSBL:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>wget<span class="w"> </span>https://developer.arm.com/-/media/Files/downloads/gnu/11.3.rel1/binrel/<span class="se">\</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>arm-gnu-toolchain-11.3.rel1-x86_64-aarch64-none-linux-gnu.tar.xz
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>tar<span class="w"> </span>xf<span class="w"> </span>gcc-arm-11.3.rel1-x86_64-aarch64-none-linux-gnu.tar.xz
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>rm<span class="w"> </span>-f<span class="w"> </span>gcc-11.3.rel1-x86_64-aarch64-none-linux-gnu.tar.xz
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/gcc-arm-11.3.rel1-x86_64-aarch64-none-linux-gnu/bin:<span class="nv">$PATH</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="nb">export</span><span class="w"> </span><span class="nv">ARCH</span><span class="o">=</span>arm64
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="nb">export</span><span class="w"> </span><span class="nv">CROSS_COMPILE</span><span class="o">=</span>aarch64-none-linux-gnu-
</code></pre></div>
<h4 id="yocto-build-prerequisites">Yocto Build Prerequisites<a class="headerlink" href="#yocto-build-prerequisites" title="Permanent link">&para;</a></h4>
<p>Before building the Yocto-based Linux image, ensure the host system meets the <a href="https://docs.yoctoproject.org/scarthgap/ref-manual/system-requirements.html">Yocto system requirements</a>.</p>
<p>The command to install the required packages and set the environment on Ubuntu 22.04-LTS is:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>upgrade
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>openssh-server<span class="w"> </span>mc<span class="w"> </span>libgmp3-dev<span class="w"> </span>libmpc-dev<span class="w"> </span>gawk<span class="w"> </span>wget<span class="w"> </span>git<span class="w"> </span>diffstat<span class="w"> </span>unzip<span class="w"> </span>texinfo<span class="w"> </span>gcc<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>build-essential<span class="w"> </span>chrpath<span class="w"> </span>socat<span class="w"> </span>cpio<span class="w"> </span>python3<span class="w"> </span>python3-pip<span class="w"> </span>python3-pexpect<span class="w"> </span>xz-utils<span class="w"> </span>debianutils<span class="w"> </span>iputils-ping<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>python3-git<span class="w"> </span>python3-jinja2<span class="w"> </span>libegl1-mesa<span class="w"> </span>libsdl1.2-dev<span class="w"> </span>pylint<span class="w"> </span>xterm<span class="w"> </span>python3-subunit<span class="w"> </span>mesa-common-dev<span class="w"> </span>zstd<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>liblz4-tool<span class="w"> </span>git<span class="w"> </span>fakeroot<span class="w"> </span>build-essential<span class="w"> </span>ncurses-dev<span class="w"> </span>xz-utils<span class="w"> </span>libssl-dev<span class="w"> </span>bc<span class="w"> </span>flex<span class="w"> </span>libelf-dev<span class="w"> </span>bison<span class="w"> </span>xinetd<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>tftpd<span class="w"> </span>tftp<span class="w"> </span>nfs-kernel-server<span class="w"> </span>libncurses5<span class="w"> </span>libc6-i386<span class="w"> </span>libstdc++6:i386<span class="w"> </span>libgcc++1:i386<span class="w"> </span>lib32z1<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>device-tree-compiler<span class="w"> </span>curl<span class="w"> </span>mtd-utils<span class="w"> </span>u-boot-tools<span class="w"> </span>net-tools<span class="w"> </span>swig<span class="w"> </span>-y
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="nb">export</span><span class="w"> </span><span class="nv">LC_ALL</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="nb">export</span><span class="w"> </span><span class="nv">LC_CTYPE</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="nb">export</span><span class="w"> </span><span class="nv">LC_NUMERIC</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="nb">export</span><span class="w"> </span><span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="nb">export</span><span class="w"> </span><span class="nv">LANGUAGE</span><span class="o">=</span>en_US.UTF-8
</code></pre></div>
<h4 id="bash-as-default-command-interpreter">Bash as Default Command Interpreter<a class="headerlink" href="#bash-as-default-command-interpreter" title="Permanent link">&para;</a></h4>
<p>On Ubuntu 22.04, set Bash as the system default command interpreter:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>sudo<span class="w"> </span>ln<span class="w"> </span>-sf<span class="w"> </span>/bin/bash<span class="w"> </span>/bin/sh
</code></pre></div>
<h3 id="package-download">Package Download<a class="headerlink" href="#package-download" title="Permanent link">&para;</a></h3>
<p>Clone the GitHub repository to obtain the System Example Design source package.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/altera-fpga/agilex7-ed-ptp-mcqos-25g.git
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nb">cd</span><span class="w"> </span>agilex7-ed-ptp-mcqos-25g
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>git<span class="w"> </span>checkout<span class="w"> </span>SED-2x25GE-1588PTP-MCQOS-agi027fc-si-devkit-Q25.1.1-Rel-1.1
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="nb">cd</span><span class="w"> </span>agi027fc-si-devkit
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="nb">export</span><span class="w"> </span><span class="nv">TOP_FOLDER</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>mkdir<span class="w"> </span>bin
</code></pre></div>
<p>Directory Structure Used in This Example Design:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="p">|</span>---<span class="w"> </span>agi027fc-si-devkit
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">  </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>---<span class="w"> </span>src
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">  </span><span class="p">|</span><span class="w">   </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>---<span class="w"> </span>hw
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">  </span><span class="p">|</span><span class="w">   </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>---<span class="w"> </span>sw
</code></pre></div>
<p>Pre-built binaries are available under the <a href="https://github.com/altera-fpga/agilex7-ed-ptp-mcqos-25g/releases/tag/SED-2x25GE-1588PTP-MCQOS-agi027fc-si-devkit-Q25.1.1-Rel-1.1">GitHub repository releases</a>. File descriptions are provided in the <a href="#binaries">Binaries</a> section.</p>
<p>Extract all files and copy them to $TOP_FOLDER/bin to run hardware tests on the development kit.</p>
<h2 id="compilation">Compilation<a class="headerlink" href="#compilation" title="Permanent link">&para;</a></h2>
<p>The following steps outline the build process for both hardware (HW) and software (SW) components.</p>
<h3 id="hw-compilation">HW compilation<a class="headerlink" href="#hw-compilation" title="Permanent link">&para;</a></h3>
<p>The <code>src/hw/synth</code> directory contains the Quartus project and a Makefile with the following build targets:</p>
<ul>
<li><code>make synth</code>   - Runs synthesis stage of Altera&reg; Quartus&reg;</li>
<li><code>make compile</code> - Runs the compile stage of Altera&reg; Quartus&reg;</li>
<li><code>make all</code>     - Runs a full Altera&reg; Quartus&reg; compilation flow</li>
</ul>
<p>Run the following command to compile the project:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>/src/hw/synth/
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>make<span class="w"> </span>all
</code></pre></div>
<p>Alternatively, launch Altera&reg; Quartus&reg; in GUI mode, open <code>top.qpf</code>, and run the compile operation. This generates <code>top.sof</code> at <code>$TOP_FOLDER/src/hw/output_files/</code>.</p>
<h4 id="build-hps-and-core-rbf-file">Build HPS and CORE RBF file<a class="headerlink" href="#build-hps-and-core-rbf-file" title="Permanent link">&para;</a></h4>
<p>The configuration bitstream generated by Altera&reg; Quartus&reg; Prime includes the FPGA core, I/O, and the HPS First-Stage Bootloader (FSBL). After compiling the project, you must integrate your current U-Boot FSBL (<code>u-boot-spl-dtb.hex</code>) into the bitstream.</p>
<p>To embed the .hex file into the bitstream, run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>quartus_pfg<span class="w"> </span>-c<span class="w"> </span>-o<span class="w"> </span><span class="nv">hps</span><span class="o">=</span>on<span class="w"> </span>-o<span class="w"> </span><span class="nv">hps_path</span><span class="o">=</span>src/sw/artifacts/u-boot-spl-dtb.hex<span class="w"> </span>src/hw/synth/output_files/top.sof<span class="w"> </span>bin/top.rbf
</code></pre></div>
<p>The following files are generated:</p>
<ul>
<li><code>$TOP_FOLDER/bin/top.hps.rbf</code>  - HPS First configuration bitstream, phase 1 (HPS and DDR)</li>
<li><code>$TOP_FOLDER/bin/top.core.rbf</code> - HPS First configuration bitstream, phase 2 (FPGA fabric)</li>
</ul>
<h4 id="build-qspi-image">Build QSPI Image<a class="headerlink" href="#build-qspi-image" title="Permanent link">&para;</a></h4>
<p>The QSPI image will contain the FPGA configuration data and the HPS FSBL and it can be built using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span><span class="w"> </span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>quartus_pfg<span class="w"> </span>-c<span class="w"> </span>src/hw/synth/output_files/top.sof<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>bin/top.jic<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>-o<span class="w"> </span><span class="nv">hps_path</span><span class="o">=</span>src/sw/artifacts/u-boot-spl-dtb.hex<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>-o<span class="w"> </span><span class="nv">device</span><span class="o">=</span>MT25QU02G<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>-o<span class="w"> </span><span class="nv">flash_loader</span><span class="o">=</span>AGIB027R31B1E1VB<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>-o<span class="w"> </span><span class="nv">mode</span><span class="o">=</span>ASX4<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>-o<span class="w"> </span><span class="nv">hps</span><span class="o">=</span><span class="m">1</span>
</code></pre></div>
<p>The following files will be created:</p>
<ul>
<li><code>$TOP_FOLDER/bin/top.hps.jic</code>   - Flash image for HPS First configuration bitstream, phase 1 (HPS and DDR)</li>
<li><code>$TOP_FOLDER//bin/top.core.rbf</code> - HPS First configuration bitstream, phase 2 (FPGA fabric, discarded, as we already have it on the SD card)</li>
</ul>
<h3 id="sw-compilation">SW Compilation<a class="headerlink" href="#sw-compilation" title="Permanent link">&para;</a></h3>
<h4 id="build-yocto">Build Yocto<a class="headerlink" href="#build-yocto" title="Permanent link">&para;</a></h4>
<p>Start the Yocto build process by executing the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>/src/sw/yocto
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>.<span class="w"> </span>agilex7_dk_si_agi027fc-PTP_2P25G_MCQ-build.sh
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>build_default
</code></pre></div>
<p>After a successful build, all required images are stored in the <code>$TOP_FOLDER/src/sw/yocto/agilex7_dk_si_agi027fc-gsrd-images</code> directory. Build time varies depending on the host system's resource specifications. Upon successful compilation of the 25GbE system example design, the following files are generated:</p>
<ul>
<li><code>$TOP_FOLDER/src/sw/yocto/agilex7_dk_si_agi027fc-gsrd-images/u-boot-agilex7_dk_si_agi027fc-socdk-gsrd-atf/u-boot-spl-dtb.hex</code></li>
<li><code>$TOP_FOLDER/src/sw/yocto/agilex7_dk_si_agi027fc-gsrd-images/u-boot-agilex7_dk_si_agi027fc-socdk-gsrd-atf/u-boot.itb</code></li>
<li><code>$TOP_FOLDER/src/sw/yocto/agilex7_dk_si_agi027fc-gsrd-images/kernel_sed.itb</code></li>
<li><code>$TOP_FOLDER/src/sw/yocto/agilex7_dk_si_agi027fc-gsrd-images/sdimage.tar.gz</code></li>
</ul>
<p>Copy <code>sdimage.tar.gz</code> and <code>kernel_sed.itb</code> to the bin folder.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>cp<span class="w"> </span>-rf<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/src/sw/yocto/agilex7_dk_si_agi027fc-gsrd-images/sdimage.tar.gz<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/bin/sdimage.tar.gz
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>cp<span class="w"> </span>-rf<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/src/sw/yocto/agilex7_dk_si_agi027fc-gsrd-images/kernel_sed.itb<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/bin/kernel_sed.itb
</code></pre></div>
<h4 id="yocto-update">Yocto Update<a class="headerlink" href="#yocto-update" title="Permanent link">&para;</a></h4>
<p>If the hardware project is modified, the software must be updated to match the new bitstream. The HPS second-stage bootloader embeds a SHA signature of the FPGA bitstream during compilation. Any change to the bitstream alters the SHA, requiring a bootloader update.</p>
<p>To update the FPGA bitstream SHA signature in the HPS second-stage bootloader, follow these steps:</p>
<ol>
<li>Replace <code>$TOP_FOLDER/src/sw/yocto/meta-agilex7-sed/recipes-bsp/ghrd/files/agilex7_dk_si_agi027fc_gsrd_ghrd_PTP_2P25G_MCQ.core.rbf</code> with the updated <code>top.core.rbf</code></li>
<li>Update the recipe at <code>$TOP_FOLDER/src/sw/yocto/meta-agilex7-sed/recipes-bsp/ghrd/hw-ref-design.bb</code> using the following commands</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="nv">CORE_RBF</span><span class="o">=</span>src/sw/yocto/meta-agilex7-sed/recipes-bsp/ghrd/files/agilex7_dk_si_agi027fc_gsrd_ghrd_PTP_2P25G_MCQ.core.rbf
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>rm<span class="w"> </span>-rf<span class="w"> </span><span class="nv">$CORE_RBF</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>cp<span class="w"> </span>-f<span class="w"> </span>bin/top.core.rbf<span class="w"> </span><span class="nv">$CORE_RBF</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="nv">FILE</span><span class="o">=</span>src/sw/yocto/meta-agilex7-sed/recipes-bsp/ghrd/hw-ref-design.bbappend
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="nv">CORE_SHA</span><span class="o">=</span><span class="k">$(</span>sha256sum<span class="w"> </span><span class="nv">$CORE_RBF</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f1<span class="w"> </span>-d<span class="s2">&quot; &quot;</span><span class="k">)</span><span class="w"> </span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="nv">OLD_SHA</span><span class="o">=</span><span class="s2">&quot;.*sha256sum_PTP_2P25G_MCQ.*&quot;</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="nv">NEW_SHA</span><span class="o">=</span><span class="s2">&quot;sha256sum_PTP_2P25G_MCQ = \&quot;</span><span class="nv">$CORE_SHA</span><span class="s2">\&quot;&quot;</span><span class="w"> </span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/</span><span class="nv">$OLD_SHA</span><span class="s2">/</span><span class="nv">$NEW_SHA</span><span class="s2">/&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$FILE</span><span class="s2">&quot;</span>
</code></pre></div>
<p>After completing the previous step, rebuild the design as described in <a href="#build-yocto">Build Yocto</a>.</p>
<h2 id="programming">Programming<a class="headerlink" href="#programming" title="Permanent link">&para;</a></h2>
<p>If following User Flow 1, download the <a href="#binaries">Prebuild Binaries</a>. Ensure all steps under <a href="#hardware-setup">Hardware Setup</a> are completed before proceeding.</p>
<h3 id="programming-the-sw-binary">Programming the SW binary<a class="headerlink" href="#programming-the-sw-binary" title="Permanent link">&para;</a></h3>
<p>The SD card image file <code>sdimage.tar.gz</code> is provided in the as part of the <a href="#binaries">Prebuild Binaries</a>, you may refer to <a href="#release-contents">Release Content</a> for more information.</p>
<p>Follow the instructions under "<a href="https://altera-fpga.github.io/rel-25.1.1/embedded-designs/agilex-7/i-series/soc/gsrd/ug-gsrd-agx7i-soc/#write-sd-card">Write SD Card</a>" in the HPS GSRD User Guide for the Agilex&trade; 7 FPGA I-Series Transceiver-SoC Development Kit (4x F-Tile) to create two bootable SD cards using the provided image file.</p>
<p>Insert the SD cards into each development kit.</p>
<h3 id="programming-the-hw-binary">Programming the HW binary<a class="headerlink" href="#programming-the-hw-binary" title="Permanent link">&para;</a></h3>
<h4 id="program-the-onboard-max10-device">Program the onboard MAX10 device<a class="headerlink" href="#program-the-onboard-max10-device" title="Permanent link">&para;</a></h4>
<p>Using Quartus&reg; Programmer Tool version 25.1.1 GUI, configure the onboard MAX10 device with <code>max10_system_0002aa4F.pof</code> from the <a href="#binaries">pre-build binaries</a> files.</p>
<p>Alternatively, you can perform this operation via the command line. First, verify that all devices on the development kit are recognized and identify the JTAG cable number using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>/home/user$<span class="w"> </span>jtagconfig
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="m">1</span><span class="o">)</span><span class="w"> </span>Agilex<span class="w"> </span>I-Series<span class="w"> </span>SOC<span class="w"> </span>Dev<span class="w"> </span>Kit<span class="w"> </span>on<span class="w"> </span><span class="m">10</span>.244.179.132<span class="w"> </span><span class="o">[</span>USB-1<span class="o">]</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">  </span>6BA00477<span class="w">   </span>S10HPS/AGILEX_HPS/N5X_HPS
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">  </span>0343B0DD<span class="w">   </span>AGFB027R24C<span class="o">(</span>.<span class="p">|</span>B<span class="p">|</span>C<span class="p">|</span>R2<span class="p">|</span>R0<span class="o">)</span>/..
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">  </span>031830DD<span class="w">   </span>10M16S<span class="o">(</span>A<span class="p">|</span>C<span class="p">|</span>L<span class="o">)</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="m">2</span><span class="o">)</span><span class="w"> </span>Agilex<span class="w"> </span>I-Series<span class="w"> </span>SOC<span class="w"> </span>Dev<span class="w"> </span>Kit<span class="w"> </span>on<span class="w"> </span><span class="m">10</span>.244.179.132<span class="w"> </span><span class="o">[</span>USB-2<span class="o">]</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">  </span>6BA00477<span class="w">   </span>S10HPS/AGILEX_HPS/N5X_HPS
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">  </span>0343B0DD<span class="w">   </span>AGFB027R24C<span class="o">(</span>.<span class="p">|</span>B<span class="p">|</span>C<span class="p">|</span>R2<span class="p">|</span>R0<span class="o">)</span>/..
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">  </span>031830DD<span class="w">   </span>10M16S<span class="o">(</span>A<span class="p">|</span>C<span class="p">|</span>L<span class="o">)</span>
</code></pre></div>
<p>From the <code>jtagconfig</code> output, two Agilex&trade; 7 Transceiver-SoC Development Kits are detected, with devices identified and assigned to cable 1 and cable 2.</p>
<p>Configure the development kits from your host using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>/bin
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="c1"># Update the -c parameter to match the JTAG cable numbers assigned to your development kits</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>quartus_pgm<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="w"> </span>-m<span class="w"> </span>jtag<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;p;./max10_system_0002aa4F.pof@3&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>quartus_pgm<span class="w"> </span>-c<span class="w"> </span><span class="m">2</span><span class="w"> </span>-m<span class="w"> </span>jtag<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;p;./max10_system_0002aa4F.pof@3&quot;</span>
</code></pre></div>
<h4 id="program-the-onboard-agilex-7-device">Program the onboard Agilex&trade; 7 device<a class="headerlink" href="#program-the-onboard-agilex-7-device" title="Permanent link">&para;</a></h4>
<p>Using Quartus&reg; Programmer Tool version 25.1.1 GUI, configure the onboard <code>AGFB027R24C</code> device with <code>top.hps.rbf</code>. </p>
<p>Alternatively, you can perform this operation via the command line. First, verify that all devices on the development kit are recognized and identify the JTAG cable number using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>/home/user$<span class="w"> </span>jtagconfig
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="m">1</span><span class="o">)</span><span class="w"> </span>Agilex<span class="w"> </span>I-Series<span class="w"> </span>SOC<span class="w"> </span>Dev<span class="w"> </span>Kit<span class="w"> </span>on<span class="w"> </span><span class="m">10</span>.244.179.132<span class="w"> </span><span class="o">[</span>USB-1<span class="o">]</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">  </span>6BA00477<span class="w">   </span>S10HPS/AGILEX_HPS/N5X_HPS
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">  </span>0343B0DD<span class="w">   </span>AGFB027R24C<span class="o">(</span>.<span class="p">|</span>B<span class="p">|</span>C<span class="p">|</span>R2<span class="p">|</span>R0<span class="o">)</span>/..
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">  </span>031830DD<span class="w">   </span>10M16S<span class="o">(</span>A<span class="p">|</span>C<span class="p">|</span>L<span class="o">)</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="m">2</span><span class="o">)</span><span class="w"> </span>Agilex<span class="w"> </span>I-Series<span class="w"> </span>SOC<span class="w"> </span>Dev<span class="w"> </span>Kit<span class="w"> </span>on<span class="w"> </span><span class="m">10</span>.244.179.132<span class="w"> </span><span class="o">[</span>USB-2<span class="o">]</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">  </span>6BA00477<span class="w">   </span>S10HPS/AGILEX_HPS/N5X_HPS
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">  </span>0343B0DD<span class="w">   </span>AGFB027R24C<span class="o">(</span>.<span class="p">|</span>B<span class="p">|</span>C<span class="p">|</span>R2<span class="p">|</span>R0<span class="o">)</span>/..
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">  </span>031830DD<span class="w">   </span>10M16S<span class="o">(</span>A<span class="p">|</span>C<span class="p">|</span>L<span class="o">)</span>
</code></pre></div>
<p>From the <code>jtagconfig</code> output, two Agilex&trade; 7 Transceiver-SoC Development Kits are detected, with devices identified and assigned to cable 1 and cable 2.</p>
<p>Configure the development kits from your host using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>/bin
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="c1"># Update the -c parameter to match the JTAG cable numbers assigned to your development kits</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="c1"># If the Agilex 7 FPGA is in position 1, update the parameter after @ to reflect the correct device index.</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>quartus_pgm<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="w"> </span>-m<span class="w"> </span>jtag<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;p;./bin/top.hps.rbf@2&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>quartus_pgm<span class="w"> </span>-c<span class="w"> </span><span class="m">2</span><span class="w"> </span>-m<span class="w"> </span>jtag<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;p;./bin/top.hps.rbf@2&quot;</span>
</code></pre></div>
<h2 id="linux-boot">Linux Boot<a class="headerlink" href="#linux-boot" title="Permanent link">&para;</a></h2>
<p>On the HPS UART (Minicom connection), you’ll observe the HPS booting Linux from the SD card. Once booted, log in with username <code>root</code> and no password. The system is now ready for configuration.</p>
<p>If everything is functioning correctly, each Minicom terminal will display boot messages from the HPS running Linux.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>agilex7dksiagi027fc<span class="w"> </span>login:<span class="w"> </span>root
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>WARNING:<span class="w"> </span>Poky<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>reference<span class="w"> </span>Yocto<span class="w"> </span>Project<span class="w"> </span>distribution<span class="w"> </span>that<span class="w"> </span>should<span class="w"> </span>r
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>testing<span class="w"> </span>and<span class="w"> </span>development<span class="w"> </span>purposes<span class="w"> </span>only.<span class="w"> </span>It<span class="w"> </span>is<span class="w"> </span>recommended<span class="w"> </span>that<span class="w"> </span>you<span class="w"> </span>crr
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>own<span class="w"> </span>distribution<span class="w"> </span><span class="k">for</span><span class="w"> </span>production<span class="w"> </span>use.
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>uname<span class="w"> </span>-a
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>Linux<span class="w"> </span>agilex7dksiagi027fc<span class="w"> </span><span class="m">6</span>.12.19-altera-ptp-sed-release-R1.1
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>root@agilex7dksiagi027fc:~/scripts#<span class="w"> </span>cat<span class="w"> </span>/etc/os-release
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="nv">ID</span><span class="o">=</span>poky
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="nv">NAME</span><span class="o">=</span><span class="s2">&quot;Poky (Yocto Project Reference Distro)&quot;</span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="nv">VERSION</span><span class="o">=</span><span class="s2">&quot;5.0.5 (scarthgap)&quot;</span>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="nv">VERSION_ID</span><span class="o">=</span><span class="m">5</span>.0.5
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="nv">VERSION_CODENAME</span><span class="o">=</span><span class="s2">&quot;scarthgap&quot;</span>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="nv">PRETTY_NAME</span><span class="o">=</span><span class="s2">&quot;Poky (Yocto Project Reference Distro) 5.0.5 (scarthgap)&quot;</span>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a><span class="nv">CPE_NAME</span><span class="o">=</span><span class="s2">&quot;cpe:/o:openembedded:poky:5.0.5&quot;</span>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>root@agilex7dksiagi027fc:~/scripts#
</code></pre></div>
<p>Repeat the same steps for the second Agilex&trade; 7 I-Series Transceiver-SoC Development Kit.</p>
<h3 id="ethernet-link-status">Ethernet Link Status<a class="headerlink" href="#ethernet-link-status" title="Permanent link">&para;</a></h3>
<p>Check the network status on each Agilex&trade; 7 I-Series Transceiver-SoC Development Kit using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ip<span class="w"> </span>addr
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="m">1</span>:<span class="w"> </span>lo:<span class="w"> </span>&lt;LOOPBACK,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">65536</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UNKNOWN<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span>link/loopback<span class="w"> </span><span class="m">00</span>:00:00:00:00:00<span class="w"> </span>brd<span class="w"> </span><span class="m">00</span>:00:00:00:00:00
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">127</span>.0.0.1/8<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>lo
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">    </span>inet6<span class="w"> </span>::1/128<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>noprefixroute<span class="w"> </span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="m">2</span>:<span class="w"> </span>eth0:<span class="w"> </span>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state0
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w">    </span>link/ether<span class="w"> </span><span class="m">66</span>:68:45:23:2d:d3<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="m">3</span>:<span class="w"> </span>teql0:<span class="w"> </span>&lt;NOARP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>noop<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w">    </span>link/void<span class="w"> </span>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="m">4</span>:<span class="w"> </span>eth1:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>U0
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="w">    </span>link/ether<span class="w"> </span>4a:e9:22:7c:86:00<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">169</span>.254.167.23/16<span class="w"> </span>brd<span class="w"> </span><span class="m">169</span>.254.255.255<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth1
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="w">    </span>inet6<span class="w"> </span>fe80::48e9:22ff:fe7c:8600/64<span class="w"> </span>scope<span class="w"> </span>link<span class="w"> </span>proto<span class="w"> </span>kernel_ll<span class="w"> </span>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="m">5</span>:<span class="w"> </span>eth2:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>U0
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="w">    </span>link/ether<span class="w"> </span>ae:1b:b7:7c:16:d0<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">169</span>.254.86.21/16<span class="w"> </span>brd<span class="w"> </span><span class="m">169</span>.254.255.255<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth2
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a><span class="w">    </span>inet6<span class="w"> </span>fe80::ac1b:b7ff:fe7c:16d0/64<span class="w"> </span>scope<span class="w"> </span>link<span class="w"> </span>proto<span class="w"> </span>kernel_ll<span class="w"> </span>
<a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>
</code></pre></div>
<p>Three Ethernet interfaces will be listed in the output of <code>ip addr</code>:</p>
<ol>
<li><code>eth0</code> : HPS dedicated Ethernet interface (1Gbps)</li>
<li><code>eth1</code> : 25G Ethernet Port (25Gbps)</li>
<li><code>eth2</code> : 25G Ethernet Port (25Gbps)</li>
</ol>
<h2 id="initial-system-configuration">Initial System Configuration<a class="headerlink" href="#initial-system-configuration" title="Permanent link">&para;</a></h2>
<p>After booting on both development kits, the System Example design requires initialization of key components: DMA subsystem, User Logic (Packet Generator), Packet Switch, Egress QoS-TC, and Iperf. Two configuration methods are supported.</p>
<ol>
<li>One-step configuration via script</li>
<li>Step-by-Step configuration of each interface.</li>
</ol>
<h3 id="configuration-via-script">Configuration Via Script<a class="headerlink" href="#configuration-via-script" title="Permanent link">&para;</a></h3>
<p>For <a href="#manual-configuration">manual configuration</a>, skip this section.</p>
<p>The <code>2PortMCQ.sh</code> script is included in the Yocto rootfs image at <code>/home/root/scripts/</code>. It accepts a single numeric argument specifying the target development kit. Usage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nb">source</span><span class="w"> </span>./2PortMCQ.sh<span class="w"> </span>&lt;development<span class="w"> </span>kit<span class="w"> </span>number&gt;
</code></pre></div>
<p>Valid argument values are <code>1</code> or <code>2</code>.</p>
<p>Run the following command on Development Kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nb">source</span><span class="w"> </span>./2PortMCQ.sh<span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>Expected output:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>root@agilex7dksiagi027fc:~/scripts#<span class="w"> </span><span class="nb">source</span><span class="w"> </span>./2PortMCQ.sh<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>Programming<span class="w"> </span>the<span class="w"> </span>Basic<span class="w"> </span>IP<span class="w"> </span>address...
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>Clearing<span class="w"> </span>old<span class="w"> </span>PTPBridge<span class="w"> </span>rules<span class="w"> </span>Port<span class="w"> </span>-<span class="w"> </span><span class="m">0</span>...
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>UIO<span class="w"> </span>device<span class="w"> </span>file<span class="w"> </span>found.<span class="w"> </span>Using<span class="w"> </span>/dev/uio2
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>Key<span class="w"> </span>Flush<span class="w"> </span>successful...
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>Clearing<span class="w"> </span>old<span class="w"> </span>TC<span class="w"> </span>rules<span class="w"> </span>Port<span class="w"> </span>-<span class="w"> </span><span class="m">0</span>...
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>Clearing<span class="w"> </span>old<span class="w"> </span>PTPBridge<span class="w"> </span>rules<span class="w"> </span>Port<span class="w"> </span>-<span class="w"> </span><span class="m">1</span>...
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>UIO<span class="w"> </span>device<span class="w"> </span>file<span class="w"> </span>found.<span class="w"> </span>Using<span class="w"> </span>/dev/uio2
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>Key<span class="w"> </span>Flush<span class="w"> </span>successful...
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>Clearing<span class="w"> </span>old<span class="w"> </span>TC<span class="w"> </span>rules<span class="w"> </span>Port<span class="w"> </span>-<span class="w"> </span><span class="m">1</span>...
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>Flushing<span class="w"> </span>old<span class="w"> </span>IPv4<span class="w"> </span>and<span class="w"> </span>IPv6<span class="w"> </span>addresses<span class="w"> </span>and<span class="w"> </span>routes
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>Setting<span class="w"> </span>DEVKIT<span class="w"> </span>to<span class="w"> </span><span class="m">1</span>.
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>Running<span class="w"> </span>script<span class="w"> </span><span class="k">for</span><span class="w"> </span>Devkit<span class="w"> </span><span class="m">1</span>.
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="w">    </span>link/ether<span class="w"> </span><span class="m">66</span>:68:45:23:2d:d3<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="w">    </span>link/ether<span class="w"> </span>4a:e9:22:7c:86:00<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="w">    </span>link/ether<span class="w"> </span>ae:1b:b7:7c:16:d0<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>Programming<span class="w"> </span>the<span class="w"> </span>PTP<span class="w"> </span>Bridge<span class="w"> </span>Port<span class="w"> </span>-<span class="w"> </span><span class="m">0</span>...
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>Programming<span class="w"> </span>the<span class="w"> </span>PTP<span class="w"> </span>Bridge<span class="w"> </span>Generic<span class="w"> </span>rule...
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>eth1<span class="w"> </span>-<span class="w"> </span>4a:e9:22:7c:86:00
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>UIO<span class="w"> </span>device<span class="w"> </span>file<span class="w"> </span>found.<span class="w"> </span>Using<span class="w"> </span>/dev/uio2
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>Setting<span class="w"> </span>Entry:<span class="w"> </span>Success
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a>Copying<span class="w"> </span>Keyfields:<span class="w"> </span>Port:<span class="w"> </span><span class="m">0</span><span class="w"> </span>Key<span class="w"> </span>index:<span class="w"> </span><span class="m">0</span><span class="w"> </span>Success
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a>Setting<span class="w"> </span>Result<span class="w"> </span>Register:<span class="w"> </span><span class="m">2</span>.<span class="w"> </span>Success
<a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a>Setting<span class="w"> </span>Mask<span class="w"> </span>Register:<span class="w"> </span>Success
<a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a>Setting<span class="w"> </span>Mgmt<span class="w"> </span>Cntrl<span class="w"> </span>Register:<span class="w"> </span>Success
<a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a>Wait<span class="w"> </span>till<span class="w"> </span>operation<span class="w"> </span>is<span class="w"> </span><span class="k">done</span>:<span class="w"> </span>Key<span class="w"> </span>Insertion<span class="w"> </span>successful...
<a id="__codelineno-32-27" name="__codelineno-32-27" href="#__codelineno-32-27"></a>Programming<span class="w"> </span>the<span class="w"> </span>PTP<span class="w"> </span>Bridge<span class="w"> </span>-<span class="w"> </span>Low<span class="w"> </span>priority<span class="w"> </span>rules...
<a id="__codelineno-32-28" name="__codelineno-32-28" href="#__codelineno-32-28"></a>UIO<span class="w"> </span>device<span class="w"> </span>file<span class="w"> </span>found.<span class="w"> </span>Using<span class="w"> </span>/dev/uio2
<a id="__codelineno-32-29" name="__codelineno-32-29" href="#__codelineno-32-29"></a>Setting<span class="w"> </span>Entry:<span class="w"> </span>Success
<a id="__codelineno-32-30" name="__codelineno-32-30" href="#__codelineno-32-30"></a>Copying<span class="w"> </span>Keyfields:<span class="w"> </span>Port:<span class="w"> </span><span class="m">0</span><span class="w"> </span>Key<span class="w"> </span>index:<span class="w"> </span><span class="m">1</span><span class="w"> </span>Success
<a id="__codelineno-32-31" name="__codelineno-32-31" href="#__codelineno-32-31"></a>Setting<span class="w"> </span>Result<span class="w"> </span>Register:<span class="w"> </span><span class="m">2</span>.<span class="w"> </span>Success
<a id="__codelineno-32-32" name="__codelineno-32-32" href="#__codelineno-32-32"></a>Setting<span class="w"> </span>Mask<span class="w"> </span>Register:<span class="w"> </span>Success
<a id="__codelineno-32-33" name="__codelineno-32-33" href="#__codelineno-32-33"></a>Setting<span class="w"> </span>Mgmt<span class="w"> </span>Cntrl<span class="w"> </span>Register:<span class="w"> </span>Success
<a id="__codelineno-32-34" name="__codelineno-32-34" href="#__codelineno-32-34"></a>Wait<span class="w"> </span>till<span class="w"> </span>operation<span class="w"> </span>is<span class="w"> </span><span class="k">done</span>:<span class="w"> </span>Key<span class="w"> </span>Insertion<span class="w"> </span>successful...
<a id="__codelineno-32-35" name="__codelineno-32-35" href="#__codelineno-32-35"></a>UIO<span class="w"> </span>device<span class="w"> </span>file<span class="w"> </span>found.<span class="w"> </span>Using<span class="w"> </span>/dev/uio2
<a id="__codelineno-32-36" name="__codelineno-32-36" href="#__codelineno-32-36"></a>Setting<span class="w"> </span>Entry:<span class="w"> </span>Success
<a id="__codelineno-32-37" name="__codelineno-32-37" href="#__codelineno-32-37"></a>
<a id="__codelineno-32-38" name="__codelineno-32-38" href="#__codelineno-32-38"></a>
<a id="__codelineno-32-39" name="__codelineno-32-39" href="#__codelineno-32-39"></a>
<a id="__codelineno-32-40" name="__codelineno-32-40" href="#__codelineno-32-40"></a>&lt;--<span class="w"> </span>output<span class="w"> </span>truncated<span class="w"> </span>--&gt;
<a id="__codelineno-32-41" name="__codelineno-32-41" href="#__codelineno-32-41"></a>
<a id="__codelineno-32-42" name="__codelineno-32-42" href="#__codelineno-32-42"></a>
<a id="__codelineno-32-43" name="__codelineno-32-43" href="#__codelineno-32-43"></a>Programming<span class="w"> </span>the<span class="w"> </span>IPV6<span class="w"> </span>rules<span class="w"> </span>-<span class="w"> </span>Port<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-32-44" name="__codelineno-32-44" href="#__codelineno-32-44"></a>Setting<span class="w"> </span>IPv6<span class="w"> </span><span class="nb">local</span><span class="w"> </span>addresses
<a id="__codelineno-32-45" name="__codelineno-32-45" href="#__codelineno-32-45"></a>UIO<span class="w"> </span>device<span class="w"> </span>file<span class="w"> </span>found.<span class="w"> </span>Using<span class="w"> </span>/dev/uio2
<a id="__codelineno-32-46" name="__codelineno-32-46" href="#__codelineno-32-46"></a>Setting<span class="w"> </span>Entry:<span class="w"> </span>Success
<a id="__codelineno-32-47" name="__codelineno-32-47" href="#__codelineno-32-47"></a>Copying<span class="w"> </span>Keyfields:<span class="w"> </span>Port:<span class="w"> </span><span class="m">1</span><span class="w"> </span>Key<span class="w"> </span>index:<span class="w"> </span><span class="m">20</span><span class="w"> </span>Success
<a id="__codelineno-32-48" name="__codelineno-32-48" href="#__codelineno-32-48"></a>Setting<span class="w"> </span>Result<span class="w"> </span>Register:<span class="w"> </span><span class="m">2</span>.<span class="w"> </span>Success
<a id="__codelineno-32-49" name="__codelineno-32-49" href="#__codelineno-32-49"></a>Setting<span class="w"> </span>Mask<span class="w"> </span>Register:<span class="w"> </span>Success
<a id="__codelineno-32-50" name="__codelineno-32-50" href="#__codelineno-32-50"></a>Setting<span class="w"> </span>Mgmt<span class="w"> </span>Cntrl<span class="w"> </span>Register:<span class="w"> </span>Success
<a id="__codelineno-32-51" name="__codelineno-32-51" href="#__codelineno-32-51"></a>Wait<span class="w"> </span>till<span class="w"> </span>operation<span class="w"> </span>is<span class="w"> </span><span class="k">done</span>:<span class="w"> </span>Key<span class="w"> </span>Insertion<span class="w"> </span>successful...
<a id="__codelineno-32-52" name="__codelineno-32-52" href="#__codelineno-32-52"></a>UIO<span class="w"> </span>device<span class="w"> </span>file<span class="w"> </span>found.<span class="w"> </span>Using<span class="w"> </span>/dev/uio2
<a id="__codelineno-32-53" name="__codelineno-32-53" href="#__codelineno-32-53"></a>Setting<span class="w"> </span>Entry:<span class="w"> </span>Success
<a id="__codelineno-32-54" name="__codelineno-32-54" href="#__codelineno-32-54"></a>Copying<span class="w"> </span>Keyfields:<span class="w"> </span>Port:<span class="w"> </span><span class="m">1</span><span class="w"> </span>Key<span class="w"> </span>index:<span class="w"> </span><span class="m">21</span><span class="w"> </span>Success
<a id="__codelineno-32-55" name="__codelineno-32-55" href="#__codelineno-32-55"></a>Setting<span class="w"> </span>Result<span class="w"> </span>Register:<span class="w"> </span><span class="m">2</span>.<span class="w"> </span>Success
<a id="__codelineno-32-56" name="__codelineno-32-56" href="#__codelineno-32-56"></a>Setting<span class="w"> </span>Mask<span class="w"> </span>Register:<span class="w"> </span>Success
<a id="__codelineno-32-57" name="__codelineno-32-57" href="#__codelineno-32-57"></a>Setting<span class="w"> </span>Mgmt<span class="w"> </span>Cntrl<span class="w"> </span>Register:<span class="w"> </span>Success
<a id="__codelineno-32-58" name="__codelineno-32-58" href="#__codelineno-32-58"></a>Wait<span class="w"> </span>till<span class="w"> </span>operation<span class="w"> </span>is<span class="w"> </span><span class="k">done</span>:<span class="w"> </span>Key<span class="w"> </span>Insertion<span class="w"> </span>successful...
<a id="__codelineno-32-59" name="__codelineno-32-59" href="#__codelineno-32-59"></a>Traffic<span class="w"> </span>Class<span class="w"> </span>Egress<span class="w"> </span>QOS<span class="w"> </span>programming<span class="w"> </span>-<span class="w"> </span>Port<span class="w"> </span>-<span class="w"> </span>eth1
<a id="__codelineno-32-60" name="__codelineno-32-60" href="#__codelineno-32-60"></a>Create<span class="w"> </span>QDisc...
<a id="__codelineno-32-61" name="__codelineno-32-61" href="#__codelineno-32-61"></a>Create<span class="w"> </span>Filters<span class="w"> </span>-<span class="w"> </span>PTP<span class="w"> </span>packets<span class="w"> </span>to<span class="w"> </span>DMA0...
<a id="__codelineno-32-62" name="__codelineno-32-62" href="#__codelineno-32-62"></a>Create<span class="w"> </span>Filters<span class="w"> </span>-<span class="w"> </span>IPERF<span class="w"> </span>540X<span class="w"> </span>packets<span class="w"> </span>to<span class="w"> </span>DMA0...
<a id="__codelineno-32-63" name="__codelineno-32-63" href="#__codelineno-32-63"></a>Create<span class="w"> </span>Filters<span class="w"> </span>-<span class="w"> </span>IPERF<span class="w"> </span>530X<span class="w"> </span>packets<span class="w"> </span>to<span class="w"> </span>DMA1...
<a id="__codelineno-32-64" name="__codelineno-32-64" href="#__codelineno-32-64"></a>Create<span class="w"> </span>Filters<span class="w"> </span>-<span class="w"> </span>IPERF<span class="w"> </span>520X<span class="w"> </span>packets<span class="w"> </span>to<span class="w"> </span>DMA2...
<a id="__codelineno-32-65" name="__codelineno-32-65" href="#__codelineno-32-65"></a>Create<span class="w"> </span>Filters<span class="w"> </span>-<span class="w"> </span>ICMP<span class="w"> </span>packets<span class="w"> </span>to<span class="w"> </span>DMA2...
<a id="__codelineno-32-66" name="__codelineno-32-66" href="#__codelineno-32-66"></a>Traffic<span class="w"> </span>Class<span class="w"> </span>Egress<span class="w"> </span>QOS<span class="w"> </span>programming<span class="w"> </span>-<span class="w"> </span>Port<span class="w"> </span>-<span class="w"> </span>eth2
<a id="__codelineno-32-67" name="__codelineno-32-67" href="#__codelineno-32-67"></a>Create<span class="w"> </span>QDisc...
<a id="__codelineno-32-68" name="__codelineno-32-68" href="#__codelineno-32-68"></a>Create<span class="w"> </span>Filters<span class="w"> </span>-<span class="w"> </span>PTP<span class="w"> </span>packets<span class="w"> </span>to<span class="w"> </span>DMA0...
<a id="__codelineno-32-69" name="__codelineno-32-69" href="#__codelineno-32-69"></a>Create<span class="w"> </span>Filters<span class="w"> </span>-<span class="w"> </span>IPERF<span class="w"> </span>540X<span class="w"> </span>packets<span class="w"> </span>to<span class="w"> </span>DMA0...
<a id="__codelineno-32-70" name="__codelineno-32-70" href="#__codelineno-32-70"></a>Create<span class="w"> </span>Filters<span class="w"> </span>-<span class="w"> </span>IPERF<span class="w"> </span>530X<span class="w"> </span>packets<span class="w"> </span>to<span class="w"> </span>DMA1...
<a id="__codelineno-32-71" name="__codelineno-32-71" href="#__codelineno-32-71"></a>Create<span class="w"> </span>Filters<span class="w"> </span>-<span class="w"> </span>IPERF<span class="w"> </span>520X<span class="w"> </span>packets<span class="w"> </span>to<span class="w"> </span>DMA2...
<a id="__codelineno-32-72" name="__codelineno-32-72" href="#__codelineno-32-72"></a>Create<span class="w"> </span>Filters<span class="w"> </span>-<span class="w"> </span>ICMP<span class="w"> </span>packets<span class="w"> </span>to<span class="w"> </span>DMA2...
<a id="__codelineno-32-73" name="__codelineno-32-73" href="#__codelineno-32-73"></a>Configuration<span class="w"> </span><span class="k">for</span><span class="w"> </span>Devkit<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">set</span>
<a id="__codelineno-32-74" name="__codelineno-32-74" href="#__codelineno-32-74"></a>root@agilex7dksiagi027fc:~/scripts#
</code></pre></div>
<p>Configure Development Kit 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nb">source</span><span class="w"> </span>./2PortMCQ.sh<span class="w"> </span><span class="m">2</span>
</code></pre></div>
<h3 id="manual-configuration">Manual Configuration<a class="headerlink" href="#manual-configuration" title="Permanent link">&para;</a></h3>
<h4 id="define-interrupt-core-handling">Define Interrupt Core Handling<a class="headerlink" href="#define-interrupt-core-handling" title="Permanent link">&para;</a></h4>
<p>Set up SMP affinity for Ethernet interrupts to distribute handling across different CPUs.</p>
<p>Execute the following commands on both development kits:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the Basic IP address...&quot;</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/25/smp_affinity<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/26/smp_affinity<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/27/smp_affinity<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/28/smp_affinity<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;8&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/29/smp_affinity<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;8&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/30/smp_affinity
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/31/smp_affinity<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/32/smp_affinity<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/33/smp_affinity<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/34/smp_affinity<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/35/smp_affinity<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/irq/36/smp_affinity
</code></pre></div>
<h4 id="clear-old-configurations">Clear Old Configurations<a class="headerlink" href="#clear-old-configurations" title="Permanent link">&para;</a></h4>
<p>Clear existing Packet Switch TCAM keys, traffic class (TC) configurations, and any pre-existing IPv6 settings.</p>
<p>Execute the following commands on both development kits:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Clearing old PTPBridge rules Port - 0...&quot;</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--flush-all-keys
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Clearing old TC rules Port - 0...&quot;</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>tc<span class="w"> </span>filter<span class="w"> </span>del<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>tc<span class="w"> </span>qdisc<span class="w"> </span>del<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>clsact
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Clearing old PTPBridge rules Port - 1...&quot;</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--flush-all-keys
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Clearing old TC rules Port - 1...&quot;</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>tc<span class="w"> </span>filter<span class="w"> </span>del<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>tc<span class="w"> </span>qdisc<span class="w"> </span>del<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>clsact
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Flushing old IPv4 and IPv6 addresses and routes&quot;</span>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>ip<span class="w"> </span>addres<span class="w"> </span>flush<span class="w"> </span>eth1<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>flush<span class="w"> </span>dev<span class="w"> </span>eth1
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>ip<span class="w"> </span>-6<span class="w"> </span>addres<span class="w"> </span>flush<span class="w"> </span>eth1<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>-6<span class="w"> </span>route<span class="w"> </span>flush<span class="w"> </span>dev<span class="w"> </span>eth1
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>ip<span class="w"> </span>addres<span class="w"> </span>flush<span class="w"> </span>eth2<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>flush<span class="w"> </span>dev<span class="w"> </span>eth2
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>ip<span class="w"> </span>-6<span class="w"> </span>addres<span class="w"> </span>flush<span class="w"> </span>eth2<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>-6<span class="w"> </span>route<span class="w"> </span>flush<span class="w"> </span>dev<span class="w"> </span>eth2
</code></pre></div>
<p>If no configuration is stored, the commands may return error messages. These errors are safe to ignore.</p>
<h4 id="set-ipv4-addresses">Set IPv4 Addresses<a class="headerlink" href="#set-ipv4-addresses" title="Permanent link">&para;</a></h4>
<p><code>eth1</code> and <code>eth2</code> are the Linux interface names assigned to Ethernet Subsystem IP ports 8 and 9, respectively. Both interfaces must be in the UP state and have IP addresses assigned. Use the following commands to overwrite the IP addresses and bring the interfaces up.</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>eth1<span class="w"> </span>up<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.121.1<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.121.0/24<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>src<span class="w"> </span><span class="m">192</span>.168.121.1
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>eth2<span class="w"> </span>up<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.122.1<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.122.0/24<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>src<span class="w"> </span><span class="m">192</span>.168.122.1
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>ip<span class="w"> </span>addr<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>ether
</code></pre></div>
<p>Execute the following commands on development kit 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>eth1<span class="w"> </span>up<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.121.0/24<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>src<span class="w"> </span><span class="m">192</span>.168.121.2
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>eth2<span class="w"> </span>up<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.122.2<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.122.0/24<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>src<span class="w"> </span><span class="m">192</span>.168.122.2
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>ip<span class="w"> </span>addr<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>ether
</code></pre></div>
<h4 id="packet-switch-rules">Packet Switch Rules<a class="headerlink" href="#packet-switch-rules" title="Permanent link">&para;</a></h4>
<h5 id="generic-traffic-rules">Generic Traffic Rules<a class="headerlink" href="#generic-traffic-rules" title="Permanent link">&para;</a></h5>
<p>The following rules configure the Packet Switch to route ping requests to the lowest priority DMA (DMA-2) on both Ethernet interfaces.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge Port - 0...&quot;</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge Generic rule...&quot;</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">0</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;eth1&quot;</span><span class="w">  </span>--result<span class="w"> </span>0x2
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - Low priority rules...&quot;</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">1</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0806<span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">2</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--protocol<span class="w"> </span>0x01<span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge Port - 1...&quot;</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge Generic rule...&quot;</span>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">0</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;eth2&quot;</span><span class="w">  </span>--result<span class="w"> </span>0x2
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - Low priority rules...&quot;</span>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">1</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0806<span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">2</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--protocol<span class="w"> </span>0x01<span class="w"> </span>--result<span class="w"> </span>0x2
</code></pre></div>
<p>The first rule matches packets with a destination MAC address equal to that of the Ethernet interface. The second rule filters Ethernet frames with Ethertype set to IPv4 and the IPv4 protocol field set to ICMP. The final rule filters frames with Ethertype set to ARP.</p>
<h5 id="iperf3-synthetic-traffic-rules">iPerf3 Synthetic Traffic Rules<a class="headerlink" href="#iperf3-synthetic-traffic-rules" title="Permanent link">&para;</a></h5>
<p>iPerf3 is a tool for active measurement of maximum achievable bandwidth on IP networks. It can generate traffic between a client and server, with configurable parameters such as the network port used. The following rules assign a target DMA based on the network port of incoming Ethernet packets.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge Port - 0...&quot;</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - IPERF 540X to DMA0...&quot;</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">3</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5401</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">4</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5402</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">5</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5401</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">6</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5402</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - IPERF 530X to DMA1...&quot;</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">7</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5301</span><span class="w"> </span>--result<span class="w"> </span>0x1
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">8</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5302</span><span class="w"> </span>--result<span class="w"> </span>0x1
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">9</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5301</span><span class="w"> </span>--result<span class="w"> </span>0x1
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">10</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5302</span><span class="w"> </span>--result<span class="w"> </span>0x1
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - IPERF 520X to DMA2...&quot;</span>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">11</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5201</span><span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">12</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5202</span><span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">13</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5201</span><span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">14</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5202</span><span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a>
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge Port - 1...&quot;</span>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - IPERF 540X to DMA0...&quot;</span>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">3</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5401</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">4</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5402</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">5</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5401</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">6</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5402</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - IPERF 530X to DMA1...&quot;</span>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">7</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5301</span><span class="w"> </span>--result<span class="w"> </span>0x1
<a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">8</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5302</span><span class="w"> </span>--result<span class="w"> </span>0x1
<a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">9</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5301</span><span class="w"> </span>--result<span class="w"> </span>0x1
<a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">10</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5302</span><span class="w"> </span>--result<span class="w"> </span>0x1
<a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - IPERF 520X to DMA2...&quot;</span>
<a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">11</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5201</span><span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">12</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--dest-port<span class="w"> </span><span class="m">5202</span><span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">13</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5201</span><span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-39-33" name="__codelineno-39-33" href="#__codelineno-39-33"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">14</span><span class="w"> </span>--ethtype<span class="w"> </span>0x0800<span class="w"> </span>--src-port<span class="w"> </span><span class="m">5202</span><span class="w"> </span>--result<span class="w"> </span>0x2
</code></pre></div>
<p>The commands above configure the Packet Switch to route all traffic using port 540X to DMA-0, 530X to DMA-1, and 520X to DMA-2.</p>
<h5 id="ptp-traffic-rules">PTP Traffic Rules<a class="headerlink" href="#ptp-traffic-rules" title="Permanent link">&para;</a></h5>
<p>PTP Ethernet packets will be routed to the highest priority DMA (DMA-0) to keep the system time synchronized with the network time. Execute the following commands on both development kits to make both Ethernet interfaces prioritize the PTP traffic: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge Port - 0...&quot;</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - PTP Packets to DMA0...&quot;</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">15</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;01:80:C2:00:00:0E&quot;</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">16</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;01:1B:19:00:00:00&quot;</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">17</span><span class="w"> </span>--ethtype<span class="w"> </span>0x88F7<span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">18</span><span class="w"> </span>--ethtype<span class="w"> </span>0x88F8<span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge Port - 1...&quot;</span>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - PTP Packets to DMA0...&quot;</span>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">15</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;01:80:C2:00:00:0E&quot;</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">16</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;01:1B:19:00:00:00&quot;</span><span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">17</span><span class="w"> </span>--ethtype<span class="w"> </span>0x88F7<span class="w"> </span>--result<span class="w"> </span>0x0
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">18</span><span class="w"> </span>--ethtype<span class="w"> </span>0x88F8<span class="w"> </span>--result<span class="w"> </span>0x0
</code></pre></div>
<p>The commands above set rules to filter packets based on the destination address used for PTP broadcast messages and the protocol identifier encapsulated in the EtherType field of the Ethernet frame. The rules are applied to both Ethernet interfaces in this example, but there is an independent scheduler for each Ethernet interface, making it possible to have different rules for each one of them.</p>
<h5 id="packet-generator-traffic-rules">Packet Generator Traffic Rules<a class="headerlink" href="#packet-generator-traffic-rules" title="Permanent link">&para;</a></h5>
<p>The following set of rules defines the routing to the client ports where the system example design packet generators are connected.</p>
<p>The <code>packetgenerator</code> commands set the source and destination MAC addresses to be used by each packet generator. Then, the <code>ptpbridge</code> is used to filter incoming Ethernet frames coming from the opposite development kit and route them to one of the user ports (user ports are represented by '0x8'). There are two additional commands to program the packet generator module with traffic configuration parameters.</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - Port 0 User packets to User port...&quot;</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:2&quot;</span><span class="w"> </span>--src-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:1&quot;</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>ptpbridge<span class="w"> </span>--set-key<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--key-index<span class="w"> </span><span class="m">19</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:1&quot;</span><span class="w"> </span>--result<span class="w"> </span>0x8
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - Port 1 User packets to User port...&quot;</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio1<span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:4&quot;</span><span class="w"> </span>--src-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:3&quot;</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>ptpbridge<span class="w"> </span>--set-key<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--key-index<span class="w"> </span><span class="m">19</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:3&quot;</span><span class="w"> </span>--result<span class="w"> </span>0x8
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the Packet Generator - Port 0&quot;</span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--traffic<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--dyn-pkt-mode<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--fixed-gap<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--pkt-len-mode<span class="w"> </span>0x01<span class="w"> </span>--num-idle-cycles<span class="w"> </span><span class="m">22</span><span class="w"> </span>--packet-checker<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--num-packets<span class="w"> </span>0xFFFFFFFF<span class="w"> </span>--one-shot<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--tx-pkt-size<span class="w"> </span><span class="m">1024</span><span class="w"> </span>--tx-max-pkt-size<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the Packet Generator - Port 1&quot;</span>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio1<span class="w"> </span>--traffic<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--dyn-pkt-mode<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--fixed-gap<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--pkt-len-mode<span class="w"> </span>0x01<span class="w"> </span>--num-idle-cycles<span class="w"> </span><span class="m">22</span><span class="w"> </span>--packet-checker<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--num-packets<span class="w"> </span>0xFFFFFFFF<span class="w"> </span>--one-shot<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--tx-pkt-size<span class="w"> </span><span class="m">1024</span><span class="w"> </span>--tx-max-pkt-size<span class="w"> </span><span class="m">1024</span>
</code></pre></div>
<p>Execute the following commands on development kit 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - Port 0 User packets to User port...&quot;</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:1&quot;</span><span class="w"> </span>--src-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:2&quot;</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>ptpbridge<span class="w"> </span>--set-key<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--key-index<span class="w"> </span><span class="m">19</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:2&quot;</span><span class="w"> </span>--result<span class="w"> </span>0x8
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the PTP Bridge - Port 1 User packets to User port...&quot;</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio1<span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:3&quot;</span><span class="w"> </span>--src-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:4&quot;</span>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>ptpbridge<span class="w"> </span>--set-key<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--key-index<span class="w"> </span><span class="m">19</span><span class="w"> </span>--dest-mac<span class="w"> </span><span class="s2">&quot;12:34:56:78:0A:4&quot;</span><span class="w"> </span>--result<span class="w"> </span>0x8
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the Packet Generator - Port 0&quot;</span>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--traffic<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--dyn-pkt-mode<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--fixed-gap<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--pkt-len-mode<span class="w"> </span>0x01<span class="w"> </span>--num-idle-cycles<span class="w"> </span><span class="m">22</span><span class="w"> </span>--packet-checker<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--num-packets<span class="w"> </span>0xFFFFFFFF<span class="w"> </span>--one-shot<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--tx-pkt-size<span class="w"> </span><span class="m">1024</span><span class="w"> </span>--tx-max-pkt-size<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the Packet Generator - Port 1&quot;</span>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio1<span class="w"> </span>--traffic<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--dyn-pkt-mode<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--fixed-gap<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--pkt-len-mode<span class="w"> </span>0x01<span class="w"> </span>--num-idle-cycles<span class="w"> </span><span class="m">22</span><span class="w"> </span>--packet-checker<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--num-packets<span class="w"> </span>0xFFFFFFFF<span class="w"> </span>--one-shot<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--tx-pkt-size<span class="w"> </span><span class="m">1024</span><span class="w"> </span>--tx-max-pkt-size<span class="w"> </span><span class="m">1024</span>
</code></pre></div>
<h5 id="ipv6-traffic-rules">IPv6 Traffic Rules<a class="headerlink" href="#ipv6-traffic-rules" title="Permanent link">&para;</a></h5>
<p>The next commands set set IPv6 addresses and update the routing table  for both ethernet interfaces. Then, the <code>ptpbridge</code> rules define that that IPv6 ping requests needs to be channeled to the lowest-priority DMA (DMA-2) on both Ethernet interfaces.</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the IPV6 rules - Port 0&quot;</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Setting IPv6 local addresses&quot;</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>ip<span class="w"> </span>-6<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">2001</span>:db8:abcd:0012::1/64<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>up
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>sleep<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>ip<span class="w"> </span>-6<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">2001</span>:db8:abcd:0012::1/64<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>src<span class="w"> </span><span class="m">2001</span>:db8:abcd:0012::1
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">20</span><span class="w"> </span>--ethtype<span class="w"> </span>0x86DD<span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">21</span><span class="w"> </span>--ethtype<span class="w"> </span>0x86DD<span class="w"> </span>--protocol<span class="w"> </span>0x3A<span class="w">  </span>--result<span class="w"> </span>0x2
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a>
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the IPV6 rules - Port 1&quot;</span>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Setting IPv6 local addresses&quot;</span>
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a>ip<span class="w"> </span>-6<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">2001</span>:db8:abcd:0013::1/64<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>up
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a>sleep<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a>ip<span class="w"> </span>-6<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">2001</span>:db8:abcd:0013::1/64<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>src<span class="w"> </span><span class="m">2001</span>:db8:abcd:0013::1
<a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a>
<a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">20</span><span class="w"> </span>--ethtype<span class="w"> </span>0x86DD<span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">21</span><span class="w"> </span>--ethtype<span class="w"> </span>0x86DD<span class="w"> </span>--protocol<span class="w"> </span>0x3A<span class="w">  </span>--result<span class="w"> </span>0x2
</code></pre></div>
<p>Execute the following commands on development kit 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the IPV6 rules - Port 0&quot;</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Setting IPv6 local addresses&quot;</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>ip<span class="w"> </span>-6<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">2001</span>:db8:abcd:0012::2/64<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>up
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>sleep<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>ip<span class="w"> </span>-6<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">2001</span>:db8:abcd:0012::2/64<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>src<span class="w"> </span><span class="m">2001</span>:db8:abcd:0012::2
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">20</span><span class="w"> </span>--ethtype<span class="w"> </span>0x86DD<span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">21</span><span class="w"> </span>--ethtype<span class="w"> </span>0x86DD<span class="w"> </span>--protocol<span class="w"> </span>0x3A<span class="w">  </span>--result<span class="w"> </span>0x2
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Programming the IPV6 rules - Port 1&quot;</span>
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Setting IPv6 local addresses&quot;</span>
<a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a>
<a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a>ip<span class="w"> </span>-6<span class="w"> </span>addr<span class="w"> </span>add<span class="w"> </span><span class="m">2001</span>:db8:abcd:0013::2/64<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>up
<a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a>sleep<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a>ip<span class="w"> </span>-6<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">2001</span>:db8:abcd:0013::2/64<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>src<span class="w"> </span><span class="m">2001</span>:db8:abcd:0013::2
<a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a>
<a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">20</span><span class="w"> </span>--ethtype<span class="w"> </span>0x86DD<span class="w"> </span>--result<span class="w"> </span>0x2
<a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a>ptpbridge<span class="w"> </span>--port<span class="w"> </span><span class="m">1</span><span class="w"> </span>--set-key<span class="w"> </span>--key-index<span class="w"> </span><span class="m">21</span><span class="w"> </span>--ethtype<span class="w"> </span>0x86DD<span class="w"> </span>--protocol<span class="w"> </span>0x3A<span class="w">  </span>--result<span class="w"> </span>0x2
</code></pre></div>
<h3 id="traffic-classes">Traffic Classes<a class="headerlink" href="#traffic-classes" title="Permanent link">&para;</a></h3>
<p>Egress QoS is implemented using the Linux TC (Traffic Control) subsystem alongside the network stack.</p>
<p>The next steps define a qdisc-based TC configuration, which can be paired with filters to route egress packets to specific DMA paths. Packet routing is determined by the <code>skb</code>-&gt;priority field, which must be set according to test requirements. Execute the following commands on both development kits.</p>
<p>The <code>tc</code> filters define:</p>
<p>tc filters route traffic as follows:</p>
<ul>
<li>PTP and iPerf3 on port 540X → DMA 0</li>
<li>iPerf3 on port 530X → DMA 1</li>
<li>iPerf3 on port 520X and ICMP (ping) → DMA 2</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Traffic Class Egress QOS programming - Port - eth1&quot;</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create QDisc...&quot;</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>tc<span class="w"> </span>qdisc<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>clsact
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create Filters - PTP packets to DMA0...&quot;</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="nv">MAC1_ADDR</span><span class="o">=</span><span class="s2">&quot;01:80:C2:00:00:0E&quot;</span>
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="nv">MAC1_HEX</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$MAC1_ADDR</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/://g&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span><span class="s1">&#39;a-f&#39;</span><span class="w"> </span><span class="s1">&#39;A-F&#39;</span><span class="k">)</span>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="nv">MAC2_ADDR</span><span class="o">=</span><span class="s2">&quot;01:1B:19:00:00:00&quot;</span>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="nv">MAC2_HEX</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$MAC2_ADDR</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/://g&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span><span class="s1">&#39;a-f&#39;</span><span class="w"> </span><span class="s1">&#39;A-F&#39;</span><span class="k">)</span>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>dport<span class="w"> </span><span class="m">319</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">17</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>dport<span class="w"> </span><span class="m">320</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">17</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>u16<span class="w"> </span>0x<span class="si">${</span><span class="nv">MAC1_HEX</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">4</span><span class="si">}</span><span class="w"> </span>0xFFFF<span class="w"> </span>at<span class="w"> </span>-14<span class="w"> </span>match<span class="w"> </span>u32<span class="w"> </span>0x<span class="si">${</span><span class="nv">MAC1_HEX</span><span class="p">:</span><span class="nv">4</span><span class="p">:</span><span class="nv">8</span><span class="si">}</span><span class="w"> </span>0xFFFFFFFF<span class="w"> </span>at<span class="w"> </span>-12<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>u16<span class="w"> </span>0x<span class="si">${</span><span class="nv">MAC2_HEX</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">4</span><span class="si">}</span><span class="w"> </span>0xFFFF<span class="w"> </span>at<span class="w"> </span>-14<span class="w"> </span>match<span class="w"> </span>u32<span class="w"> </span>0x<span class="si">${</span><span class="nv">MAC2_HEX</span><span class="p">:</span><span class="nv">4</span><span class="p">:</span><span class="nv">8</span><span class="si">}</span><span class="w"> </span>0xFFFFFFFF<span class="w"> </span>at<span class="w"> </span>-12<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create Filters - IPERF 540X packets to DMA0...&quot;</span>
<a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>dport<span class="w"> </span><span class="m">5401</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>sport<span class="w"> </span><span class="m">5401</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create Filters - IPERF 530X packets to DMA1...&quot;</span>
<a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>dport<span class="w"> </span><span class="m">5301</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>sport<span class="w"> </span><span class="m">5301</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-45-20" name="__codelineno-45-20" href="#__codelineno-45-20"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create Filters - IPERF 520X packets to DMA2...&quot;</span>
<a id="__codelineno-45-21" name="__codelineno-45-21" href="#__codelineno-45-21"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>dport<span class="w"> </span><span class="m">5201</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-45-22" name="__codelineno-45-22" href="#__codelineno-45-22"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>sport<span class="w"> </span><span class="m">5201</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-45-23" name="__codelineno-45-23" href="#__codelineno-45-23"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create Filters - ICMP packets to DMA2...&quot;</span>
<a id="__codelineno-45-24" name="__codelineno-45-24" href="#__codelineno-45-24"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth1<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">1</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-45-25" name="__codelineno-45-25" href="#__codelineno-45-25"></a>
<a id="__codelineno-45-26" name="__codelineno-45-26" href="#__codelineno-45-26"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Traffic Class Egress QOS programming - Port - eth2&quot;</span>
<a id="__codelineno-45-27" name="__codelineno-45-27" href="#__codelineno-45-27"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create QDisc...&quot;</span>
<a id="__codelineno-45-28" name="__codelineno-45-28" href="#__codelineno-45-28"></a>tc<span class="w"> </span>qdisc<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>clsact
<a id="__codelineno-45-29" name="__codelineno-45-29" href="#__codelineno-45-29"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create Filters - PTP packets to DMA0...&quot;</span>
<a id="__codelineno-45-30" name="__codelineno-45-30" href="#__codelineno-45-30"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>dport<span class="w"> </span><span class="m">319</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">17</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-31" name="__codelineno-45-31" href="#__codelineno-45-31"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>dport<span class="w"> </span><span class="m">320</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">17</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-32" name="__codelineno-45-32" href="#__codelineno-45-32"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>u16<span class="w"> </span>0x<span class="si">${</span><span class="nv">MAC1_HEX</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">4</span><span class="si">}</span><span class="w"> </span>0xFFFF<span class="w"> </span>at<span class="w"> </span>-14<span class="w"> </span>match<span class="w"> </span>u32<span class="w"> </span>0x<span class="si">${</span><span class="nv">MAC1_HEX</span><span class="p">:</span><span class="nv">4</span><span class="p">:</span><span class="nv">8</span><span class="si">}</span><span class="w"> </span>0xFFFFFFFF<span class="w"> </span>at<span class="w"> </span>-12<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-33" name="__codelineno-45-33" href="#__codelineno-45-33"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>u16<span class="w"> </span>0x<span class="si">${</span><span class="nv">MAC2_HEX</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">4</span><span class="si">}</span><span class="w"> </span>0xFFFF<span class="w"> </span>at<span class="w"> </span>-14<span class="w"> </span>match<span class="w"> </span>u32<span class="w"> </span>0x<span class="si">${</span><span class="nv">MAC2_HEX</span><span class="p">:</span><span class="nv">4</span><span class="p">:</span><span class="nv">8</span><span class="si">}</span><span class="w"> </span>0xFFFFFFFF<span class="w"> </span>at<span class="w"> </span>-12<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-34" name="__codelineno-45-34" href="#__codelineno-45-34"></a>
<a id="__codelineno-45-35" name="__codelineno-45-35" href="#__codelineno-45-35"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create Filters - IPERF 540X packets to DMA0...&quot;</span>
<a id="__codelineno-45-36" name="__codelineno-45-36" href="#__codelineno-45-36"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>dport<span class="w"> </span><span class="m">5401</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-37" name="__codelineno-45-37" href="#__codelineno-45-37"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>sport<span class="w"> </span><span class="m">5401</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-45-38" name="__codelineno-45-38" href="#__codelineno-45-38"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create Filters - IPERF 530X packets to DMA1...&quot;</span>
<a id="__codelineno-45-39" name="__codelineno-45-39" href="#__codelineno-45-39"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>dport<span class="w"> </span><span class="m">5301</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-45-40" name="__codelineno-45-40" href="#__codelineno-45-40"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>sport<span class="w"> </span><span class="m">5301</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-45-41" name="__codelineno-45-41" href="#__codelineno-45-41"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create Filters - IPERF 520X packets to DMA2...&quot;</span>
<a id="__codelineno-45-42" name="__codelineno-45-42" href="#__codelineno-45-42"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>dport<span class="w"> </span><span class="m">5201</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-45-43" name="__codelineno-45-43" href="#__codelineno-45-43"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>sport<span class="w"> </span><span class="m">5201</span><span class="w"> </span>0xffff<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">6</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-45-44" name="__codelineno-45-44" href="#__codelineno-45-44"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Create Filters - ICMP packets to DMA2...&quot;</span>
<a id="__codelineno-45-45" name="__codelineno-45-45" href="#__codelineno-45-45"></a>tc<span class="w"> </span>filter<span class="w"> </span>add<span class="w"> </span>dev<span class="w"> </span>eth2<span class="w"> </span>egress<span class="w"> </span>prio<span class="w"> </span><span class="m">0</span><span class="w"> </span>u32<span class="w"> </span>match<span class="w"> </span>ip<span class="w"> </span>protocol<span class="w"> </span><span class="m">1</span><span class="w"> </span>0xff<span class="w"> </span>action<span class="w"> </span>skbedit<span class="w"> </span>priority<span class="w"> </span><span class="m">2</span>
</code></pre></div>
<h3 id="ethernet-connectivity-test">Ethernet Connectivity Test<a class="headerlink" href="#ethernet-connectivity-test" title="Permanent link">&para;</a></h3>
<p>After finishing the <a href="#initial-system-configuration">Initial System Configuration</a>, verify the network connectivity between both development kits with the next steps.</p>
<p>Confirm both Ethernet interfaces are up in both development kits:</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ip<span class="w"> </span>addr
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="m">1</span>:<span class="w"> </span>lo:<span class="w"> </span>&lt;LOOPBACK,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">65536</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UNKNOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="w">    </span>link/loopback<span class="w"> </span><span class="m">00</span>:00:00:00:00:00<span class="w"> </span>brd<span class="w"> </span><span class="m">00</span>:00:00:00:00:00
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">127</span>.0.0.1/8<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>lo
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="w">    </span>inet6<span class="w"> </span>::1/128<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>noprefixroute<span class="w"> </span>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="m">2</span>:<span class="w"> </span>eth0:<span class="w"> </span>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen0
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="w">    </span>link/ether<span class="w"> </span>c2:15:53:59:8b:9f<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="m">3</span>:<span class="w"> </span>teql0:<span class="w"> </span>&lt;NOARP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>noop<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">100</span>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="w">    </span>link/void<span class="w"> </span>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a><span class="m">4</span>:<span class="w"> </span>eth1:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="w">    </span>link/ether<span class="w"> </span>a2:0a:92:62:93:4c<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.121.1/32<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth1
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="w">    </span>inet6<span class="w"> </span><span class="m">2001</span>:db8:abcd:12::1/64<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a><span class="m">5</span>:<span class="w"> </span>eth2:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="w">    </span>link/ether<span class="w"> </span><span class="m">86</span>:28:4b:90:11:dd<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.122.1/32<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth2
<a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a><span class="w">    </span>inet6<span class="w"> </span><span class="m">2001</span>:db8:abcd:13::1/64<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>
<a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<p>Execute the following commands on development kit 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ip<span class="w"> </span>addr
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="m">1</span>:<span class="w"> </span>lo:<span class="w"> </span>&lt;LOOPBACK,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">65536</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UNKNOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">    </span>link/loopback<span class="w"> </span><span class="m">00</span>:00:00:00:00:00<span class="w"> </span>brd<span class="w"> </span><span class="m">00</span>:00:00:00:00:00
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">127</span>.0.0.1/8<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>lo
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="w">    </span>inet6<span class="w"> </span>::1/128<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>noprefixroute<span class="w"> </span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="m">2</span>:<span class="w"> </span>eth0:<span class="w"> </span>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen0
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a><span class="w">    </span>link/ether<span class="w"> </span>fa:06:aa:f6:2b:48<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a><span class="m">3</span>:<span class="w"> </span>teql0:<span class="w"> </span>&lt;NOARP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>noop<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">100</span>
<a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a><span class="w">    </span>link/void<span class="w"> </span>
<a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="m">4</span>:<span class="w"> </span>eth1:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a><span class="w">    </span>link/ether<span class="w"> </span>be:3b:79:e1:0d:ac<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.121.2/32<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth1
<a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a><span class="w">    </span>inet6<span class="w"> </span><span class="m">2001</span>:db8:abcd:12::2/64<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>
<a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a><span class="m">5</span>:<span class="w"> </span>eth2:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a><span class="w">    </span>link/ether<span class="w"> </span>e2:4c:47:71:75:4c<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.122.2/32<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth2
<a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a><span class="w">    </span>inet6<span class="w"> </span><span class="m">2001</span>:db8:abcd:13::2/64<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>
<a id="__codelineno-47-23" name="__codelineno-47-23" href="#__codelineno-47-23"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-47-24" name="__codelineno-47-24" href="#__codelineno-47-24"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<p>Verify connectivity between development kits using <code>ping</code>:</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ping<span class="w"> </span>-c<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">192</span>.168.121.2<span class="w">                             </span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>PING<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span><span class="o">(</span><span class="m">192</span>.168.121.2<span class="o">)</span>:<span class="w"> </span><span class="m">56</span><span class="w"> </span>data<span class="w"> </span>bytes
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.121.2:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">0</span>.298<span class="w"> </span>ms
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.121.2:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">0</span>.196<span class="w"> </span>ms
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.121.2:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">0</span>.102<span class="w"> </span>ms
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>---<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="m">3</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">3</span><span class="w"> </span>packets<span class="w"> </span>received,<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>packet<span class="w"> </span>loss
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>round-trip<span class="w"> </span>min/avg/max<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.102/0.198/0.298<span class="w"> </span>ms
<a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<p>Execute the following commands on development kit 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ping<span class="w"> </span>-c<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">192</span>.168.121.1<span class="w">                             </span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>PING<span class="w"> </span><span class="m">192</span>.168.121.1<span class="w"> </span><span class="o">(</span><span class="m">192</span>.168.121.1<span class="o">)</span>:<span class="w"> </span><span class="m">56</span><span class="w"> </span>data<span class="w"> </span>bytes
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.121.1:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">0</span>.421<span class="w"> </span>ms
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.121.1:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">0</span>.124<span class="w"> </span>ms
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.121.1:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">0</span>.117<span class="w"> </span>ms
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a>---<span class="w"> </span><span class="m">192</span>.168.121.1<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="m">3</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">3</span><span class="w"> </span>packets<span class="w"> </span>received,<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>packet<span class="w"> </span>loss
<a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>round-trip<span class="w"> </span>min/avg/max<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.117/0.220/0.421<span class="w"> </span>ms
<a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<p>Before running a test, ensure the hardware setup matches the <a href="#hardware-setup">Hardware Setup</a> section, and you have executed the steps listed in <a href="#initial-system-configuration">Initial System Configuration</a>.</p>
<h3 id="run-ping-test">Run Ping Test<a class="headerlink" href="#run-ping-test" title="Permanent link">&para;</a></h3>
<p>The transcript below shows a ping test from development kit 1 serial session. 100,000 pings are sent to development kit 2. DMA-2 handles egress traffic, verified by polling its interrupt count. As shown, all ping requests were correctly filtered to DMA-2.</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ping<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span>.0001<span class="w"> </span>-q<span class="w"> </span>-c<span class="w"> </span><span class="m">100000</span><span class="w"> </span>-I<span class="w"> </span>eth1<span class="w"> </span><span class="m">192</span>.168.121.2
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>PING<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span><span class="o">(</span><span class="m">192</span>.168.121.2<span class="o">)</span>:<span class="w"> </span><span class="m">56</span><span class="w"> </span>data<span class="w"> </span>bytes
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a>---<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="m">100000</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">99997</span><span class="w"> </span>packets<span class="w"> </span>received,<span class="w"> </span><span class="m">3</span><span class="w"> </span>duplicates,<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>packet<span class="w"> </span>loss
<a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a>round-trip<span class="w"> </span>min/avg/max<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.065/0.091/3.259<span class="w"> </span>ms
<a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>cat<span class="w"> </span>/proc/interrupts<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>eth1
<a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="m">25</span>:<span class="w">         </span><span class="m">57</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">72</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="m">26</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">73</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a><span class="m">27</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">70</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a><span class="m">28</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">71</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a><span class="m">29</span>:<span class="w">         </span><span class="m">11</span><span class="w">          </span><span class="m">0</span><span class="w">     </span><span class="m">100005</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">68</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a><span class="m">30</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span><span class="m">100008</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">69</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<p>Execute the following commands on development kit 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ping<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span>.0001<span class="w"> </span>-q<span class="w"> </span>-c<span class="w"> </span><span class="m">100000</span><span class="w"> </span>-I<span class="w"> </span>eth1<span class="w"> </span><span class="m">192</span>.168.121.1
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>PING<span class="w"> </span><span class="m">192</span>.168.121.1<span class="w"> </span><span class="o">(</span><span class="m">192</span>.168.121.1<span class="o">)</span>:<span class="w"> </span><span class="m">56</span><span class="w"> </span>data<span class="w"> </span>bytes
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>---<span class="w"> </span><span class="m">192</span>.168.121.1<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="m">100000</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">99990</span><span class="w"> </span>packets<span class="w"> </span>received,<span class="w"> </span><span class="m">10</span><span class="w"> </span>duplicates,<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>packet<span class="w"> </span>loss
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>round-trip<span class="w"> </span>min/avg/max<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.064/0.090/2.565<span class="w"> </span>ms
<a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>cat<span class="w"> </span>/proc/interrupts<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>eth1
<a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a><span class="w"> </span><span class="m">31</span>:<span class="w">         </span><span class="m">36</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">         </span><span class="m">44</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">66</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a><span class="w"> </span><span class="m">32</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">67</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-51-10" name="__codelineno-51-10" href="#__codelineno-51-10"></a><span class="w"> </span><span class="m">33</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">64</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-51-11" name="__codelineno-51-11" href="#__codelineno-51-11"></a><span class="w"> </span><span class="m">34</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">65</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-51-12" name="__codelineno-51-12" href="#__codelineno-51-12"></a><span class="w"> </span><span class="m">35</span>:<span class="w">         </span><span class="m">11</span><span class="w">     </span><span class="m">100015</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">62</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-51-13" name="__codelineno-51-13" href="#__codelineno-51-13"></a><span class="w"> </span><span class="m">36</span>:<span class="w">          </span><span class="m">0</span><span class="w">     </span><span class="m">100007</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">63</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-51-14" name="__codelineno-51-14" href="#__codelineno-51-14"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<h3 id="run-iperf3-test">Run iPerf3 Test<a class="headerlink" href="#run-iperf3-test" title="Permanent link">&para;</a></h3>
<p>The iPerf3 test uses development kit 2 as the server and development kit 1 as the client. Start the iPerf3 server on kit 2 with parallel instances listening on ports 5201, 5301, and 5401.</p>
<p>Execute the following commands on development kit 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>iperf3<span class="w"> </span>-D<span class="w"> </span>-s<span class="w"> </span>-B<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>-p<span class="w"> </span><span class="m">5201</span><span class="w"> </span>&gt;<span class="w"> </span>/var/log/iperf.eth1.1<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">&amp;</span>
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>iperf3<span class="w"> </span>-D<span class="w"> </span>-s<span class="w"> </span>-B<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>-p<span class="w"> </span><span class="m">5301</span><span class="w"> </span>&gt;<span class="w"> </span>/var/log/iperf.eth1.2<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">&amp;</span>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>iperf3<span class="w"> </span>-D<span class="w"> </span>-s<span class="w"> </span>-B<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>-p<span class="w"> </span><span class="m">5401</span><span class="w"> </span>&gt;<span class="w"> </span>/var/log/iperf.eth1.3<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">&amp;</span>
</code></pre></div>
<h4 id="iperf-traffic-to-dma-0">iPerf traffic to DMA 0<a class="headerlink" href="#iperf-traffic-to-dma-0" title="Permanent link">&para;</a></h4>
<p>The transcript below shows an iPerf3 test from development kit 1, targeting port 5401 on the server and using port 5402 locally. DMA-0 usage (highest priority) is confirmed by the interrupt count on its associated queue.</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>iperf3<span class="w"> </span>-M<span class="w"> </span><span class="m">1460</span><span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>-t<span class="w"> </span><span class="m">80000</span><span class="w"> </span>-p<span class="w"> </span><span class="m">5401</span><span class="w"> </span>--cport<span class="w"> </span><span class="m">5402</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>Connecting<span class="w"> </span>to<span class="w"> </span>host<span class="w"> </span><span class="m">192</span>.168.121.2,<span class="w"> </span>port<span class="w"> </span><span class="m">5401</span>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="m">192</span>.168.121.1<span class="w"> </span>port<span class="w"> </span><span class="m">5402</span><span class="w"> </span>connected<span class="w"> </span>to<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>port<span class="w"> </span><span class="m">5401</span>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="o">[</span><span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>Interval<span class="w">           </span>Transfer<span class="w">     </span>Bitrate<span class="w">         </span>Retr<span class="w">  </span>Cwnd
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-1.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.8<span class="w"> </span>MBytes<span class="w">   </span><span class="m">543</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">32</span><span class="w">    </span><span class="m">158</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">1</span>.00-2.00<span class="w">   </span>sec<span class="w">  </span><span class="m">63</span>.9<span class="w"> </span>MBytes<span class="w">   </span><span class="m">536</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">38</span><span class="w">    </span><span class="m">119</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">2</span>.00-3.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.1<span class="w"> </span>MBytes<span class="w">   </span><span class="m">537</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">29</span><span class="w">    </span><span class="m">153</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">3</span>.00-4.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.5<span class="w"> </span>MBytes<span class="w">   </span><span class="m">541</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">35</span><span class="w">    </span><span class="m">144</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">4</span>.00-5.00<span class="w">   </span>sec<span class="w">  </span><span class="m">63</span>.9<span class="w"> </span>MBytes<span class="w">   </span><span class="m">536</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">25</span><span class="w">    </span><span class="m">146</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">5</span>.00-6.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.1<span class="w"> </span>MBytes<span class="w">   </span><span class="m">538</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">26</span><span class="w">    </span><span class="m">120</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">6</span>.00-7.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.2<span class="w"> </span>MBytes<span class="w">   </span><span class="m">539</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">36</span><span class="w">    </span><span class="m">150</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">7</span>.00-8.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.4<span class="w"> </span>MBytes<span class="w">   </span><span class="m">540</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">23</span><span class="w">    </span><span class="m">148</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-13" name="__codelineno-53-13" href="#__codelineno-53-13"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">8</span>.00-9.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.6<span class="w"> </span>MBytes<span class="w">   </span><span class="m">542</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">39</span><span class="w">    </span><span class="m">120</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-14" name="__codelineno-53-14" href="#__codelineno-53-14"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">9</span>.00-10.00<span class="w">  </span>sec<span class="w">  </span><span class="m">64</span>.0<span class="w"> </span>MBytes<span class="w">   </span><span class="m">537</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">37</span><span class="w">    </span><span class="m">148</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-15" name="__codelineno-53-15" href="#__codelineno-53-15"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">  </span><span class="m">10</span>.00-11.00<span class="w">  </span>sec<span class="w">  </span><span class="m">64</span>.4<span class="w"> </span>MBytes<span class="w">   </span><span class="m">540</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">56</span><span class="w">    </span><span class="m">154</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-16" name="__codelineno-53-16" href="#__codelineno-53-16"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">  </span><span class="m">11</span>.00-11.38<span class="w">  </span>sec<span class="w">  </span><span class="m">24</span>.2<span class="w"> </span>MBytes<span class="w">   </span><span class="m">534</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">8</span><span class="w">    </span><span class="m">141</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-53-17" name="__codelineno-53-17" href="#__codelineno-53-17"></a>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-
<a id="__codelineno-53-18" name="__codelineno-53-18" href="#__codelineno-53-18"></a><span class="o">[</span><span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>Interval<span class="w">           </span>Transfer<span class="w">     </span>Bitrate<span class="w">         </span>Retr
<a id="__codelineno-53-19" name="__codelineno-53-19" href="#__codelineno-53-19"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-11.38<span class="w">  </span>sec<span class="w">   </span><span class="m">732</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">539</span><span class="w"> </span>Mbits/sec<span class="w">  </span><span class="m">384</span><span class="w">            </span>sender
<a id="__codelineno-53-20" name="__codelineno-53-20" href="#__codelineno-53-20"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-11.38<span class="w">  </span>sec<span class="w">  </span><span class="m">0</span>.00<span class="w"> </span>Bytes<span class="w">  </span><span class="m">0</span>.00<span class="w"> </span>bits/sec<span class="w">                  </span>receiver
<a id="__codelineno-53-21" name="__codelineno-53-21" href="#__codelineno-53-21"></a>iperf3:<span class="w"> </span>interrupt<span class="w"> </span>-<span class="w"> </span>the<span class="w"> </span>client<span class="w"> </span>has<span class="w"> </span>terminated
<a id="__codelineno-53-22" name="__codelineno-53-22" href="#__codelineno-53-22"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<h4 id="iperf-traffic-to-dma-1">iPerf traffic to DMA 1<a class="headerlink" href="#iperf-traffic-to-dma-1" title="Permanent link">&para;</a></h4>
<p>The transcript below shows an iPerf3 test from development kit 1, targeting port 5301 on the server and using port 5302 locally. DMA-1 usage is confirmed by the interrupt count on its associated queue.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>iperf3<span class="w"> </span>-M<span class="w"> </span><span class="m">1460</span><span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>-t<span class="w"> </span><span class="m">80000</span><span class="w"> </span>-p<span class="w"> </span><span class="m">5301</span><span class="w"> </span>--cport<span class="w"> </span><span class="m">5302</span>
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>Connecting<span class="w"> </span>to<span class="w"> </span>host<span class="w"> </span><span class="m">192</span>.168.121.2,<span class="w"> </span>port<span class="w"> </span><span class="m">5301</span>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>Connecting<span class="w"> </span>to<span class="w"> </span>host<span class="w"> </span><span class="m">192</span>.168.121.2,<span class="w"> </span>port<span class="w"> </span><span class="m">5301</span>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="m">192</span>.168.121.1<span class="w"> </span>port<span class="w"> </span><span class="m">5302</span><span class="w"> </span>connected<span class="w"> </span>to<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>port<span class="w"> </span><span class="m">5301</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="o">[</span><span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>Interval<span class="w">           </span>Transfer<span class="w">     </span>Bitrate<span class="w">         </span>Retr<span class="w">  </span>Cwnd
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-1.00<span class="w">   </span>sec<span class="w">  </span><span class="m">65</span>.0<span class="w"> </span>MBytes<span class="w">   </span><span class="m">544</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">35</span><span class="w">    </span><span class="m">115</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">1</span>.00-2.00<span class="w">   </span>sec<span class="w">  </span><span class="m">65</span>.2<span class="w"> </span>MBytes<span class="w">   </span><span class="m">547</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">28</span><span class="w">    </span><span class="m">158</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">2</span>.00-3.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.2<span class="w"> </span>MBytes<span class="w">   </span><span class="m">539</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">42</span><span class="w">    </span><span class="m">158</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">3</span>.00-4.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.5<span class="w"> </span>MBytes<span class="w">   </span><span class="m">541</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">36</span><span class="w">    </span><span class="m">141</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">4</span>.00-5.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.4<span class="w"> </span>MBytes<span class="w">   </span><span class="m">540</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">22</span><span class="w">    </span><span class="m">137</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">5</span>.00-6.00<span class="w">   </span>sec<span class="w">  </span><span class="m">63</span>.6<span class="w"> </span>MBytes<span class="w">   </span><span class="m">533</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">39</span><span class="w">    </span><span class="m">147</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">6</span>.00-7.00<span class="w">   </span>sec<span class="w">  </span><span class="m">63</span>.9<span class="w"> </span>MBytes<span class="w">   </span><span class="m">536</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">42</span><span class="w">    </span><span class="m">157</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">7</span>.00-8.00<span class="w">   </span>sec<span class="w">  </span><span class="m">63</span>.8<span class="w"> </span>MBytes<span class="w">   </span><span class="m">535</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">23</span><span class="w">    </span><span class="m">150</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">8</span>.00-9.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.1<span class="w"> </span>MBytes<span class="w">   </span><span class="m">538</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">42</span><span class="w">    </span><span class="m">143</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-15" name="__codelineno-54-15" href="#__codelineno-54-15"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">9</span>.00-10.00<span class="w">  </span>sec<span class="w">  </span><span class="m">64</span>.8<span class="w"> </span>MBytes<span class="w">   </span><span class="m">543</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">39</span><span class="w">    </span><span class="m">151</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-16" name="__codelineno-54-16" href="#__codelineno-54-16"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">  </span><span class="m">10</span>.00-10.81<span class="w">  </span>sec<span class="w">  </span><span class="m">51</span>.0<span class="w"> </span>MBytes<span class="w">   </span><span class="m">531</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">18</span><span class="w">    </span><span class="m">116</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-54-17" name="__codelineno-54-17" href="#__codelineno-54-17"></a>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-
<a id="__codelineno-54-18" name="__codelineno-54-18" href="#__codelineno-54-18"></a><span class="o">[</span><span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>Interval<span class="w">           </span>Transfer<span class="w">     </span>Bitrate<span class="w">         </span>Retr
<a id="__codelineno-54-19" name="__codelineno-54-19" href="#__codelineno-54-19"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-10.81<span class="w">  </span>sec<span class="w">   </span><span class="m">695</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">539</span><span class="w"> </span>Mbits/sec<span class="w">  </span><span class="m">366</span><span class="w">            </span>sender
<a id="__codelineno-54-20" name="__codelineno-54-20" href="#__codelineno-54-20"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-10.81<span class="w">  </span>sec<span class="w">  </span><span class="m">0</span>.00<span class="w"> </span>Bytes<span class="w">  </span><span class="m">0</span>.00<span class="w"> </span>bits/sec<span class="w">                  </span>receiver
<a id="__codelineno-54-21" name="__codelineno-54-21" href="#__codelineno-54-21"></a>iperf3:<span class="w"> </span>interrupt<span class="w"> </span>-<span class="w"> </span>the<span class="w"> </span>client<span class="w"> </span>has<span class="w"> </span>terminated
<a id="__codelineno-54-22" name="__codelineno-54-22" href="#__codelineno-54-22"></a>
<a id="__codelineno-54-23" name="__codelineno-54-23" href="#__codelineno-54-23"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>cat<span class="w"> </span>/proc/interrupts<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>eth1
<a id="__codelineno-54-24" name="__codelineno-54-24" href="#__codelineno-54-24"></a><span class="w"> </span><span class="m">25</span>:<span class="w">     </span><span class="m">415767</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">72</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-54-25" name="__codelineno-54-25" href="#__codelineno-54-25"></a><span class="w"> </span><span class="m">26</span>:<span class="w">     </span><span class="m">365267</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">73</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-54-26" name="__codelineno-54-26" href="#__codelineno-54-26"></a><span class="w"> </span><span class="m">27</span>:<span class="w">          </span><span class="m">0</span><span class="w">     </span><span class="m">186195</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">70</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-54-27" name="__codelineno-54-27" href="#__codelineno-54-27"></a><span class="w"> </span><span class="m">28</span>:<span class="w">          </span><span class="m">0</span><span class="w">      </span><span class="m">38260</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">71</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-54-28" name="__codelineno-54-28" href="#__codelineno-54-28"></a><span class="w"> </span><span class="m">29</span>:<span class="w">         </span><span class="m">11</span><span class="w">          </span><span class="m">0</span><span class="w">     </span><span class="m">100011</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">68</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-54-29" name="__codelineno-54-29" href="#__codelineno-54-29"></a><span class="w"> </span><span class="m">30</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span><span class="m">100018</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">69</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-54-30" name="__codelineno-54-30" href="#__codelineno-54-30"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<h4 id="iperf-traffic-to-dma-2">iPerf traffic to DMA 2<a class="headerlink" href="#iperf-traffic-to-dma-2" title="Permanent link">&para;</a></h4>
<p>The transcript below shows an iPerf3 test from development kit 1 using port 5201 on the server and 5202 on the client. DMA-2 usage (lowest priority) is confirmed by the interrupt count on its associated queue.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>iperf3<span class="w"> </span>-M<span class="w"> </span><span class="m">1460</span><span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>-t<span class="w"> </span><span class="m">80000</span><span class="w"> </span>-p<span class="w"> </span><span class="m">5201</span><span class="w"> </span>--cport<span class="w"> </span><span class="m">5202</span><span class="w">    </span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>Connecting<span class="w"> </span>to<span class="w"> </span>host<span class="w"> </span><span class="m">192</span>.168.121.2,<span class="w"> </span>port<span class="w"> </span><span class="m">5201</span>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="m">192</span>.168.121.1<span class="w"> </span>port<span class="w"> </span><span class="m">5202</span><span class="w"> </span>connected<span class="w"> </span>to<span class="w"> </span><span class="m">192</span>.168.121.2<span class="w"> </span>port<span class="w"> </span><span class="m">5201</span>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="o">[</span><span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>Interval<span class="w">           </span>Transfer<span class="w">     </span>Bitrate<span class="w">         </span>Retr<span class="w">  </span>Cwnd
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-1.00<span class="w">   </span>sec<span class="w">  </span><span class="m">66</span>.1<span class="w"> </span>MBytes<span class="w">   </span><span class="m">554</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">39</span><span class="w">    </span><span class="m">116</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">1</span>.00-2.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.4<span class="w"> </span>MBytes<span class="w">   </span><span class="m">540</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">51</span><span class="w">    </span><span class="m">123</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">2</span>.00-3.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.6<span class="w"> </span>MBytes<span class="w">   </span><span class="m">542</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">23</span><span class="w">    </span><span class="m">146</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">3</span>.00-4.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.0<span class="w"> </span>MBytes<span class="w">   </span><span class="m">537</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">40</span><span class="w">    </span><span class="m">146</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">4</span>.00-5.00<span class="w">   </span>sec<span class="w">  </span><span class="m">63</span>.9<span class="w"> </span>MBytes<span class="w">   </span><span class="m">536</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">34</span><span class="w">    </span><span class="m">154</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">5</span>.00-6.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.8<span class="w"> </span>MBytes<span class="w">   </span><span class="m">543</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">46</span><span class="w">    </span><span class="m">144</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">6</span>.00-7.00<span class="w">   </span>sec<span class="w">  </span><span class="m">64</span>.4<span class="w"> </span>MBytes<span class="w">   </span><span class="m">540</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">34</span><span class="w">    </span><span class="m">156</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">7</span>.00-8.00<span class="w">   </span>sec<span class="w">  </span><span class="m">63</span>.4<span class="w"> </span>MBytes<span class="w">   </span><span class="m">532</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">28</span><span class="w">    </span><span class="m">168</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">8</span>.00-9.00<span class="w">   </span>sec<span class="w">  </span><span class="m">63</span>.9<span class="w"> </span>MBytes<span class="w">   </span><span class="m">536</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">34</span><span class="w">    </span><span class="m">130</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">9</span>.00-10.00<span class="w">  </span>sec<span class="w">  </span><span class="m">64</span>.2<span class="w"> </span>MBytes<span class="w">   </span><span class="m">539</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">25</span><span class="w">    </span><span class="m">158</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-15" name="__codelineno-55-15" href="#__codelineno-55-15"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">  </span><span class="m">10</span>.00-11.00<span class="w">  </span>sec<span class="w">  </span><span class="m">64</span>.2<span class="w"> </span>MBytes<span class="w">   </span><span class="m">539</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">35</span><span class="w">    </span><span class="m">160</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-16" name="__codelineno-55-16" href="#__codelineno-55-16"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">  </span><span class="m">11</span>.00-11.34<span class="w">  </span>sec<span class="w">  </span><span class="m">22</span>.0<span class="w"> </span>MBytes<span class="w">   </span><span class="m">546</span><span class="w"> </span>Mbits/sec<span class="w">   </span><span class="m">22</span><span class="w">    </span><span class="m">119</span><span class="w"> </span>KBytes<span class="w">       </span>
<a id="__codelineno-55-17" name="__codelineno-55-17" href="#__codelineno-55-17"></a>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-
<a id="__codelineno-55-18" name="__codelineno-55-18" href="#__codelineno-55-18"></a><span class="o">[</span><span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>Interval<span class="w">           </span>Transfer<span class="w">     </span>Bitrate<span class="w">         </span>Retr
<a id="__codelineno-55-19" name="__codelineno-55-19" href="#__codelineno-55-19"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-11.34<span class="w">  </span>sec<span class="w">   </span><span class="m">730</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">540</span><span class="w"> </span>Mbits/sec<span class="w">  </span><span class="m">411</span><span class="w">            </span>sender
<a id="__codelineno-55-20" name="__codelineno-55-20" href="#__codelineno-55-20"></a><span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-11.34<span class="w">  </span>sec<span class="w">  </span><span class="m">0</span>.00<span class="w"> </span>Bytes<span class="w">  </span><span class="m">0</span>.00<span class="w"> </span>bits/sec<span class="w">                  </span>receiver
<a id="__codelineno-55-21" name="__codelineno-55-21" href="#__codelineno-55-21"></a>iperf3:<span class="w"> </span>interrupt<span class="w"> </span>-<span class="w"> </span>the<span class="w"> </span>client<span class="w"> </span>has<span class="w"> </span>terminated
<a id="__codelineno-55-22" name="__codelineno-55-22" href="#__codelineno-55-22"></a>
<a id="__codelineno-55-23" name="__codelineno-55-23" href="#__codelineno-55-23"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>cat<span class="w"> </span>/proc/interrupts<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>eth1
<a id="__codelineno-55-24" name="__codelineno-55-24" href="#__codelineno-55-24"></a><span class="w"> </span><span class="m">25</span>:<span class="w">     </span><span class="m">415790</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">72</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-55-25" name="__codelineno-55-25" href="#__codelineno-55-25"></a><span class="w"> </span><span class="m">26</span>:<span class="w">     </span><span class="m">365267</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">73</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-55-26" name="__codelineno-55-26" href="#__codelineno-55-26"></a><span class="w"> </span><span class="m">27</span>:<span class="w">          </span><span class="m">0</span><span class="w">     </span><span class="m">186195</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">70</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-55-27" name="__codelineno-55-27" href="#__codelineno-55-27"></a><span class="w"> </span><span class="m">28</span>:<span class="w">          </span><span class="m">0</span><span class="w">      </span><span class="m">38260</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">71</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-55-28" name="__codelineno-55-28" href="#__codelineno-55-28"></a><span class="w"> </span><span class="m">29</span>:<span class="w">         </span><span class="m">11</span><span class="w">          </span><span class="m">0</span><span class="w">     </span><span class="m">315979</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">68</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-55-29" name="__codelineno-55-29" href="#__codelineno-55-29"></a><span class="w"> </span><span class="m">30</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span><span class="m">133629</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">69</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-55-30" name="__codelineno-55-30" href="#__codelineno-55-30"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<h3 id="run-packet-generator-test">Run Packet Generator Test<a class="headerlink" href="#run-packet-generator-test" title="Permanent link">&para;</a></h3>
<p>System packet generators operate independently of the HPS and DMA engines. Their datapath traverses the Packet Switch and can saturate the 25GbE ports. No <code>tc</code> filters apply, as they are not HPS-connected and not software-controlled. Bandwidth allocation is managed solely by the Packet Switch arbiter.</p>
<p>Test execution involves configuring traffic parameters for the generators. The transcript below shows initial setup and traffic start. The <code>--dump</code> flag captures packet generator status registers, indicating TX bandwidth utilization of ~25.35 Gbps.</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--traffic<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--dyn-pkt-mode<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--fixed-gap<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--pkt-len-mode<span class="w"> </span>0x01<span class="w"> </span>--num-idle-cycles<span class="w"> </span><span class="m">8</span><span class="w"> </span>--packet-checker<span class="w"> </span><span class="nb">true</span><span class="w">  </span>--one-shot<span class="w"> </span><span class="nb">false</span><span class="w"> </span>--tx-pkt-size<span class="w"> </span><span class="m">1024</span><span class="w"> </span>--tx-max-pkt-size<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>Tx<span class="w"> </span>traffic<span class="w"> </span>state<span class="w"> </span>set:<span class="w"> </span>Disabled
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>Dynamic<span class="w"> </span>Packet<span class="w"> </span>Mode<span class="w"> </span>set:<span class="w"> </span>Enabled
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>Fixed<span class="w"> </span>Gap<span class="w"> </span>set:<span class="w"> </span>Enabled
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>Packet<span class="w"> </span>length<span class="w"> </span>mode<span class="w"> </span>set:<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a>Number<span class="w"> </span>of<span class="w"> </span>Idle<span class="w"> </span>Cycles<span class="w"> </span>set:<span class="w"> </span><span class="m">8</span>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a>Pkt<span class="w"> </span>Checker<span class="w"> </span>set:<span class="w"> </span>Enabled
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a>One<span class="w"> </span>Shot<span class="w"> </span>mode<span class="w"> </span>set:<span class="w"> </span>Disabled
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a>Tx<span class="w"> </span>Packet<span class="w"> </span>Size<span class="w"> </span>set:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a>Max<span class="w"> </span>Tx<span class="w"> </span>Packet<span class="w"> </span>Size<span class="w"> </span>set:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--traffic<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a>Tx<span class="w"> </span>traffic<span class="w"> </span>state<span class="w"> </span>set:<span class="w"> </span>Enabled
<a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--dump
<a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a>Config<span class="w"> </span>Control:<span class="w"> </span>0x8635
<a id="__codelineno-56-15" name="__codelineno-56-15" href="#__codelineno-56-15"></a><span class="w">        </span>Tx<span class="w"> </span>traffic:<span class="w"> </span>Enabled
<a id="__codelineno-56-16" name="__codelineno-56-16" href="#__codelineno-56-16"></a><span class="w">        </span>Packet<span class="w"> </span>Generation<span class="w"> </span>Mode:<span class="w"> </span>Continuous<span class="w"> </span>
<a id="__codelineno-56-17" name="__codelineno-56-17" href="#__codelineno-56-17"></a><span class="w">        </span>Soft<span class="w"> </span>Reset:<span class="w"> </span>Disabled
<a id="__codelineno-56-18" name="__codelineno-56-18" href="#__codelineno-56-18"></a><span class="w">        </span>Dynamic<span class="w"> </span>Mode:<span class="w"> </span>Enabled
<a id="__codelineno-56-19" name="__codelineno-56-19" href="#__codelineno-56-19"></a><span class="w">        </span>Pkt<span class="w"> </span>Checker:<span class="w"> </span>Enabled
<a id="__codelineno-56-20" name="__codelineno-56-20" href="#__codelineno-56-20"></a><span class="w">        </span>Counter<span class="w"> </span>Snapshot<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-56-21" name="__codelineno-56-21" href="#__codelineno-56-21"></a><span class="w">        </span>Counter<span class="w"> </span>Clear<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-56-22" name="__codelineno-56-22" href="#__codelineno-56-22"></a><span class="w">        </span>Internal<span class="w"> </span>Counter<span class="w"> </span>Clear<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-56-23" name="__codelineno-56-23" href="#__codelineno-56-23"></a><span class="w">        </span>Fixed<span class="w"> </span>Gap:<span class="w"> </span>Enabled
<a id="__codelineno-56-24" name="__codelineno-56-24" href="#__codelineno-56-24"></a><span class="w">        </span>Packet<span class="w"> </span>Length<span class="w"> </span>Mode:<span class="w"> </span>Fixed
<a id="__codelineno-56-25" name="__codelineno-56-25" href="#__codelineno-56-25"></a><span class="w">        </span>Number<span class="w"> </span>of<span class="w"> </span>Idle<span class="w"> </span>Cycles:<span class="w"> </span><span class="m">8</span>
<a id="__codelineno-56-26" name="__codelineno-56-26" href="#__codelineno-56-26"></a>Destination<span class="w"> </span>Mac<span class="w"> </span>Address:<span class="w"> </span><span class="m">12</span>:34:56:78:0A:02
<a id="__codelineno-56-27" name="__codelineno-56-27" href="#__codelineno-56-27"></a>Source<span class="w"> </span>Mac<span class="w"> </span>Address:<span class="w"> </span><span class="m">12</span>:34:56:78:0A:01
<a id="__codelineno-56-28" name="__codelineno-56-28" href="#__codelineno-56-28"></a>Number<span class="w"> </span>of<span class="w"> </span>Packets:<span class="w"> </span><span class="m">4294967295</span>
<a id="__codelineno-56-29" name="__codelineno-56-29" href="#__codelineno-56-29"></a>Packet<span class="w"> </span>Size<span class="w"> </span>Config<span class="w"> </span>Control:<span class="w"> </span>0x4000400
<a id="__codelineno-56-30" name="__codelineno-56-30" href="#__codelineno-56-30"></a><span class="w">        </span>Tx<span class="w"> </span>Packet<span class="w"> </span>Size:<span class="w"> </span><span class="m">1024</span><span class="w"> </span>Tx<span class="w"> </span>Max<span class="w"> </span>Packet<span class="w"> </span>Size:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-56-31" name="__codelineno-56-31" href="#__codelineno-56-31"></a>Packet<span class="w"> </span>Generator<span class="w"> </span>Status:<span class="w"> </span>0x1e
<a id="__codelineno-56-32" name="__codelineno-56-32" href="#__codelineno-56-32"></a><span class="w">        </span>SADB<span class="w"> </span>configuration<span class="w"> </span>status:<span class="w"> </span>Incomplete
<a id="__codelineno-56-33" name="__codelineno-56-33" href="#__codelineno-56-33"></a><span class="w">        </span>System<span class="w"> </span>Reset<span class="w"> </span>Sequence<span class="w"> </span>status:<span class="w"> </span>Complete
<a id="__codelineno-56-34" name="__codelineno-56-34" href="#__codelineno-56-34"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>tx_lanes_stable<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-56-35" name="__codelineno-56-35" href="#__codelineno-56-35"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>tx_pll_locked<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-56-36" name="__codelineno-56-36" href="#__codelineno-56-36"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>rx_pcs<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-56-37" name="__codelineno-56-37" href="#__codelineno-56-37"></a>Packet<span class="w"> </span>Checker<span class="w"> </span>Status:<span class="w"> </span>0x0
<a id="__codelineno-56-38" name="__codelineno-56-38" href="#__codelineno-56-38"></a><span class="w">        </span>Data<span class="w"> </span>Mismatch<span class="w"> </span>status:<span class="w"> </span>Not<span class="w"> </span>seen
<a id="__codelineno-56-39" name="__codelineno-56-39" href="#__codelineno-56-39"></a>TX<span class="w"> </span>Start<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">37451629</span>
<a id="__codelineno-56-40" name="__codelineno-56-40" href="#__codelineno-56-40"></a>TX<span class="w"> </span>End<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">37451846</span>
<a id="__codelineno-56-41" name="__codelineno-56-41" href="#__codelineno-56-41"></a>TX<span class="w"> </span>Error<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-56-42" name="__codelineno-56-42" href="#__codelineno-56-42"></a>RX<span class="w"> </span>Start<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-56-43" name="__codelineno-56-43" href="#__codelineno-56-43"></a>RX<span class="w"> </span>End<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-56-44" name="__codelineno-56-44" href="#__codelineno-56-44"></a>RX<span class="w"> </span>Error<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-56-45" name="__codelineno-56-45" href="#__codelineno-56-45"></a>Pkt<span class="w"> </span>Checker<span class="w"> </span>Live<span class="w"> </span>Counter:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-56-46" name="__codelineno-56-46" href="#__codelineno-56-46"></a>PKT<span class="w"> </span>TX<span class="w"> </span>Byte<span class="w"> </span>Count:<span class="w"> </span><span class="m">39656528320</span>
<a id="__codelineno-56-47" name="__codelineno-56-47" href="#__codelineno-56-47"></a>PKT<span class="w"> </span>RX<span class="w"> </span>Byte<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-56-48" name="__codelineno-56-48" href="#__codelineno-56-48"></a>PKT<span class="w"> </span>TX<span class="w"> </span>Num<span class="w"> </span>Ticks<span class="w"> </span>Count:<span class="w"> </span><span class="m">4957121724</span>
<a id="__codelineno-56-49" name="__codelineno-56-49" href="#__codelineno-56-49"></a>PKT<span class="w"> </span>RX<span class="w"> </span>Num<span class="w"> </span>Ticks<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-56-50" name="__codelineno-56-50" href="#__codelineno-56-50"></a>TX<span class="w"> </span>Bandwidth:<span class="w"> </span><span class="m">25358344768</span><span class="w"> </span>bps
<a id="__codelineno-56-51" name="__codelineno-56-51" href="#__codelineno-56-51"></a>RX<span class="w"> </span>Bandwidth:<span class="w"> </span><span class="m">0</span><span class="w"> </span>bps
<a id="__codelineno-56-52" name="__codelineno-56-52" href="#__codelineno-56-52"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<p>TX bandwidth utilization can be tuned by adjusting packet length and idle cycles. The transcript below modifies the number of idle cycles between packets in flight. The change is verified via a read of the packet generator status registers, which shows a maximum bandwidth of ~23.61 Gbps.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--num-idle-cycles<span class="w"> </span><span class="m">16</span><span class="w"> </span>--tx-pkt-size<span class="w"> </span><span class="m">1024</span><span class="w"> </span>--tx-max-pkt-size<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>Number<span class="w"> </span>of<span class="w"> </span>Idle<span class="w"> </span>Cycles<span class="w"> </span>set:<span class="w"> </span><span class="m">16</span>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>Tx<span class="w"> </span>Packet<span class="w"> </span>Size<span class="w"> </span>set:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a>Max<span class="w"> </span>Tx<span class="w"> </span>Packet<span class="w"> </span>Size<span class="w"> </span>set:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--dump<span class="w"> </span>
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a>Config<span class="w"> </span>Control:<span class="w"> </span>0x10635
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="w">        </span>Tx<span class="w"> </span>traffic:<span class="w"> </span>Enabled
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a><span class="w">        </span>Packet<span class="w"> </span>Generation<span class="w"> </span>Mode:<span class="w"> </span>Continuous<span class="w"> </span>
<a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a><span class="w">        </span>Soft<span class="w"> </span>Reset:<span class="w"> </span>Disabled
<a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a><span class="w">        </span>Dynamic<span class="w"> </span>Mode:<span class="w"> </span>Enabled
<a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a><span class="w">        </span>Pkt<span class="w"> </span>Checker:<span class="w"> </span>Enabled
<a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a><span class="w">        </span>Counter<span class="w"> </span>Snapshot<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a><span class="w">        </span>Counter<span class="w"> </span>Clear<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a><span class="w">        </span>Internal<span class="w"> </span>Counter<span class="w"> </span>Clear<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a><span class="w">        </span>Fixed<span class="w"> </span>Gap:<span class="w"> </span>Enabled
<a id="__codelineno-57-16" name="__codelineno-57-16" href="#__codelineno-57-16"></a><span class="w">        </span>Packet<span class="w"> </span>Length<span class="w"> </span>Mode:<span class="w"> </span>Fixed
<a id="__codelineno-57-17" name="__codelineno-57-17" href="#__codelineno-57-17"></a><span class="w">        </span>Number<span class="w"> </span>of<span class="w"> </span>Idle<span class="w"> </span>Cycles:<span class="w"> </span><span class="m">16</span>
<a id="__codelineno-57-18" name="__codelineno-57-18" href="#__codelineno-57-18"></a>Destination<span class="w"> </span>Mac<span class="w"> </span>Address:<span class="w"> </span><span class="m">12</span>:34:56:78:0A:02
<a id="__codelineno-57-19" name="__codelineno-57-19" href="#__codelineno-57-19"></a>Source<span class="w"> </span>Mac<span class="w"> </span>Address:<span class="w"> </span><span class="m">12</span>:34:56:78:0A:01
<a id="__codelineno-57-20" name="__codelineno-57-20" href="#__codelineno-57-20"></a>Number<span class="w"> </span>of<span class="w"> </span>Packets:<span class="w"> </span><span class="m">4294967295</span>
<a id="__codelineno-57-21" name="__codelineno-57-21" href="#__codelineno-57-21"></a>Packet<span class="w"> </span>Size<span class="w"> </span>Config<span class="w"> </span>Control:<span class="w"> </span>0x4000400
<a id="__codelineno-57-22" name="__codelineno-57-22" href="#__codelineno-57-22"></a><span class="w">        </span>Tx<span class="w"> </span>Packet<span class="w"> </span>Size:<span class="w"> </span><span class="m">1024</span><span class="w"> </span>Tx<span class="w"> </span>Max<span class="w"> </span>Packet<span class="w"> </span>Size:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-57-23" name="__codelineno-57-23" href="#__codelineno-57-23"></a>Packet<span class="w"> </span>Generator<span class="w"> </span>Status:<span class="w"> </span>0x1e
<a id="__codelineno-57-24" name="__codelineno-57-24" href="#__codelineno-57-24"></a><span class="w">        </span>SADB<span class="w"> </span>configuration<span class="w"> </span>status:<span class="w"> </span>Incomplete
<a id="__codelineno-57-25" name="__codelineno-57-25" href="#__codelineno-57-25"></a><span class="w">        </span>System<span class="w"> </span>Reset<span class="w"> </span>Sequence<span class="w"> </span>status:<span class="w"> </span>Complete
<a id="__codelineno-57-26" name="__codelineno-57-26" href="#__codelineno-57-26"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>tx_lanes_stable<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-57-27" name="__codelineno-57-27" href="#__codelineno-57-27"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>tx_pll_locked<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-57-28" name="__codelineno-57-28" href="#__codelineno-57-28"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>rx_pcs<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-57-29" name="__codelineno-57-29" href="#__codelineno-57-29"></a>Packet<span class="w"> </span>Checker<span class="w"> </span>Status:<span class="w"> </span>0x0
<a id="__codelineno-57-30" name="__codelineno-57-30" href="#__codelineno-57-30"></a><span class="w">        </span>Data<span class="w"> </span>Mismatch<span class="w"> </span>status:<span class="w"> </span>Not<span class="w"> </span>seen
<a id="__codelineno-57-31" name="__codelineno-57-31" href="#__codelineno-57-31"></a>TX<span class="w"> </span>Start<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">559732907</span>
<a id="__codelineno-57-32" name="__codelineno-57-32" href="#__codelineno-57-32"></a>TX<span class="w"> </span>End<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">559733116</span>
<a id="__codelineno-57-33" name="__codelineno-57-33" href="#__codelineno-57-33"></a>TX<span class="w"> </span>Error<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-57-34" name="__codelineno-57-34" href="#__codelineno-57-34"></a>RX<span class="w"> </span>Start<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-57-35" name="__codelineno-57-35" href="#__codelineno-57-35"></a>RX<span class="w"> </span>End<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-57-36" name="__codelineno-57-36" href="#__codelineno-57-36"></a>RX<span class="w"> </span>Error<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-57-37" name="__codelineno-57-37" href="#__codelineno-57-37"></a>Pkt<span class="w"> </span>Checker<span class="w"> </span>Live<span class="w"> </span>Counter:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-57-38" name="__codelineno-57-38" href="#__codelineno-57-38"></a>PKT<span class="w"> </span>TX<span class="w"> </span>Byte<span class="w"> </span>Count:<span class="w"> </span><span class="m">591628496376</span>
<a id="__codelineno-57-39" name="__codelineno-57-39" href="#__codelineno-57-39"></a>PKT<span class="w"> </span>RX<span class="w"> </span>Byte<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-57-40" name="__codelineno-57-40" href="#__codelineno-57-40"></a>PKT<span class="w"> </span>TX<span class="w"> </span>Num<span class="w"> </span>Ticks<span class="w"> </span>Count:<span class="w"> </span><span class="m">73953613933</span>
<a id="__codelineno-57-41" name="__codelineno-57-41" href="#__codelineno-57-41"></a>PKT<span class="w"> </span>RX<span class="w"> </span>Num<span class="w"> </span>Ticks<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-57-42" name="__codelineno-57-42" href="#__codelineno-57-42"></a>TX<span class="w"> </span>Bandwidth:<span class="w"> </span><span class="m">23615146240</span><span class="w"> </span>bps
<a id="__codelineno-57-43" name="__codelineno-57-43" href="#__codelineno-57-43"></a>RX<span class="w"> </span>Bandwidth:<span class="w"> </span><span class="m">0</span><span class="w"> </span>bps
<a id="__codelineno-57-44" name="__codelineno-57-44" href="#__codelineno-57-44"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<p>Enabling the packet generator on the second development kit starts the integrated packet checker and reports RX bandwidth. The transcript below shows the status change after activation.</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--dump
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>Config<span class="w"> </span>Control:<span class="w"> </span>0x16634
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">        </span>Tx<span class="w"> </span>traffic:<span class="w"> </span>Disabled
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="w">        </span>Packet<span class="w"> </span>Generation<span class="w"> </span>Mode:<span class="w"> </span>Continuous<span class="w"> </span>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w">        </span>Soft<span class="w"> </span>Reset:<span class="w"> </span>Disabled
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="w">        </span>Dynamic<span class="w"> </span>Mode:<span class="w"> </span>Enabled
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w">        </span>Pkt<span class="w"> </span>Checker:<span class="w"> </span>Enabled
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">        </span>Counter<span class="w"> </span>Snapshot<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="w">        </span>Counter<span class="w"> </span>Clear<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="w">        </span>Internal<span class="w"> </span>Counter<span class="w"> </span>Clear<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="w">        </span>Fixed<span class="w"> </span>Gap:<span class="w"> </span>Enabled
<a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="w">        </span>Packet<span class="w"> </span>Length<span class="w"> </span>Mode:<span class="w"> </span>Fixed
<a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="w">        </span>Number<span class="w"> </span>of<span class="w"> </span>Idle<span class="w"> </span>Cycles:<span class="w"> </span><span class="m">22</span>
<a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a>Destination<span class="w"> </span>Mac<span class="w"> </span>Address:<span class="w"> </span><span class="m">12</span>:34:56:78:0A:01
<a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a>Source<span class="w"> </span>Mac<span class="w"> </span>Address:<span class="w"> </span><span class="m">12</span>:34:56:78:0A:02
<a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a>Number<span class="w"> </span>of<span class="w"> </span>Packets:<span class="w"> </span><span class="m">4294967295</span>
<a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a>Packet<span class="w"> </span>Size<span class="w"> </span>Config<span class="w"> </span>Control:<span class="w"> </span>0x4000400
<a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a><span class="w">        </span>Tx<span class="w"> </span>Packet<span class="w"> </span>Size:<span class="w"> </span><span class="m">1024</span><span class="w"> </span>Tx<span class="w"> </span>Max<span class="w"> </span>Packet<span class="w"> </span>Size:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a>Packet<span class="w"> </span>Generator<span class="w"> </span>Status:<span class="w"> </span>0x1e
<a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a><span class="w">        </span>SADB<span class="w"> </span>configuration<span class="w"> </span>status:<span class="w"> </span>Incomplete
<a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a><span class="w">        </span>System<span class="w"> </span>Reset<span class="w"> </span>Sequence<span class="w"> </span>status:<span class="w"> </span>Complete
<a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>tx_lanes_stable<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>tx_pll_locked<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-58-24" name="__codelineno-58-24" href="#__codelineno-58-24"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>rx_pcs<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-58-25" name="__codelineno-58-25" href="#__codelineno-58-25"></a>Packet<span class="w"> </span>Checker<span class="w"> </span>Status:<span class="w"> </span>0x0
<a id="__codelineno-58-26" name="__codelineno-58-26" href="#__codelineno-58-26"></a><span class="w">        </span>Data<span class="w"> </span>Mismatch<span class="w"> </span>status:<span class="w"> </span>Not<span class="w"> </span>seen
<a id="__codelineno-58-27" name="__codelineno-58-27" href="#__codelineno-58-27"></a>TX<span class="w"> </span>Start<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-58-28" name="__codelineno-58-28" href="#__codelineno-58-28"></a>TX<span class="w"> </span>End<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-58-29" name="__codelineno-58-29" href="#__codelineno-58-29"></a>TX<span class="w"> </span>Error<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-58-30" name="__codelineno-58-30" href="#__codelineno-58-30"></a>RX<span class="w"> </span>Start<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">1136848921</span>
<a id="__codelineno-58-31" name="__codelineno-58-31" href="#__codelineno-58-31"></a>RX<span class="w"> </span>End<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">1136849121</span>
<a id="__codelineno-58-32" name="__codelineno-58-32" href="#__codelineno-58-32"></a>RX<span class="w"> </span>Error<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-58-33" name="__codelineno-58-33" href="#__codelineno-58-33"></a>Pkt<span class="w"> </span>Checker<span class="w"> </span>Live<span class="w"> </span>Counter:<span class="w"> </span><span class="m">1136849343</span>
<a id="__codelineno-58-34" name="__codelineno-58-34" href="#__codelineno-58-34"></a>PKT<span class="w"> </span>TX<span class="w"> </span>Byte<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-58-35" name="__codelineno-58-35" href="#__codelineno-58-35"></a>PKT<span class="w"> </span>RX<span class="w"> </span>Byte<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-58-36" name="__codelineno-58-36" href="#__codelineno-58-36"></a>PKT<span class="w"> </span>TX<span class="w"> </span>Num<span class="w"> </span>Ticks<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-58-37" name="__codelineno-58-37" href="#__codelineno-58-37"></a>PKT<span class="w"> </span>RX<span class="w"> </span>Num<span class="w"> </span>Ticks<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-58-38" name="__codelineno-58-38" href="#__codelineno-58-38"></a>TX<span class="w"> </span>Bandwidth:<span class="w"> </span><span class="m">0</span><span class="w"> </span>bps
<a id="__codelineno-58-39" name="__codelineno-58-39" href="#__codelineno-58-39"></a>RX<span class="w"> </span>Bandwidth:<span class="w"> </span><span class="m">23615150848</span><span class="w"> </span>bps
<a id="__codelineno-58-40" name="__codelineno-58-40" href="#__codelineno-58-40"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<p>RX bandwidth is reported to be ~23.61 Gbps.</p>
<p>To fully saturate an Ethernet port, run the following commands on both development kits to enable their respective packet generators:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--num-idle-cycles<span class="w"> </span><span class="m">16</span><span class="w"> </span>--tx-pkt-size<span class="w"> </span><span class="m">1024</span><span class="w"> </span>--tx-max-pkt-size<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--traffic<span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>Both development kits are now transmitting and receiving Ethernet traffic on port 1. Run a status dump on either kit to report bandwidth utilization:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>root@agilex7dksiagi027fc:~/scripts#<span class="w"> </span>packetgenerator<span class="w"> </span>--device<span class="w"> </span>/dev/uio0<span class="w"> </span>--dump
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>Config<span class="w"> </span>Control:<span class="w"> </span>0x8635
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="w">        </span>Tx<span class="w"> </span>traffic:<span class="w"> </span>Enabled
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">        </span>Packet<span class="w"> </span>Generation<span class="w"> </span>Mode:<span class="w"> </span>Continuous<span class="w"> </span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">        </span>Soft<span class="w"> </span>Reset:<span class="w"> </span>Disabled
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="w">        </span>Dynamic<span class="w"> </span>Mode:<span class="w"> </span>Enabled
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="w">        </span>Pkt<span class="w"> </span>Checker:<span class="w"> </span>Enabled
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w">        </span>Counter<span class="w"> </span>Snapshot<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="w">        </span>Counter<span class="w"> </span>Clear<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a><span class="w">        </span>Internal<span class="w"> </span>Counter<span class="w"> </span>Clear<span class="w"> </span>Status:<span class="w"> </span>Disabled
<a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a><span class="w">        </span>Fixed<span class="w"> </span>Gap:<span class="w"> </span>Enabled
<a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a><span class="w">        </span>Packet<span class="w"> </span>Length<span class="w"> </span>Mode:<span class="w"> </span>Fixed
<a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a><span class="w">        </span>Number<span class="w"> </span>of<span class="w"> </span>Idle<span class="w"> </span>Cycles:<span class="w"> </span><span class="m">8</span>
<a id="__codelineno-60-14" name="__codelineno-60-14" href="#__codelineno-60-14"></a>Destination<span class="w"> </span>Mac<span class="w"> </span>Address:<span class="w"> </span><span class="m">12</span>:34:56:78:0A:02
<a id="__codelineno-60-15" name="__codelineno-60-15" href="#__codelineno-60-15"></a>Source<span class="w"> </span>Mac<span class="w"> </span>Address:<span class="w"> </span><span class="m">12</span>:34:56:78:0A:01
<a id="__codelineno-60-16" name="__codelineno-60-16" href="#__codelineno-60-16"></a>Number<span class="w"> </span>of<span class="w"> </span>Packets:<span class="w"> </span><span class="m">4294967295</span>
<a id="__codelineno-60-17" name="__codelineno-60-17" href="#__codelineno-60-17"></a>Packet<span class="w"> </span>Size<span class="w"> </span>Config<span class="w"> </span>Control:<span class="w"> </span>0x4000400
<a id="__codelineno-60-18" name="__codelineno-60-18" href="#__codelineno-60-18"></a><span class="w">        </span>Tx<span class="w"> </span>Packet<span class="w"> </span>Size:<span class="w"> </span><span class="m">1024</span><span class="w"> </span>Tx<span class="w"> </span>Max<span class="w"> </span>Packet<span class="w"> </span>Size:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-60-19" name="__codelineno-60-19" href="#__codelineno-60-19"></a>Packet<span class="w"> </span>Generator<span class="w"> </span>Status:<span class="w"> </span>0x1e
<a id="__codelineno-60-20" name="__codelineno-60-20" href="#__codelineno-60-20"></a><span class="w">        </span>SADB<span class="w"> </span>configuration<span class="w"> </span>status:<span class="w"> </span>Incomplete
<a id="__codelineno-60-21" name="__codelineno-60-21" href="#__codelineno-60-21"></a><span class="w">        </span>System<span class="w"> </span>Reset<span class="w"> </span>Sequence<span class="w"> </span>status:<span class="w"> </span>Complete
<a id="__codelineno-60-22" name="__codelineno-60-22" href="#__codelineno-60-22"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>tx_lanes_stable<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-60-23" name="__codelineno-60-23" href="#__codelineno-60-23"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>tx_pll_locked<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-60-24" name="__codelineno-60-24" href="#__codelineno-60-24"></a><span class="w">        </span>HSSI<span class="w"> </span>SS<span class="w"> </span>rx_pcs<span class="w"> </span>status:<span class="w"> </span>Asserted
<a id="__codelineno-60-25" name="__codelineno-60-25" href="#__codelineno-60-25"></a>Packet<span class="w"> </span>Checker<span class="w"> </span>Status:<span class="w"> </span>0x0
<a id="__codelineno-60-26" name="__codelineno-60-26" href="#__codelineno-60-26"></a><span class="w">        </span>Data<span class="w"> </span>Mismatch<span class="w"> </span>status:<span class="w"> </span>Not<span class="w"> </span>seen
<a id="__codelineno-60-27" name="__codelineno-60-27" href="#__codelineno-60-27"></a>TX<span class="w"> </span>Start<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">249401806</span>
<a id="__codelineno-60-28" name="__codelineno-60-28" href="#__codelineno-60-28"></a>TX<span class="w"> </span>End<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">249402022</span>
<a id="__codelineno-60-29" name="__codelineno-60-29" href="#__codelineno-60-29"></a>TX<span class="w"> </span>Error<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-60-30" name="__codelineno-60-30" href="#__codelineno-60-30"></a>RX<span class="w"> </span>Start<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">43882945</span>
<a id="__codelineno-60-31" name="__codelineno-60-31" href="#__codelineno-60-31"></a>RX<span class="w"> </span>End<span class="w"> </span>of<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">43883143</span>
<a id="__codelineno-60-32" name="__codelineno-60-32" href="#__codelineno-60-32"></a>RX<span class="w"> </span>Error<span class="w"> </span>Packet<span class="w"> </span>Count:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-60-33" name="__codelineno-60-33" href="#__codelineno-60-33"></a>Pkt<span class="w"> </span>Checker<span class="w"> </span>Live<span class="w"> </span>Counter:<span class="w"> </span><span class="m">43883467</span>
<a id="__codelineno-60-34" name="__codelineno-60-34" href="#__codelineno-60-34"></a>PKT<span class="w"> </span>TX<span class="w"> </span>Byte<span class="w"> </span>Count:<span class="w"> </span><span class="m">264077193064</span>
<a id="__codelineno-60-35" name="__codelineno-60-35" href="#__codelineno-60-35"></a>PKT<span class="w"> </span>RX<span class="w"> </span>Byte<span class="w"> </span>Count:<span class="w"> </span><span class="m">44937076872</span>
<a id="__codelineno-60-36" name="__codelineno-60-36" href="#__codelineno-60-36"></a>PKT<span class="w"> </span>TX<span class="w"> </span>Num<span class="w"> </span>Ticks<span class="w"> </span>Count:<span class="w"> </span><span class="m">33009703937</span>
<a id="__codelineno-60-37" name="__codelineno-60-37" href="#__codelineno-60-37"></a>PKT<span class="w"> </span>RX<span class="w"> </span>Num<span class="w"> </span>Ticks<span class="w"> </span>Count:<span class="w"> </span><span class="m">6319335403</span>
<a id="__codelineno-60-38" name="__codelineno-60-38" href="#__codelineno-60-38"></a>TX<span class="w"> </span>Bandwidth:<span class="w"> </span><span class="m">25358377536</span><span class="w"> </span>bps
<a id="__codelineno-60-39" name="__codelineno-60-39" href="#__codelineno-60-39"></a>RX<span class="w"> </span>Bandwidth:<span class="w"> </span><span class="m">23615140544</span><span class="w"> </span>bps
<a id="__codelineno-60-40" name="__codelineno-60-40" href="#__codelineno-60-40"></a>root@agilex7dksiagi027fc:~/scripts#
</code></pre></div>
<p>Both TX and RX channels are now active.</p>
<h3 id="run-ptp4l-test">Run ptp4l Test<a class="headerlink" href="#run-ptp4l-test" title="Permanent link">&para;</a></h3>
<p>Development kit 1 acts as the network master; development kit 2 is the subordinate. Both are configured as ordinary clocks using ptp4l. Configuration files provided by the system example design are located at <code>/root/cfg/</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ls<span class="w"> </span>/root/cfg/
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>boundary.cfg
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>master.cfg
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>slave.cfg
</code></pre></div>
<p>The transcript below configures development kit 1 as the network master.</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ptp4l<span class="w"> </span>-i<span class="w"> </span>eth1<span class="w"> </span>-m<span class="w"> </span>-f<span class="w"> </span>/root/cfg/master.cfg<span class="w">                        </span>
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>option<span class="w"> </span>slaveOnly<span class="w"> </span>is<span class="w"> </span>deprecated,<span class="w"> </span>please<span class="w"> </span>use<span class="w"> </span>clientOnly<span class="w"> </span>instead
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a>option<span class="w"> </span>masterOnly<span class="w"> </span>is<span class="w"> </span>deprecated,<span class="w"> </span>please<span class="w"> </span>use<span class="w"> </span>serverOnly<span class="w"> </span>instead
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a>ptp4l<span class="o">[</span><span class="m">162</span>.444<span class="o">]</span>:<span class="w"> </span>selected<span class="w"> </span>/dev/ptp0<span class="w"> </span>as<span class="w"> </span>PTP<span class="w"> </span>clock
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a>ptp4l<span class="o">[</span><span class="m">162</span>.504<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>eth1<span class="o">)</span>:<span class="w"> </span>INITIALIZING<span class="w"> </span>to<span class="w"> </span>LISTENING<span class="w"> </span>on<span class="w"> </span>INIT_COMPLETE
<a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a>ptp4l<span class="o">[</span><span class="m">162</span>.504<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">(</span>/var/run/ptp4l<span class="o">)</span>:<span class="w"> </span>INITIALIZING<span class="w"> </span>to<span class="w"> </span>LISTENING<span class="w"> </span>on<span class="w"> </span>INIT_COMPLETE
<a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a>ptp4l<span class="o">[</span><span class="m">162</span>.504<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">(</span>/var/run/ptp4lro<span class="o">)</span>:<span class="w"> </span>INITIALIZING<span class="w"> </span>to<span class="w"> </span>LISTENING<span class="w"> </span>on<span class="w"> </span>INIT_COMPLETE
<a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a>ptp4l<span class="o">[</span><span class="m">162</span>.904<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>eth1<span class="o">)</span>:<span class="w"> </span>LISTENING<span class="w"> </span>to<span class="w"> </span>MASTER<span class="w"> </span>on<span class="w"> </span>ANNOUNCE_RECEIPT_TIMEOUT_EXPIRES
<a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a>ptp4l<span class="o">[</span><span class="m">162</span>.904<span class="o">]</span>:<span class="w"> </span>selected<span class="w"> </span><span class="nb">local</span><span class="w"> </span>clock<span class="w"> </span>52c803.fffe.45f11c<span class="w"> </span>as<span class="w"> </span>best<span class="w"> </span>master
<a id="__codelineno-62-10" name="__codelineno-62-10" href="#__codelineno-62-10"></a>ptp4l<span class="o">[</span><span class="m">162</span>.904<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>eth1<span class="o">)</span>:<span class="w"> </span>assuming<span class="w"> </span>the<span class="w"> </span>grand<span class="w"> </span>master<span class="w"> </span>role
</code></pre></div>
<p>Development kit 2 loads <code>slave.cfg</code> to operate as the network slave.</p>
<p>Execute the following commands on development kit 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ptp4l<span class="w"> </span>-i<span class="w"> </span>eth1<span class="w"> </span>-m<span class="w"> </span>-s<span class="w"> </span>-f<span class="w"> </span>/root/cfg/slave.cfg
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>option<span class="w"> </span>slaveOnly<span class="w"> </span>is<span class="w"> </span>deprecated,<span class="w"> </span>please<span class="w"> </span>use<span class="w"> </span>clientOnly<span class="w"> </span>instead
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a>option<span class="w"> </span>masterOnly<span class="w"> </span>is<span class="w"> </span>deprecated,<span class="w"> </span>please<span class="w"> </span>use<span class="w"> </span>serverOnly<span class="w"> </span>instead
<a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a>ptp4l<span class="o">[</span><span class="m">193</span>.064<span class="o">]</span>:<span class="w"> </span>selected<span class="w"> </span>/dev/ptp0<span class="w"> </span>as<span class="w"> </span>PTP<span class="w"> </span>clock
<a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a>ptp4l<span class="o">[</span><span class="m">193</span>.124<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>eth1<span class="o">)</span>:<span class="w"> </span>INITIALIZING<span class="w"> </span>to<span class="w"> </span>LISTENING<span class="w"> </span>on<span class="w"> </span>INIT_COMPLETE
<a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a>ptp4l<span class="o">[</span><span class="m">193</span>.124<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">(</span>/var/run/ptp4l<span class="o">)</span>:<span class="w"> </span>INITIALIZING<span class="w"> </span>to<span class="w"> </span>LISTENING<span class="w"> </span>on<span class="w"> </span>INIT_COMPLETE
<a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a>ptp4l<span class="o">[</span><span class="m">193</span>.124<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">(</span>/var/run/ptp4lro<span class="o">)</span>:<span class="w"> </span>INITIALIZING<span class="w"> </span>to<span class="w"> </span>LISTENING<span class="w"> </span>on<span class="w"> </span>INIT_COMPLETE
<a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a>ptp4l<span class="o">[</span><span class="m">193</span>.246<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>eth1<span class="o">)</span>:<span class="w"> </span>new<span class="w"> </span>foreign<span class="w"> </span>master<span class="w"> </span>52c803.fffe.45f11c-1
<a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a>ptp4l<span class="o">[</span><span class="m">193</span>.496<span class="o">]</span>:<span class="w"> </span>selected<span class="w"> </span>best<span class="w"> </span>master<span class="w"> </span>clock<span class="w"> </span>52c803.fffe.45f11c
<a id="__codelineno-63-10" name="__codelineno-63-10" href="#__codelineno-63-10"></a>ptp4l<span class="o">[</span><span class="m">193</span>.496<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>eth1<span class="o">)</span>:<span class="w"> </span>LISTENING<span class="w"> </span>to<span class="w"> </span>UNCALIBRATED<span class="w"> </span>on<span class="w"> </span>RS_SLAVE
<a id="__codelineno-63-11" name="__codelineno-63-11" href="#__codelineno-63-11"></a>ptp4l<span class="o">[</span><span class="m">193</span>.621<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w"> </span><span class="m">2709964362</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">        </span><span class="m">10</span>
<a id="__codelineno-63-12" name="__codelineno-63-12" href="#__codelineno-63-12"></a>ptp4l<span class="o">[</span><span class="m">193</span>.684<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w"> </span><span class="m">2709964348</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">        </span><span class="m">13</span>
<a id="__codelineno-63-13" name="__codelineno-63-13" href="#__codelineno-63-13"></a>ptp4l<span class="o">[</span><span class="m">193</span>.746<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w"> </span><span class="m">2709964337</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">        </span><span class="m">12</span>
<a id="__codelineno-63-14" name="__codelineno-63-14" href="#__codelineno-63-14"></a>ptp4l<span class="o">[</span><span class="m">193</span>.809<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w"> </span><span class="m">2709964326</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">        </span><span class="m">12</span>
<a id="__codelineno-63-15" name="__codelineno-63-15" href="#__codelineno-63-15"></a>ptp4l<span class="o">[</span><span class="m">193</span>.871<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w"> </span><span class="m">2709964314</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">        </span><span class="m">13</span>
<a id="__codelineno-63-16" name="__codelineno-63-16" href="#__codelineno-63-16"></a>ptp4l<span class="o">[</span><span class="m">193</span>.934<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w"> </span><span class="m">2709964306</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">9</span>
<a id="__codelineno-63-17" name="__codelineno-63-17" href="#__codelineno-63-17"></a>ptp4l<span class="o">[</span><span class="m">193</span>.996<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w"> </span><span class="m">2709964291</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">        </span><span class="m">12</span>
<a id="__codelineno-63-18" name="__codelineno-63-18" href="#__codelineno-63-18"></a>ptp4l<span class="o">[</span><span class="m">194</span>.059<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w"> </span><span class="m">2709964281</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">        </span><span class="m">11</span>
<a id="__codelineno-63-19" name="__codelineno-63-19" href="#__codelineno-63-19"></a>ptp4l<span class="o">[</span><span class="m">194</span>.121<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w"> </span><span class="m">2709964270</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">        </span><span class="m">10</span>
<a id="__codelineno-63-20" name="__codelineno-63-20" href="#__codelineno-63-20"></a>ptp4l<span class="o">[</span><span class="m">194</span>.184<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w"> </span><span class="m">2709964257</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">        </span><span class="m">11</span>
<a id="__codelineno-63-21" name="__codelineno-63-21" href="#__codelineno-63-21"></a>
<a id="__codelineno-63-22" name="__codelineno-63-22" href="#__codelineno-63-22"></a>&lt;--<span class="w"> </span>output<span class="w"> </span>truncated<span class="w"> </span>--&gt;
<a id="__codelineno-63-23" name="__codelineno-63-23" href="#__codelineno-63-23"></a>
<a id="__codelineno-63-24" name="__codelineno-63-24" href="#__codelineno-63-24"></a>ptp4l<span class="o">[</span><span class="m">253</span>.727<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">8</span>
<a id="__codelineno-63-25" name="__codelineno-63-25" href="#__codelineno-63-25"></a>ptp4l<span class="o">[</span><span class="m">253</span>.775<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">0</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">8</span>
<a id="__codelineno-63-26" name="__codelineno-63-26" href="#__codelineno-63-26"></a>ptp4l<span class="o">[</span><span class="m">253</span>.792<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
<a id="__codelineno-63-27" name="__codelineno-63-27" href="#__codelineno-63-27"></a>ptp4l<span class="o">[</span><span class="m">253</span>.838<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
<a id="__codelineno-63-28" name="__codelineno-63-28" href="#__codelineno-63-28"></a>ptp4l<span class="o">[</span><span class="m">253</span>.854<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">0</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">8</span>
<a id="__codelineno-63-29" name="__codelineno-63-29" href="#__codelineno-63-29"></a>ptp4l<span class="o">[</span><span class="m">253</span>.900<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">0</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">8</span>
<a id="__codelineno-63-30" name="__codelineno-63-30" href="#__codelineno-63-30"></a>ptp4l<span class="o">[</span><span class="m">253</span>.918<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">0</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">8</span>
<a id="__codelineno-63-31" name="__codelineno-63-31" href="#__codelineno-63-31"></a>ptp4l<span class="o">[</span><span class="m">253</span>.964<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">0</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">8</span>
<a id="__codelineno-63-32" name="__codelineno-63-32" href="#__codelineno-63-32"></a>ptp4l<span class="o">[</span><span class="m">253</span>.984<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">0</span><span class="w"> </span>s0<span class="w"> </span>freq<span class="w">      </span>-0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">8</span>
<a id="__codelineno-63-33" name="__codelineno-63-33" href="#__codelineno-63-33"></a>ptp4l<span class="o">[</span><span class="m">254</span>.028<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s2<span class="w"> </span>freq<span class="w">      </span>+0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
<a id="__codelineno-63-34" name="__codelineno-63-34" href="#__codelineno-63-34"></a>ptp4l<span class="o">[</span><span class="m">254</span>.028<span class="o">]</span>:<span class="w"> </span>port<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>eth1<span class="o">)</span>:<span class="w"> </span>UNCALIBRATED<span class="w"> </span>to<span class="w"> </span>SLAVE<span class="w"> </span>on<span class="w"> </span>MASTER_CLOCK_SELECTED
<a id="__codelineno-63-35" name="__codelineno-63-35" href="#__codelineno-63-35"></a>ptp4l<span class="o">[</span><span class="m">254</span>.044<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s2<span class="w"> </span>freq<span class="w">      </span>+1<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
<a id="__codelineno-63-36" name="__codelineno-63-36" href="#__codelineno-63-36"></a>ptp4l<span class="o">[</span><span class="m">254</span>.110<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s2<span class="w"> </span>freq<span class="w">      </span>+1<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
<a id="__codelineno-63-37" name="__codelineno-63-37" href="#__codelineno-63-37"></a>ptp4l<span class="o">[</span><span class="m">254</span>.155<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s2<span class="w"> </span>freq<span class="w">      </span>+1<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
<a id="__codelineno-63-38" name="__codelineno-63-38" href="#__codelineno-63-38"></a>ptp4l<span class="o">[</span><span class="m">254</span>.171<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s2<span class="w"> </span>freq<span class="w">      </span>+1<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
<a id="__codelineno-63-39" name="__codelineno-63-39" href="#__codelineno-63-39"></a>ptp4l<span class="o">[</span><span class="m">254</span>.248<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s2<span class="w"> </span>freq<span class="w">      </span>+1<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
<a id="__codelineno-63-40" name="__codelineno-63-40" href="#__codelineno-63-40"></a>ptp4l<span class="o">[</span><span class="m">254</span>.249<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">0</span><span class="w"> </span>s2<span class="w"> </span>freq<span class="w">      </span>+0<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
<a id="__codelineno-63-41" name="__codelineno-63-41" href="#__codelineno-63-41"></a>ptp4l<span class="o">[</span><span class="m">254</span>.280<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s2<span class="w"> </span>freq<span class="w">      </span>+1<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
<a id="__codelineno-63-42" name="__codelineno-63-42" href="#__codelineno-63-42"></a>ptp4l<span class="o">[</span><span class="m">254</span>.295<span class="o">]</span>:<span class="w"> </span>master<span class="w"> </span>offset<span class="w">          </span><span class="m">1</span><span class="w"> </span>s2<span class="w"> </span>freq<span class="w">      </span>+1<span class="w"> </span>path<span class="w"> </span>delay<span class="w">         </span><span class="m">7</span>
</code></pre></div>
<p>To verify that both systems use DMA-0 for PTP traffic, inspect <code>/proc/interrupts</code> and confirm that the highest-priority interrupts are triggered for PTP TX/RX handling.</p>
<p>Execute the following commands on development kit 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>cat<span class="w"> </span>/proc/interrupts<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>eth1
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="w"> </span><span class="m">25</span>:<span class="w">       </span><span class="m">1283</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">72</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="w"> </span><span class="m">26</span>:<span class="w">        </span><span class="m">175</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">73</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="w"> </span><span class="m">27</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">70</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="w"> </span><span class="m">28</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">71</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="w"> </span><span class="m">29</span>:<span class="w">          </span><span class="m">9</span><span class="w">          </span><span class="m">0</span><span class="w">         </span><span class="m">17</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">68</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="w"> </span><span class="m">30</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">         </span><span class="m">10</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">69</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<p>Execute the following commands on development kit 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>cat<span class="w"> </span>/proc/interrupts<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>eth1
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="w"> </span><span class="m">25</span>:<span class="w">       </span><span class="m">1456</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">72</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="w"> </span><span class="m">26</span>:<span class="w">       </span><span class="m">5841</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">73</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="w"> </span><span class="m">27</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">70</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="w"> </span><span class="m">28</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">71</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="w"> </span><span class="m">29</span>:<span class="w">         </span><span class="m">10</span><span class="w">          </span><span class="m">0</span><span class="w">         </span><span class="m">10</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">68</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="w"> </span><span class="m">30</span>:<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">         </span><span class="m">11</span><span class="w">          </span><span class="m">0</span><span class="w">     </span>GICv2<span class="w">  </span><span class="m">69</span><span class="w"> </span>Level<span class="w">     </span>eth1
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<h2 id="debug">Debug<a class="headerlink" href="#debug" title="Permanent link">&para;</a></h2>
<p>This section outlines common issues and solutions encountered during system bring-up.</p>
<h3 id="ethernet-interfaces-are-missing">Ethernet Interfaces are Missing<a class="headerlink" href="#ethernet-interfaces-are-missing" title="Permanent link">&para;</a></h3>
<p>After login into the HPS, the Ethernet ports are not listed by Linux as shown below.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ip<span class="w"> </span>addr
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="m">1</span>:<span class="w"> </span>lo:<span class="w"> </span>&lt;LOOPBACK,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">65536</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UNKNOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="w">    </span>link/loopback<span class="w"> </span><span class="m">00</span>:00:00:00:00:00<span class="w"> </span>brd<span class="w"> </span><span class="m">00</span>:00:00:00:00:00
<a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">127</span>.0.0.1/8<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>lo
<a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a><span class="w">    </span>inet6<span class="w"> </span>::1/128<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>noprefixroute<span class="w"> </span>
<a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-66-8" name="__codelineno-66-8" href="#__codelineno-66-8"></a><span class="m">2</span>:<span class="w"> </span>eth0:<span class="w"> </span>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen0
<a id="__codelineno-66-9" name="__codelineno-66-9" href="#__codelineno-66-9"></a><span class="w">    </span>link/ether<span class="w"> </span>fa:06:aa:f6:2b:48<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-66-10" name="__codelineno-66-10" href="#__codelineno-66-10"></a><span class="m">3</span>:<span class="w"> </span>teql0:<span class="w"> </span>&lt;NOARP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>noop<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">100</span>
<a id="__codelineno-66-11" name="__codelineno-66-11" href="#__codelineno-66-11"></a><span class="w">    </span>link/void<span class="w"> </span>
<a id="__codelineno-66-12" name="__codelineno-66-12" href="#__codelineno-66-12"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<p>A common cause of this error are listed below.</p>
<h4 id="incorrect-onboard-max10-bitstream">Incorrect onboard MAX10 bitstream<a class="headerlink" href="#incorrect-onboard-max10-bitstream" title="Permanent link">&para;</a></h4>
<p>The custom MAX10 bitstream is not loaded, causing ZL30733 configuration to fail. Check the Linux boot log for the following message:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>Loading<span class="w"> </span>fpga<span class="w"> </span>from<span class="w"> </span>0x02840620<span class="w"> </span>to<span class="w"> </span>0x0a000000
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>.......FPGA<span class="w"> </span>reconfiguration<span class="w"> </span>OK!
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="w"> </span>Initializing<span class="w"> </span>Clock<span class="w"> </span>Cleaner<span class="w"> </span><span class="o">(</span>ZL30733<span class="o">)</span><span class="w"> </span>via<span class="w"> </span>I2C<span class="w"> </span>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a>zl30733_i2c_init:<span class="w"> </span>Could<span class="w"> </span>not<span class="w"> </span>identify<span class="w"> </span>ZL30733<span class="w"> </span>chip<span class="w"> </span>on<span class="w"> </span>I2C<span class="w"> </span>bus<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>address<span class="w"> </span>0x70
<a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a>.......FPGA<span class="w"> </span>reconfiguration<span class="w"> </span>OK!
<a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>Enable<span class="w"> </span>FPGA<span class="w"> </span>bridges
</code></pre></div>
<p>To solve this issue, load the <code>max10_system_0002aa4F.pof</code> as described in the <a href="#program-the-onboard-max10-device">Program the onboard MAX10 device</a> section. Once the correct MAX10 bitstream is loaded, the boot log will show:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>Loading<span class="w"> </span>fpga<span class="w"> </span>from<span class="w"> </span>0x02840620<span class="w"> </span>to<span class="w"> </span>0x0a000000
<a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>.......FPGA<span class="w"> </span>reconfiguration<span class="w"> </span>OK!
<a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="w"> </span>Initializing<span class="w"> </span>Clock<span class="w"> </span>Cleaner<span class="w"> </span><span class="o">(</span>ZL30733<span class="o">)</span><span class="w"> </span>via<span class="w"> </span>I2C<span class="w"> </span>
<a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a>...Configuring<span class="w"> </span>PLL<span class="w"> </span>Done!
<a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a>.......FPGA<span class="w"> </span>reconfiguration<span class="w"> </span>OK!
<a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a>Enable<span class="w"> </span>FPGA<span class="w"> </span>bridges
</code></pre></div>
<h3 id="ethernet-interfaces-are-down">Ethernet Interfaces are DOWN<a class="headerlink" href="#ethernet-interfaces-are-down" title="Permanent link">&para;</a></h3>
<p>After login into the HPS, the Ethernet ports are not listed by Linux as shown below.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>ip<span class="w"> </span>addr
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a><span class="m">1</span>:<span class="w"> </span>lo:<span class="w"> </span>&lt;LOOPBACK,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">65536</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UNKNOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="w">    </span>link/loopback<span class="w"> </span><span class="m">00</span>:00:00:00:00:00<span class="w"> </span>brd<span class="w"> </span><span class="m">00</span>:00:00:00:00:00
<a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">127</span>.0.0.1/8<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>lo
<a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a><span class="w">    </span>inet6<span class="w"> </span>::1/128<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>noprefixroute<span class="w"> </span>
<a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a><span class="m">2</span>:<span class="w"> </span>eth0:<span class="w"> </span>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a><span class="w">    </span>link/ether<span class="w"> </span>e2:06:d6:88:ef:23<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-69-10" name="__codelineno-69-10" href="#__codelineno-69-10"></a><span class="m">3</span>:<span class="w"> </span>teql0:<span class="w"> </span>&lt;NOARP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>noop<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">100</span>
<a id="__codelineno-69-11" name="__codelineno-69-11" href="#__codelineno-69-11"></a><span class="w">    </span>link/void<span class="w"> </span>
<a id="__codelineno-69-12" name="__codelineno-69-12" href="#__codelineno-69-12"></a><span class="m">4</span>:<span class="w"> </span>eth1:<span class="w"> </span>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-69-13" name="__codelineno-69-13" href="#__codelineno-69-13"></a><span class="w">    </span>link/ether<span class="w"> </span>fa:74:c3:a3:30:c1<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-69-14" name="__codelineno-69-14" href="#__codelineno-69-14"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.121.1/32<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth1
<a id="__codelineno-69-15" name="__codelineno-69-15" href="#__codelineno-69-15"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-69-16" name="__codelineno-69-16" href="#__codelineno-69-16"></a><span class="m">5</span>:<span class="w"> </span>eth2:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-69-17" name="__codelineno-69-17" href="#__codelineno-69-17"></a><span class="w">    </span>link/ether<span class="w"> </span><span class="m">86</span>:03:88:45:9a:f9<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-69-18" name="__codelineno-69-18" href="#__codelineno-69-18"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.122.1/32<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth2
<a id="__codelineno-69-19" name="__codelineno-69-19" href="#__codelineno-69-19"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
</code></pre></div>
<p>A common cause of this error are listed below.</p>
<h4 id="suboptimal-link-quality">Suboptimal Link Quality<a class="headerlink" href="#suboptimal-link-quality" title="Permanent link">&para;</a></h4>
<p>The System Example Design does not support auto-negotiation or link training, it uses fixed analog settings optimized for active optical cables (AOC). Validated with FS Q28-AO05 (5 m / 16 ft) 100G QSFP28 AOC and FS Q28-PC01 (1 m / 3 ft) 100G QSFP28 passive DAC. Longer DAC cables or different cable types (length, vendor, optical) may require manual tuning of the Ethernet interface analog settings.</p>
<p>Before debugging, ensure cables are properly connected to both development kits. Begin by assessing link health using the procedure in <a href="#reading-the-ethernet-subsystem-ip-configuration-and-status-registers-with-the-hps">Reading the Ethernet Subsystem IP Configuration and Status Registers with the HPS</a>. If a port shows degraded status and a DAC cable is used, adjust analog settings as described in <a href="#enabling-transceiver-tool-kit-for-the-ethernet-subsystem">Enabling Transceiver Tool Kit for the Ethernet Subsystem</a>. Run BER and Eye Viewer tests; if results are suboptimal, follow the guidance in section <a href="https://www.intel.com/content/www/us/en/docs/programmable/683872/current/running-link-optimization-tests.html">7.2.7 of the F-Tile Architecture and PMA and FEC Direct PHY IP User Guide</a>.</p>
<h3 id="system-debug-tools">System Debug Tools<a class="headerlink" href="#system-debug-tools" title="Permanent link">&para;</a></h3>
<h4 id="reading-the-ethernet-subsystem-ip-configuration-and-status-registers-with-the-hps">Reading the Ethernet Subsystem IP Configuration and Status Registers with the HPS<a class="headerlink" href="#reading-the-ethernet-subsystem-ip-configuration-and-status-registers-with-the-hps" title="Permanent link">&para;</a></h4>
<p>The HPS exposes the Ethernet Subsystem IP Configuration and Status Registers (CSR) via the Linux file system, providing real-time visibility into Ethernet interface status. This data is useful for debugging link-related issues.</p>
<p>To capture a CSR snapshot, log into the HPS through a serial session and run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span>cat<span class="w"> </span>/sys/kernel/debug/hssiss_dbg/dumpcsr<span class="w"> </span>
</code></pre></div>
<p>The output will resemble the following transcript:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>Dumping<span class="w"> </span>device<span class="w"> </span>feature<span class="w"> </span>registers
<a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="w">        </span><span class="m">0</span>:<span class="w"> </span><span class="m">10003015</span>
<a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a><span class="w">        </span><span class="m">4</span>:<span class="w"> </span><span class="m">30000000</span>
<a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a><span class="w">        </span><span class="m">8</span>:<span class="w"> </span>18418b9d
<a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a><span class="w">        </span>c:<span class="w"> </span>99a078ad
<a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a><span class="w">        </span><span class="m">10</span>:<span class="w"> </span>d9db4a9b
<a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a><span class="w">        </span><span class="m">14</span>:<span class="w"> </span>4118a7cb
<a id="__codelineno-71-8" name="__codelineno-71-8" href="#__codelineno-71-8"></a><span class="w">        </span><span class="m">18</span>:<span class="w"> </span>c0
<a id="__codelineno-71-9" name="__codelineno-71-9" href="#__codelineno-71-9"></a><span class="w">        </span>1c:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-10" name="__codelineno-71-10" href="#__codelineno-71-10"></a><span class="w">        </span><span class="m">20</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-11" name="__codelineno-71-11" href="#__codelineno-71-11"></a><span class="w">        </span><span class="m">24</span>:<span class="w"> </span>31c
<a id="__codelineno-71-12" name="__codelineno-71-12" href="#__codelineno-71-12"></a>Dumping<span class="w"> </span>other<span class="w"> </span>CSR<span class="w"> </span>registers
<a id="__codelineno-71-13" name="__codelineno-71-13" href="#__codelineno-71-13"></a>HSSISS_CSR_VER:<span class="w"> </span><span class="m">20000</span>
<a id="__codelineno-71-14" name="__codelineno-71-14" href="#__codelineno-71-14"></a>HSSISS_CSR_COMMON_FEATURE_LIST:<span class="w"> </span>c005
<a id="__codelineno-71-15" name="__codelineno-71-15" href="#__codelineno-71-15"></a>Dumping<span class="w"> </span>port<span class="w"> </span>attributes
<a id="__codelineno-71-16" name="__codelineno-71-16" href="#__codelineno-71-16"></a><span class="w">        </span><span class="m">0</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-17" name="__codelineno-71-17" href="#__codelineno-71-17"></a><span class="w">        </span><span class="m">1</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-18" name="__codelineno-71-18" href="#__codelineno-71-18"></a><span class="w">        </span><span class="m">2</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-19" name="__codelineno-71-19" href="#__codelineno-71-19"></a><span class="w">        </span><span class="m">3</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-20" name="__codelineno-71-20" href="#__codelineno-71-20"></a><span class="w">        </span><span class="m">4</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-21" name="__codelineno-71-21" href="#__codelineno-71-21"></a><span class="w">        </span><span class="m">5</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-22" name="__codelineno-71-22" href="#__codelineno-71-22"></a><span class="w">        </span><span class="m">6</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-23" name="__codelineno-71-23" href="#__codelineno-71-23"></a><span class="w">        </span><span class="m">7</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-24" name="__codelineno-71-24" href="#__codelineno-71-24"></a><span class="w">        </span><span class="m">8</span>:<span class="w"> </span>a40415
<a id="__codelineno-71-25" name="__codelineno-71-25" href="#__codelineno-71-25"></a><span class="w">        </span><span class="m">9</span>:<span class="w"> </span>a40415
<a id="__codelineno-71-26" name="__codelineno-71-26" href="#__codelineno-71-26"></a><span class="w">        </span>a:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-27" name="__codelineno-71-27" href="#__codelineno-71-27"></a><span class="w">        </span>b:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-28" name="__codelineno-71-28" href="#__codelineno-71-28"></a><span class="w">        </span>c:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-29" name="__codelineno-71-29" href="#__codelineno-71-29"></a><span class="w">        </span>d:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-30" name="__codelineno-71-30" href="#__codelineno-71-30"></a><span class="w">        </span>e:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-31" name="__codelineno-71-31" href="#__codelineno-71-31"></a><span class="w">        </span><span class="m">10</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-32" name="__codelineno-71-32" href="#__codelineno-71-32"></a><span class="w">        </span><span class="m">11</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-33" name="__codelineno-71-33" href="#__codelineno-71-33"></a><span class="w">        </span><span class="m">12</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-34" name="__codelineno-71-34" href="#__codelineno-71-34"></a><span class="w">        </span><span class="m">13</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-35" name="__codelineno-71-35" href="#__codelineno-71-35"></a>HSSISS_CSR_CMDSTS:<span class="w"> </span><span class="m">5</span>
<a id="__codelineno-71-36" name="__codelineno-71-36" href="#__codelineno-71-36"></a>HSSISS_CSR_CTRLADDR:<span class="w"> </span>50020c06
<a id="__codelineno-71-37" name="__codelineno-71-37" href="#__codelineno-71-37"></a>HSSISS_CSR_RD_DATA:<span class="w"> </span>f
<a id="__codelineno-71-38" name="__codelineno-71-38" href="#__codelineno-71-38"></a>HSSISS_CSR_WR_DATA:<span class="w"> </span>9ee00d
<a id="__codelineno-71-39" name="__codelineno-71-39" href="#__codelineno-71-39"></a>HSSISS_CSR_GMII_TX_LATENCY:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-40" name="__codelineno-71-40" href="#__codelineno-71-40"></a>HSSISS_CSR_GMII_RX_LATENCY:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-41" name="__codelineno-71-41" href="#__codelineno-71-41"></a>Dumping<span class="w"> </span>port<span class="w"> </span>status
<a id="__codelineno-71-42" name="__codelineno-71-42" href="#__codelineno-71-42"></a><span class="w">        </span><span class="m">0</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-43" name="__codelineno-71-43" href="#__codelineno-71-43"></a><span class="w">        </span><span class="m">1</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-44" name="__codelineno-71-44" href="#__codelineno-71-44"></a><span class="w">        </span><span class="m">2</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-45" name="__codelineno-71-45" href="#__codelineno-71-45"></a><span class="w">        </span><span class="m">3</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-46" name="__codelineno-71-46" href="#__codelineno-71-46"></a><span class="w">        </span><span class="m">4</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-47" name="__codelineno-71-47" href="#__codelineno-71-47"></a><span class="w">        </span><span class="m">5</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-48" name="__codelineno-71-48" href="#__codelineno-71-48"></a><span class="w">        </span><span class="m">6</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-49" name="__codelineno-71-49" href="#__codelineno-71-49"></a><span class="w">        </span><span class="m">7</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-50" name="__codelineno-71-50" href="#__codelineno-71-50"></a><span class="w">        </span><span class="m">8</span>:<span class="w"> </span>e00094
<a id="__codelineno-71-51" name="__codelineno-71-51" href="#__codelineno-71-51"></a><span class="w">        </span><span class="m">9</span>:<span class="w"> </span>e00094
<a id="__codelineno-71-52" name="__codelineno-71-52" href="#__codelineno-71-52"></a><span class="w">        </span>a:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-53" name="__codelineno-71-53" href="#__codelineno-71-53"></a><span class="w">        </span>b:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-54" name="__codelineno-71-54" href="#__codelineno-71-54"></a><span class="w">        </span>c:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-55" name="__codelineno-71-55" href="#__codelineno-71-55"></a><span class="w">        </span>d:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-56" name="__codelineno-71-56" href="#__codelineno-71-56"></a><span class="w">        </span>e:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-57" name="__codelineno-71-57" href="#__codelineno-71-57"></a><span class="w">        </span><span class="m">10</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-58" name="__codelineno-71-58" href="#__codelineno-71-58"></a><span class="w">        </span><span class="m">11</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-59" name="__codelineno-71-59" href="#__codelineno-71-59"></a><span class="w">        </span><span class="m">12</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-60" name="__codelineno-71-60" href="#__codelineno-71-60"></a><span class="w">        </span><span class="m">13</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-61" name="__codelineno-71-61" href="#__codelineno-71-61"></a>HSSISS_CSR_TSE_CTRL:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-62" name="__codelineno-71-62" href="#__codelineno-71-62"></a>HSSISS_CSR_DBG_CTRL:<span class="w"> </span><span class="m">62000</span>
<a id="__codelineno-71-63" name="__codelineno-71-63" href="#__codelineno-71-63"></a>HSSISS_CSR_HOTPLUG_DBG_CTRL:<span class="w"> </span>9c400000
<a id="__codelineno-71-64" name="__codelineno-71-64" href="#__codelineno-71-64"></a>HSSISS_CSR_HOTPLUG_DBG_STS:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-71-65" name="__codelineno-71-65" href="#__codelineno-71-65"></a><span class="m">0</span>
<a id="__codelineno-71-66" name="__codelineno-71-66" href="#__codelineno-71-66"></a>root@agilex7dksiagi027fc:~#
</code></pre></div>
<p>To interpret the output from dumpcsr, refer to section <a href="https://www.intel.com/content/www/us/en/docs/programmable/773413/current/register-descriptions.html">7. Register Descriptions</a> in the Ethernet Subsystem FPGA IP User Guide. Offsets listed under <code>Dumping device feature</code> registers correspond to section <a href="https://www.intel.com/content/www/us/en/docs/programmable/773413/24-3-1/subsystem-registers.html">7.1 Subsystem Registers</a>.</p>
<p>For debugging, the most relevant data appears under <code>Dumping port status</code>. Registers with a read value of 0 indicate Ethernet Subsystem ports not used by the System Example Design.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>Dumping<span class="w"> </span>port<span class="w"> </span>status
<a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>.
<a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a>.<span class="w"> </span>
<a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="m">7</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a><span class="m">8</span>:<span class="w"> </span>a00180
<a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a><span class="m">9</span>:<span class="w"> </span>e00194
<a id="__codelineno-72-7" name="__codelineno-72-7" href="#__codelineno-72-7"></a>a:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-72-8" name="__codelineno-72-8" href="#__codelineno-72-8"></a>.
<a id="__codelineno-72-9" name="__codelineno-72-9" href="#__codelineno-72-9"></a>.<span class="w">     </span>
</code></pre></div>
<p>To decode status for ports 8 and 9, refer to section <a href="https://www.intel.com/content/www/us/en/docs/programmable/773413/current/hssi-ethernet-port-x-status.html">7.1.14 HSSI Ethernet Port X Status</a> in the Ethernet Subsystem FPGA IP User Guide.</p>
<p><strong>Example</strong></p>
<p>Port 8 status at offset <code>0xA00180</code>:</p>
<table>
<thead>
<tr>
<th><em>Bit</em></th>
<th><em>Value</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>31:27</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>26</td>
<td>0</td>
<td>No parity errors detected</td>
</tr>
<tr>
<td>25:24</td>
<td>0</td>
<td>Not applicable for F-Tile</td>
</tr>
<tr>
<td>23</td>
<td>1</td>
<td>tx_pll_locked status bit</td>
</tr>
<tr>
<td>22</td>
<td>0</td>
<td>rx_pcs_ready status bit</td>
</tr>
<tr>
<td>21</td>
<td>1</td>
<td>tx_lanes_stable status bit</td>
</tr>
<tr>
<td>20</td>
<td>0</td>
<td>Not applicable for F-Tile</td>
</tr>
<tr>
<td>19</td>
<td>0</td>
<td>Not applicable for F-Tile</td>
</tr>
<tr>
<td>18</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>17</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>16</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>15</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>14:13</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>12:11</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>10</td>
<td>0</td>
<td>tx_unidir_control register bit 1 status - unidirectional remote fault disable</td>
</tr>
<tr>
<td>9</td>
<td>0</td>
<td>tx_unidir_control register bit 2 status - unidirectional force remote fault</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>Remote Fault status bit</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>Local Fault status bit</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
<td>Unidiectional enable status bit (Clause 66)</td>
</tr>
<tr>
<td>5</td>
<td>0</td>
<td>Link Fault Generation Enable status bit (Clause 66)</td>
</tr>
<tr>
<td>4</td>
<td>0</td>
<td>rx_block_lock status bit</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>rx_am_lock status bit</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>o_cdr_lock status bit</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>o_rx_hi_ber status bit</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<p><strong>Table 18.</strong> Port 8 Offset <code>0xA00180</code> Decoding.</p>
<p>Port 9 status at offset <code>E00194</code>:</p>
<table>
<thead>
<tr>
<th><em>Bit</em></th>
<th><em>Value</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>31:27</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>26</td>
<td>0</td>
<td>No parity errors detected</td>
</tr>
<tr>
<td>25:24</td>
<td>0</td>
<td>Not applicable for F-Tile</td>
</tr>
<tr>
<td>23</td>
<td>1</td>
<td>tx_pll_locked status bit</td>
</tr>
<tr>
<td>22</td>
<td>1</td>
<td>rx_pcs_ready status bit</td>
</tr>
<tr>
<td>21</td>
<td>1</td>
<td>tx_lanes_stable status bit</td>
</tr>
<tr>
<td>20</td>
<td>0</td>
<td>Not applicable for F-Tile</td>
</tr>
<tr>
<td>19</td>
<td>0</td>
<td>Not applicable for F-Tile</td>
</tr>
<tr>
<td>18</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>17</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>16</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>15</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>14:13</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>12:11</td>
<td>0</td>
<td>Reserved</td>
</tr>
<tr>
<td>10</td>
<td>0</td>
<td>tx_unidir_control register bit 1 status - unidirectional remote fault disable</td>
</tr>
<tr>
<td>9</td>
<td>0</td>
<td>tx_unidir_control register bit 2 status - unidirectional force remote fault</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>Remote Fault status bit (Only functional if feature is enabled)</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>Local Fault status bit (Only functional if feature is enabled)</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
<td>Unidiectional enable status bit (Clause 66)</td>
</tr>
<tr>
<td>5</td>
<td>0</td>
<td>Link Fault Generation Enable status bit (Clause 66)</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>rx_block_lock status bit</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>rx_am_lock status bit</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>o_cdr_lock status bit</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>o_rx_hi_ber status bit</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<p><strong>Table 19.</strong> Port 9 Offset <code>0xA00180</code> Decoding.</p>
<p>From the decoded register values, Port 8 shows TX is operational (<code>tx_pll_locked</code> and <code>tx_lanes_stable</code> asserted), but RX is not ready — its CDR failed to recover a clock signal from the link partner. Port 9 shows no TX/RX issues; however, bits 8 (Remote Fault) and 9 (Local Fault) are asserted. These are latched fault indicators and must be cleared manually. In this case, the remote fault likely occurred during initialization and is not a concern if the link is stable.</p>
<p>Bits 23, 22, 21, 4, 5, 3, 2, and 1 reflect TX/RX status for each port and help isolate whether the issue is hardware or software-related, and whether it affects TX, RX, or both.</p>
<p>For detailed signal descriptions, refer to section <a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/status-interface.html">7.1 Status Interface</a> in the F-Tile Ethernet FPGA Hard IP User Guide.</p>
<h4 id="access-to-the-ethernet-subsystem-ip-configuration-and-status-registers-with-the-hps">Access to the Ethernet Subsystem IP Configuration and Status Registers with the HPS<a class="headerlink" href="#access-to-the-ethernet-subsystem-ip-configuration-and-status-registers-with-the-hps" title="Permanent link">&para;</a></h4>
<p>Access to the Ethernet Subsystem CSR is available through the HPS via the Linux file system. Use the following syntax to read or write CSR registers. These commands must be executed from the following path:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>/sys/kernel/debug/hssiss_dbg
</code></pre></div>
<p><em>Write Operation Syntax</em> – Use the following syntax to write to Ethernet Subsystem CSR registers.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&lt;base&gt; &lt;offset&gt; &lt;direct&gt; &lt;wr_value&gt;&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>direct_reg
</code></pre></div>
<p><em>Read Operation Syntax</em> – Use the following syntax to read to Ethernet Subsystem CSR registers.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&lt;base&gt; &lt;offset&gt; &lt;direct&gt; &lt;wr_value&gt;&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>direct_reg
<a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a>cat<span class="w"> </span>direct_reg
</code></pre></div>
<p>Where:</p>
<table>
<thead>
<tr>
<th><em>Parameter</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>base</td>
<td>Base address from the Ethernet Subsystem IP. The Address map can be found in section <a href="https://www.intel.com/content/www/us/en/docs/programmable/773413/current/f-tile-address-maps.html">7.3. F-Tile Address Maps</a> from the Ethernet Subsystem FPGA IP User Guide</td>
</tr>
<tr>
<td>offset</td>
<td>Register offset for access. See the F-Tile Ethernet FPGA Hard IP Register documentation for address and description of Ethernet Port registers within the Ethernet Subsystem IP.</td>
</tr>
<tr>
<td>direct</td>
<td>Set to '1' to access Ethernet port registers; set to '0' to access Ethernet Subsystem CSRs</td>
</tr>
<tr>
<td>wr_value</td>
<td>Data used for write operations</td>
</tr>
</tbody>
</table>
<p><strong>Table 20.</strong> <code>direct_reg</code> Fields.</p>
<p><strong>Example</strong></p>
<p>To trigger a soft global reset on Port 8 (<code>eth1</code>), set bit [0] of the <code>eth_reset</code> register at offset <code>0x108</code>. See transcript below for expected output.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>root@agilex7dksiagi027fc:~#<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/sys/kernel/debug/hssiss_dbg/
<a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;0x1200000 0x108 1 1&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>direct_reg
<a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a><span class="o">[</span><span class="m">14012</span>.863321<span class="o">]</span><span class="w"> </span>intel_fpga_eth<span class="w"> </span>soc:hssi_0_eth<span class="w"> </span>eth1:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Down
</code></pre></div>
<p>After the write, interface <code>eth1</code> transitions to down state.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#<span class="w"> </span>ip<span class="w"> </span>addr
<a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="m">1</span>:<span class="w"> </span>lo:<span class="w"> </span>&lt;LOOPBACK,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">65536</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UNKNOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a><span class="w">    </span>link/loopback<span class="w"> </span><span class="m">00</span>:00:00:00:00:00<span class="w"> </span>brd<span class="w"> </span><span class="m">00</span>:00:00:00:00:00
<a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">127</span>.0.0.1/8<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>lo
<a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a><span class="w">    </span>inet6<span class="w"> </span>::1/128<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>noprefixroute<span class="w"> </span>
<a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a><span class="m">2</span>:<span class="w"> </span>eth0:<span class="w"> </span>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a><span class="w">    </span>link/ether<span class="w"> </span>e2:06:d6:88:ef:23<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-77-10" name="__codelineno-77-10" href="#__codelineno-77-10"></a><span class="m">3</span>:<span class="w"> </span>teql0:<span class="w"> </span>&lt;NOARP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>noop<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">100</span>
<a id="__codelineno-77-11" name="__codelineno-77-11" href="#__codelineno-77-11"></a><span class="w">    </span>link/void<span class="w"> </span>
<a id="__codelineno-77-12" name="__codelineno-77-12" href="#__codelineno-77-12"></a><span class="m">4</span>:<span class="w"> </span>eth1:<span class="w"> </span>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-77-13" name="__codelineno-77-13" href="#__codelineno-77-13"></a><span class="w">    </span>link/ether<span class="w"> </span>fa:74:c3:a3:30:c1<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-77-14" name="__codelineno-77-14" href="#__codelineno-77-14"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.121.1/32<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth1
<a id="__codelineno-77-15" name="__codelineno-77-15" href="#__codelineno-77-15"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-77-16" name="__codelineno-77-16" href="#__codelineno-77-16"></a><span class="m">5</span>:<span class="w"> </span>eth2:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-77-17" name="__codelineno-77-17" href="#__codelineno-77-17"></a><span class="w">    </span>link/ether<span class="w"> </span><span class="m">86</span>:03:88:45:9a:f9<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-77-18" name="__codelineno-77-18" href="#__codelineno-77-18"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.122.1/32<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth2
<a id="__codelineno-77-19" name="__codelineno-77-19" href="#__codelineno-77-19"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-77-20" name="__codelineno-77-20" href="#__codelineno-77-20"></a><span class="w">    </span>inet6<span class="w"> </span><span class="m">2001</span>:db8:abcd:13::1/64<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>
<a id="__codelineno-77-21" name="__codelineno-77-21" href="#__codelineno-77-21"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-77-22" name="__codelineno-77-22" href="#__codelineno-77-22"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#
</code></pre></div>
<p>Read <code>eth_reset_status</code> (offset <code>0x10C</code>) to confirm reset acknowledgment from the controller.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;0x1200000 0x10C 1&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>direct_reg
<a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#<span class="w"> </span>cat<span class="w"> </span>direct_reg<span class="w"> </span>
<a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="m">5500</span>
</code></pre></div>
<p><code>eth_reset_status</code> (<code>0x10C</code>) returns a decimal value indicating the Ethernet interface is in a reset cycle. To exit global reset on Port 8, clear bit [0] of eth_reset (<code>0x108</code>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;0x1200000 0x108 1 0&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>direct_reg
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="o">[</span><span class="m">14455</span>.979357<span class="o">]</span><span class="w"> </span>intel_fpga_eth<span class="w"> </span>soc:hssi_0_eth:<span class="w"> </span>DBG:<span class="w"> </span>eth_ftile_tx_rx_user_flow<span class="w"> </span><span class="nv">speed</span><span class="o">=</span><span class="m">25000</span><span class="w"> </span><span class="nv">num_vl</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">num_fl</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">num_pl</span><span class="o">=</span><span class="m">1</span>
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="o">[</span><span class="m">14455</span>.990799<span class="o">]</span><span class="w"> </span>intel_fpga_eth<span class="w"> </span>soc:hssi_0_eth:<span class="w"> </span>DBG:<span class="w"> </span>eth_ftile_tx_rx_user_flow<span class="w"> </span>ETH_TX_PTP_READY<span class="w"> </span>-<span class="w"> </span>tx_ref_pl:0<span class="w"> </span>tx_extra_latency:0x00031072<span class="w"> </span>tx_tam_adjust:-1711153
<a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a><span class="o">[</span><span class="m">14456</span>.007504<span class="o">]</span><span class="w"> </span>intel_fpga_eth<span class="w"> </span>soc:hssi_0_eth:<span class="w"> </span>DBG:<span class="w"> </span>eth_ftile_tx_rx_user_flow<span class="w"> </span>ETH_RX_PTP_READY<span class="w"> </span>-<span class="w"> </span>rx_ref_pl:0<span class="w"> </span>rx_extra_latency:0x800369d0<span class="w"> </span>rx_tam_adjust:-1716888
<a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a><span class="o">[</span><span class="m">14456</span>.021427<span class="o">]</span><span class="w"> </span>intel_fpga_eth<span class="w"> </span>soc:hssi_0_eth<span class="w"> </span>eth1:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span>-<span class="w"> </span>25Gbps/Full<span class="w"> </span>-<span class="w"> </span>flow<span class="w"> </span>control<span class="w"> </span>rx/tx
<a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#<span class="w"> </span>
</code></pre></div>
<p>Read <code>eth_reset_status</code> (<code>0x10C</code>) to verify reset cycle completion.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;0x1200000 0x10C 1&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>direct_reg
<a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#<span class="w"> </span>cat<span class="w"> </span>direct_reg<span class="w">                                                                                               </span>
<a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="m">6607</span>
</code></pre></div>
<p>Verify that interface <code>eth1</code> is in the UP state.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#<span class="w"> </span>ip<span class="w"> </span>addr<span class="w">                                                                                              </span>
<a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="m">1</span>:<span class="w"> </span>lo:<span class="w"> </span>&lt;LOOPBACK,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">65536</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UNKNOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a><span class="w">    </span>link/loopback<span class="w"> </span><span class="m">00</span>:00:00:00:00:00<span class="w"> </span>brd<span class="w"> </span><span class="m">00</span>:00:00:00:00:00
<a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">127</span>.0.0.1/8<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>lo
<a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a><span class="w">    </span>inet6<span class="w"> </span>::1/128<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>noprefixroute<span class="w"> </span>
<a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a><span class="m">2</span>:<span class="w"> </span>eth0:<span class="w"> </span>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a><span class="w">    </span>link/ether<span class="w"> </span>e2:06:d6:88:ef:23<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-81-10" name="__codelineno-81-10" href="#__codelineno-81-10"></a><span class="m">3</span>:<span class="w"> </span>teql0:<span class="w"> </span>&lt;NOARP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>noop<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">100</span>
<a id="__codelineno-81-11" name="__codelineno-81-11" href="#__codelineno-81-11"></a><span class="w">    </span>link/void<span class="w"> </span>
<a id="__codelineno-81-12" name="__codelineno-81-12" href="#__codelineno-81-12"></a><span class="m">4</span>:<span class="w"> </span>eth1:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-81-13" name="__codelineno-81-13" href="#__codelineno-81-13"></a><span class="w">    </span>link/ether<span class="w"> </span>fa:74:c3:a3:30:c1<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-81-14" name="__codelineno-81-14" href="#__codelineno-81-14"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.121.1/32<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth1
<a id="__codelineno-81-15" name="__codelineno-81-15" href="#__codelineno-81-15"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-81-16" name="__codelineno-81-16" href="#__codelineno-81-16"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">169</span>.254.221.176/16<span class="w"> </span>brd<span class="w"> </span><span class="m">169</span>.254.255.255<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth1
<a id="__codelineno-81-17" name="__codelineno-81-17" href="#__codelineno-81-17"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-81-18" name="__codelineno-81-18" href="#__codelineno-81-18"></a><span class="w">    </span>inet6<span class="w"> </span>fe80::f874:c3ff:fea3:30c1/64<span class="w"> </span>scope<span class="w"> </span>link<span class="w"> </span>proto<span class="w"> </span>kernel_ll<span class="w"> </span>
<a id="__codelineno-81-19" name="__codelineno-81-19" href="#__codelineno-81-19"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-81-20" name="__codelineno-81-20" href="#__codelineno-81-20"></a><span class="m">5</span>:<span class="w"> </span>eth2:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<a id="__codelineno-81-21" name="__codelineno-81-21" href="#__codelineno-81-21"></a><span class="w">    </span>link/ether<span class="w"> </span><span class="m">86</span>:03:88:45:9a:f9<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<a id="__codelineno-81-22" name="__codelineno-81-22" href="#__codelineno-81-22"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.122.1/32<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth2
<a id="__codelineno-81-23" name="__codelineno-81-23" href="#__codelineno-81-23"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-81-24" name="__codelineno-81-24" href="#__codelineno-81-24"></a><span class="w">    </span>inet6<span class="w"> </span><span class="m">2001</span>:db8:abcd:13::1/64<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>
<a id="__codelineno-81-25" name="__codelineno-81-25" href="#__codelineno-81-25"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<a id="__codelineno-81-26" name="__codelineno-81-26" href="#__codelineno-81-26"></a>root@agilex7dksiagi027fc:/sys/kernel/debug/hssiss_dbg#
</code></pre></div>
<h4 id="enabling-transceiver-tool-kit-for-the-ethernet-subsystem">Enabling Transceiver Tool Kit for the Ethernet Subsystem<a class="headerlink" href="#enabling-transceiver-tool-kit-for-the-ethernet-subsystem" title="Permanent link">&para;</a></h4>
<p>The system example design supports the F-Tile Transceiver Toolkit for debugging potential link quality issues. Follow the next steps to enable the Transceiver Toolkit:</p>
<ol>
<li>With Quartus&reg; Prime Pro version 25.1.1, open the system example design project.</li>
<li>In 'Project Navigator' click on 'IP Components' Tab.</li>
<li>Double click on the entity 'inst_hssi_25G', the IP Parameter Editor will open the Ethernet Subsystem IP instance.</li>
<li>In the 'HSSI Subsystem' &gt;&gt; 'Device 0 Configuration' &gt;&gt; 'Main Configuration' tab, set to 'Enable' the 'Enable JTAG to Avalon Master Bridge' parameter. Refer to the screen shot below.</li>
<li>In the 'HSSI Subsystem' &gt;&gt; 'Device 0 Configuration' &gt;&gt; 'F-Tile IP Configuration' &gt;&gt; 'Port 8 Configuration' &gt;&gt; 'P8 IP' tab, click on the 'Enable debug endpoint for transceiver toolkit' parameter.</li>
<li>repeat step 5 for 'Port 9 Configuration' &gt;&gt; 'P9 IP' tab. Refer to the screen shot below.</li>
<li>Save and regenerate the IP.</li>
<li>Recompile the Altera Quartus Prime project.</li>
<li>Regenerate the software with the new generated 'core.rbf' file.</li>
</ol>
<p>Refer to section '<a href="https://www.intel.com/content/www/us/en/docs/programmable/683872/current/f-tile-transceiver-debugging-flow-w.html">7.2. F-Tile Transceiver Debugging Flow Walkthrough</a>' from the 'F-Tile Architecture and PMA and FEC Direct PHY IP User Guide' for more information on link quality related issues and their resolution. Sections '<a href="https://www.intel.com/content/www/us/en/docs/programmable/683872/current/running-ber-tests.html">7.2.5. Running BER Tests</a>' and '<a href="https://www.intel.com/content/www/us/en/docs/programmable/683872/current/running-eye-viewer-tests.html">7.2.6. Running Eye Viewer Tests</a>' are essential to qualify the Ethernet link health.</p>
<p><a class="glightbox" href="../images/mcqos_25g_ttk_ftile_1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/mcqos_25g_ttk_ftile_1.png" /></a></p>
<p><strong>Figure 11.</strong> Set 'Enable JTAG to Avalon Master Bridge' for the Ethernet Subystem IP.</p>
<p><a class="glightbox" href="../images/mcqos_25g_ttk_ftile_2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/mcqos_25g_ttk_ftile_2.png" /></a></p>
<p><strong>Figure 12.</strong> Set 'Enable debug endpoint for transceiver toolkit' for both Ethernet Subystem IP ports.</p>
<h2 id="simulation">Simulation<a class="headerlink" href="#simulation" title="Permanent link">&para;</a></h2>
<p>The Multi-Channel 25GbE Precision Time Protocol System Example Design includes a suite of standalone UVM simulation tests for hardware verification. These tests validate the Quartus&reg; project within a Universal Verification Methodology (UVM) environment, ensuring functional correctness.</p>
<p>The UVM suite provides a structured framework for simulating various operating conditions and use cases, enabling thorough validation of system behavior.</p>
<h3 id="simulation-environment-setup">Simulation Environment Setup<a class="headerlink" href="#simulation-environment-setup" title="Permanent link">&para;</a></h3>
<p>The following third-party tools and associated verification IPs, along with valid licenses, are required to execute the UVM simulation test cases for the design:</p>
<table>
<thead>
<tr>
<th><em>Design Tool</em></th>
<th><em>Version</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>Synopsys VCS* Tool</td>
<td>V-2023.12-SP2-1</td>
</tr>
<tr>
<td>Altera&reg; Quartus&reg; Prime Pro Tool</td>
<td>25.1.1</td>
</tr>
<tr>
<td>Synopsys DesignWare VIP</td>
<td>W-2025.03C</td>
</tr>
<tr>
<td>Python</td>
<td>3.7.7</td>
</tr>
<tr>
<td>Perl</td>
<td>5.8.8</td>
</tr>
<tr>
<td>CMAKE</td>
<td>3.11.4</td>
</tr>
<tr>
<td>GCC</td>
<td>7.2.0</td>
</tr>
</tbody>
</table>
<p>The system testbench instantiates two AXI Synopsys Verification IP (VIP) modules, requiring a separate license in addition to the Synopsys VCS simulation tool license.</p>
<h3 id="simulation-directory">Simulation Directory<a class="headerlink" href="#simulation-directory" title="Permanent link">&para;</a></h3>
<p>Simulation source files and scripts are located at: <code>$TOP_FOLDER/src/hw/verification/2P25G_DV</code></p>
<h3 id="uvm-test-use-cases">UVM Test Use Cases<a class="headerlink" href="#uvm-test-use-cases" title="Permanent link">&para;</a></h3>
<p>The design includes three UVM test cases to validate the following functionality:</p>
<ul>
<li>Configuration and status register access</li>
<li>DMA Subsystem &lt;-&gt; Ethernet Subsystem data path</li>
<li>Packet Generator &lt;-&gt; Ethernet Subsystem data path</li>
</ul>
<p>The test cases are:</p>
<p><strong>1. CSR access test</strong></p>
<p>The test exercises full configuration and status register access across the DMA Subsystem, Packet Switch Subsystem, and Ethernet Subsystem. After initial system configuration and Ethernet link bring-up, all registers are read and compared against expected default values. The test then performs write-read operations at target offsets to validate register accessibility.</p>
<p>Test Case: <code>fptp_csr_test</code>
Test Case Sequence: <code>fptp_csr_seq</code></p>
<p><strong>2. Data path test - DMA base test -</strong></p>
<p>This test exercises all DMA ports in the subsystem. The sequence starts with Ethernet link bring-up, followed by DMA Subsystem and Packet Switch configuration. Once initialized, packets are submitted to all DMA queues and looped back through the Ethernet Subsystem to validate end-to-end data path integrity.</p>
<p>Test Case: <code>fptp_dma_base_test</code>
Test Case Sequence: <code>fptp_dma_base_seq</code></p>
<p><strong>3. Data path test - QoS user test -</strong></p>
<p>This test exercises the Packet Switch user client port. The sequence begins with Ethernet link bring-up, followed by Packet Switch, Packet generator and DMA Subsystem configuration. Once initialized, the packet generator connected to the user client port starts transmitting traffic. Packets are looped back through the Ethernet Subsystem and routed back to the generator, validating the end-to-end path.</p>
<p>Test Case: <code>fptp_qos_usr_test</code>
Test Case Sequence: <code>fptp_qos_usr_seq</code></p>
<h3 id="configuring-uvm-environment">Configuring UVM Environment<a class="headerlink" href="#configuring-uvm-environment" title="Permanent link">&para;</a></h3>
<p>Export the simulation folder path to the environment with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PTP_ROOTDIR</span><span class="o">=</span><span class="nv">$TOP_FOLDER</span>/src/hw/verification/2P25G_DV
</code></pre></div>
<p>Update <code>setup.sh</code> with values from your local environment to configure simulation variables. The script is located at: <code>$TOP_FOLDER/src/hw/verification/2P25G_DV/env/setup.sh</code></p>
<p>The following parameter variables are required for simulation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">WORKDIR</span><span class="o">=</span><span class="nv">$PTP_ROOTDIR</span>
<a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">DESIGN_DIR</span><span class="o">=</span><span class="nv">$PTP_ROOTDIR</span>/../../src
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="nb">export</span><span class="w"> </span><span class="nv">QUARTUS_HOME</span><span class="o">=</span><span class="nv">$QUARTUS_ROOTDIR</span>
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="nb">export</span><span class="w"> </span><span class="nv">QUARTUS_INSTALL_DIR</span><span class="o">=</span><span class="nv">$QUARTUS_ROOTDIR</span>
<a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a><span class="nb">export</span><span class="w"> </span><span class="nv">QUARTUS_ROOTDIR_OVERRIDE</span><span class="o">=</span><span class="nv">$QUARTUS_ROOTDIR</span>
<a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a><span class="nb">export</span><span class="w"> </span><span class="nv">DESIGNWARE_HOME</span><span class="o">=</span><span class="w"> </span>&lt;synopsys<span class="w"> </span>vip<span class="w"> </span>location&gt;
<a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a><span class="nb">export</span><span class="w"> </span><span class="nv">VCS_HOME</span><span class="o">=</span>&lt;Synopsys<span class="w"> </span>VCS<span class="w"> </span>simulation<span class="w"> </span>installation<span class="w"> </span>dir&gt;
<a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a><span class="nb">export</span><span class="w"> </span><span class="nv">UVM_HOME</span><span class="o">=</span><span class="nv">$VCS_HOME</span>/etc/uvm-1.2
<a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a><span class="nb">export</span><span class="w"> </span><span class="nv">SYNTH_DIR</span><span class="o">=</span><span class="nv">$PTP_ROOTDIR</span>/../../synth
</code></pre></div>
<p><code>QUARTUS_ROOTDIR</code> and <code>TOP_FOLDER</code> must be defined as described in <a href="#environment-setup">Environment Setup</a>.</p>
<h3 id="test-flow">Test Flow<a class="headerlink" href="#test-flow" title="Permanent link">&para;</a></h3>
<p>Users must define these parameter variables and their installation path as described in <a href="#configuring-uvm-environment">Configuring UVM Environment</a> before running simulation.</p>
<ol>
<li>Navigate to the verification script folder</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>/src/hw/verification/scripts
</code></pre></div>
<ol>
<li>Generate IP RTL and compile simulation libraries. </li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>gmake<span class="w"> </span>-f<span class="w"> </span>Makefile.mk<span class="w"> </span>cmplib<span class="w"> </span><span class="nv">HSSI_25G</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>cmp.log
</code></pre></div>
<p>This step generates the system IP RTL and simulation libraries.</p>
<p>Execute this command when compiling the DUT for the first time or after any changes to project IPs. If errors occur, refer to cmp.log for details.</p>
<ol>
<li>Build IP and testbench RTL. Compile and elaborate the Design Under Test (DUT) and testbench by executing the following command:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a>gmake<span class="w"> </span>-f<span class="w"> </span>Makefile.mk<span class="w"> </span>build<span class="w"> </span><span class="nv">HSSI_25G</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">DUMP</span><span class="o">=</span><span class="m">1</span>
</code></pre></div>
<p>Set the DUMP variable to 1 to enable waveform database (VPD file) generation during simulation. This switch is optional.</p>
<p>Execute this command when compiling the DUT for the first time or after any changes to tesbench or RTL source files. </p>
<ol>
<li>Run the test case using the following simulation syntax:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>gmake<span class="w"> </span>-f<span class="w"> </span>Makefile.mk<span class="w"> </span>run<span class="w"> </span><span class="nv">TESTNAME</span><span class="o">=</span>&lt;test_case_name&gt;<span class="w"> </span><span class="nv">SEQNAME</span><span class="o">=</span>&lt;test_sequence_name&gt;<span class="w"> </span><span class="nv">SEED</span><span class="o">=</span>&lt;seed_number&gt;
</code></pre></div>
<p>Where <code>&lt;test_case_name&gt;</code> can be:</p>
<ul>
<li>fptp_csr_test</li>
<li>fptp_dma_base_test</li>
<li>fptp_qos_usr_test</li>
</ul>
<p>Each <code>&lt;test_case_name&gt;</code> corresponds to a <code>&lt;test_sequence_name&gt;</code> by replacing the <code>_test</code> suffix with <code>_seq</code>.</p>
<ul>
<li>fptp_csr_test -&gt; fptp_csr_seq</li>
<li>fptp_dma_base_test -&gt; fptp_dma_base_seq</li>
<li>fptp_qos_usr_test -&gt; fptp_qos_usr_seq</li>
</ul>
<p>The SEED parameter defines the value used to initialize the design state. Using the same SEED ensures identical test conditions across runs. This parameter is optional—if omitted, a random value is used.</p>
<p>For example, run the following command to execute the fptp_csr_test simulation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>gmake<span class="w"> </span>-f<span class="w"> </span>Makefile.mk<span class="w"> </span>run<span class="w"> </span><span class="nv">TESTNAME</span><span class="o">=</span>fptp_csr_test<span class="w"> </span><span class="nv">SEQNAME</span><span class="o">=</span>fptp_csr_seq<span class="w"> </span><span class="nv">DUMP</span><span class="o">=</span><span class="m">1</span>
</code></pre></div>
<p>You can run multiple test cases without repeating steps 2 and 3. RTL generation and compilation results remain valid as long as the source files are unchanged.</p>
<h4 id="simulation-results">Simulation Results<a class="headerlink" href="#simulation-results" title="Permanent link">&para;</a></h4>
<p>Simulation results are available under the <code>$PTP_ROOTDIR/sim/&lt;test_case_name&gt;</code> directory. If a test case is re-run, the previous results folder is renamed with a numeric sequence suffix, and a new folder is created to store the latest simulation results.</p>
<h4 id="simulation-command-summary">Simulation Command Summary<a class="headerlink" href="#simulation-command-summary" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th><em>Simulation Step</em></th>
<th><em>Command</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>IP RTL generation and simulation libraries compilation</td>
<td><code>gmake -f Makefile.mk cmplib HSSI_25G=1 \| tee cmp.log</code></td>
</tr>
<tr>
<td>Build DUT and testbench RTL</td>
<td><code>gmake -f Makefile.mk build HSSI_25G=1</code></td>
</tr>
<tr>
<td>Run Simulation</td>
<td>gmake -f Makefile.mk run TESTNAME=<test_case_name> SEQNAME=<test_sequence_name> DUMP=1</td>
</tr>
</tbody>
</table>
<h2 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://www.intel.com/content/www/us/en/docs/programmable/773413/current/introduction.html">Ethernet Subsystem FPGA IP User Guide</a></li>
<li><a href="https://www.intel.com/content/www/us/en/docs/programmable/683023/current/overview-16832.html">F-Tile Ethernet Hard IP User Guide</a></li>
<li><a href="https://www.intel.com/content/www/us/en/docs/programmable/683044/current/time-of-day-clock.html">Ethernet Design Example Components User Guide</a></li>
<li><a href="https://www.intel.com/content/www/us/en/docs/programmable/683130/current/introduction.html">Embedded Peripherals IP User Guide</a></li>
<li><a href="https://www.intel.com/content/www/us/en/docs/programmable/683872/current/running-eye-viewer-tests.html">F-Tile Architecture and PMA and FEC Direct PHY IP User Guide</a></li>
</ul>
<h2 id="notices-disclaimers">Notices &amp; Disclaimers<a class="headerlink" href="#notices-disclaimers" title="Permanent link">&para;</a></h2>
<p>Altera® Corporation technologies may require enabled hardware, software or service activation. No product or component can be absolutely secure. Performance varies by use, configuration and other factors. Your costs and results may vary. You may not use or facilitate the use of this document in connection with any infringement or other legal analysis concerning Altera or Intel products described herein. You agree to grant Altera Corporation a non-exclusive, royalty-free license to any patent claim thereafter drafted which includes subject matter disclosed herein. No license (express or implied, by estoppel or otherwise) to any intellectual property rights is granted by this document, with the sole exception that you may publish an unmodified copy. You may create software implementations based on this document and in compliance with the foregoing that are intended to execute on the Altera or Intel product(s) referenced in this document. No rights are granted to create modifications or derivatives of this document. The products described may contain design defects or errors known as errata which may cause the product to deviate from published specifications. Current characterized errata are available on request. Altera disclaims all express and implied warranties, including without limitation, the implied warranties of merchantability, fitness for a particular purpose, and non-infringement, as well as any warranty arising from course of performance, course of dealing, or usage in trade. You are responsible for safety of the overall system, including compliance with applicable safety-related requirements or standards. © Altera Corporation. Altera, the Altera logo, and other Altera marks are trademarks of Altera Corporation. Other names and brands may be claimed as the property of others.</p>
<p>OpenCL* and the OpenCL* logo are trademarks of Apple Inc. used by permission of the Khronos Group™.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 2, 2025</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 2, 2025</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../../../../../ed-ai-suite/agilex7/iseries_ofs_pcie/iseries_ofs_pcie/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Agilex 7 PCIe-Attached Example Design with OFS (I-Series, 2x R-Tile and 1x F-Tile)" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Agilex 7 PCIe-Attached Example Design with OFS (I-Series, 2x R-Tile and 1x F-Tile)
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../soc/gsrd/ug-gsrd-agx7i-soc/" class="md-footer__link md-footer__link--next" aria-label="Next: HPS GSRD User Guide" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                HPS GSRD User Guide
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.altera.com" target="_blank" rel="noopener" title="www.altera.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2 0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/altera-fpga" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/altera-fpga/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://community.intel.com/t5/FPGA/ct-p/fpga" target="_blank" rel="noopener" title="Need Help" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 18h2v-2h-2v2m1-16A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14a4 4 0 0 0-4 4h2a2 2 0 0 1 2-2 2 2 0 0 1 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5a4 4 0 0 0-4-4Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "navigation.indexes", "navigation.footer", "navigation.path", "navigation.tabs", "navigation.tabs.sticky", "search.suggest", "search.highlight", "content.code.copy", "navigation.indexes", "toc.follow"], "search": "../../../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
  <script defer src="https://cloud.umami.is/script.js" data-website-id="95a45ca2-f7f4-47e3-ab82-76a7057c6f0f"></script>
  
      <script src="../../../../../../assets/javascripts/bundle.fac441b0.min.js"></script>
      
        <script src="https://unpkg.com/tablefilter@0.7.3/dist/tablefilter/tablefilter.js"></script>
      
        <script src="../../../../../../assets/tables.js"></script>
      
        <script src="../../../../../../assets/extra.js"></script>
      
    
  <!-- Floating Need Help Button -->
  <a href="https://community.intel.com/t5/FPGA/ct-p/fpga" class="floating-help-button" target="_blank" aria-label="Ask a question in the FPGA Forum">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="10"></circle>
      <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
      <line x1="12" y1="17" x2="12.01" y2="17"></line>
    </svg>
    <span>Ask in the Forum</span>
  </a>

  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>