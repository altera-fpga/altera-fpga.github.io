
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://altera-fpga.github.io/rel-24.3.1/embedded-designs/agilex-7/f-series/soc/boot-examples/ug-linux-boot-agx7-soc/">
      
      
        <link rel="prev" href="../../fabric-config/ug-linux-fabric-config-agx7f-soc/">
      
      
        <link rel="next" href="../../xen/ug-xen-agx7f-soc/">
      
      <link rel="icon" href="../../../../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.9">
    
    
      
        <title>GHRD Linux Boot Examples - Altera FPGA Developer Site</title>
      
    
    
      <link rel="stylesheet" href="../../../../../../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../../../../../../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#intro" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../../.." title="Altera FPGA Developer Site" class="md-header__button md-logo" aria-label="Altera FPGA Developer Site" data-md-component="logo">
      
  <img src="../../../../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Altera FPGA Developer Site
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              GHRD Linux Boot Examples
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/altera-fpga" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    altera-fpga
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../../.." class="md-tabs__link">
      Welcome
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../driver-list_linux/" class="md-tabs__link">
        Linux Drivers
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../driver-list_zephyr/" class="md-tabs__link">
        Zephyr Drivers
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../virtualization/hypervisors/xen/xen-overview/" class="md-tabs__link">
        Virtualization
      </a>
    </li>
  

  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../driver-list_baremetal/" class="md-tabs__link">
        Baremetal Drivers
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../sw-tools-list/host-attach-tools/" class="md-tabs__link">
        Host Attach Utilities
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../ed-demo-list/ed-list/" class="md-tabs__link md-tabs__link--active">
        Example Designs
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../ed-demo-list/demo-list/" class="md-tabs__link">
        Demos
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../../.." title="Altera FPGA Developer Site" class="md-nav__button md-logo" aria-label="Altera FPGA Developer Site" data-md-component="logo">
      
  <img src="../../../../../../assets/logo.png" alt="logo">

    </a>
    Altera FPGA Developer Site
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/altera-fpga" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    altera-fpga
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../../driver-list_linux/">Linux Drivers</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Linux Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          HPS Host Drivers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          HPS Host Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/hwmon/hwmon/" class="md-nav__link">
        Altera Hardware Monitor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/clock_manager/clock_manager/" class="md-nav__link">
        Clock Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/dma/dma/" class="md-nav__link">
        DMA Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/edac/edac/" class="md-nav__link">
        Error Detection & Correction (EDAC)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/ptp_tod/ptp_emb_tod/" class="md-nav__link">
        Ethernet 1588 PTP Time of Day Clock
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/emac/emac/" class="md-nav__link">
        Ethernet Media Access Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/hssi/hssi/" class="md-nav__link">
        Ethernet Subsystem FPGA IP MAC Specific Ctrl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/hssi_xtile/hssi_xtile/" class="md-nav__link">
        Ethernet Subsystem FPGA IP Tile Specific Ctrl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/apb_timers/apb_timers/" class="md-nav__link">
        General Purpose Timers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/gpio/gpio/" class="md-nav__link">
        General Purpose I/O (GPIO)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/i2c/i2c/" class="md-nav__link">
        I2C
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/i3c/i3c/" class="md-nav__link">
        I3C
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/interrupt_controller_GICv3/irq_gic_v3/" class="md-nav__link">
        Interrupt Controller (GICv3)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/msgdma/msgdma/" class="md-nav__link">
        MSGDMA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/nand/nand/" class="md-nav__link">
        NAND Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/qsfp/qsfp/" class="md-nav__link">
        QSFP Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/qspi/qspi/" class="md-nav__link">
        QSPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/reset_manager/reset_manager/" class="md-nav__link">
        Reset Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/sd-emmc/sd-emmc/" class="md-nav__link">
        SD/eMMC Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/spi/spi/" class="md-nav__link">
        SPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/system_manager/system_manager/" class="md-nav__link">
        System Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/smmu/smmu/" class="md-nav__link">
        System Memory Management Unit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/uart/uart/" class="md-nav__link">
        UART
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/usb2_0_otg/usb_2_0_otg/" class="md-nav__link">
        USB 2.0 OTG
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/watchdog_timers/watchdog_timers/" class="md-nav__link">
        Watchdog Timers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-embedded/zarlink_clock_synchronizer/zarlink_clock_synchronizer/" class="md-nav__link">
        Zarlink Clock Synchronizer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          PCIe Host Drivers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          PCIe Host Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/uart_16550/uart_16550/" class="md-nav__link">
        Altera 16550 Compatible UART
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/dfl_afu/dfl_afu/" class="md-nav__link">
        Accelerator Functional Unit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/intel_m10_bmc_core/intel_m10_bmc_core/" class="md-nav__link">
        Board Management Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/dfl/dfl/" class="md-nav__link">
        Device Feature List
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/s10hssi/s10hssi/" class="md-nav__link">
        Ethernet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/ptp_dfl_tod/ptp_dfl_tod/" class="md-nav__link">
        Ethernet 1588 PTP Time of Day Clock
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/dfl_fme/dfl_fme/" class="md-nav__link">
        FPGA Management Engine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/dfl_pci/dfl_pci/" class="md-nav__link">
        PCIe Subsystem
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/dfl_emif/dfl_emif/" class="md-nav__link">
        Memory Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/intel_m10_bmc_core/intel_m10_bmc_core/" class="md-nav__link">
        MAX 10 Board Management Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/spi_altera_dfl/spi_altera_dfl/" class="md-nav__link">
        SPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../linux-dfl/uio_dfl/uio_dfl/" class="md-nav__link">
        User space I/O (UIO)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../../driver-list_zephyr/">Zephyr Drivers</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Zephyr Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          HPS Zephyr Drivers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          HPS Zephyr Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/clock_manager/clock_manager/" class="md-nav__link">
        Clock Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/psci/psci/" class="md-nav__link">
        Cold & Warm Reset -Power State Coordination Interface (PSCI)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/dma/dma/" class="md-nav__link">
        DMA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/timer/timer/" class="md-nav__link">
        General Purpose Timer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/gpio/gpio/" class="md-nav__link">
        GPIO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/qspi/qspi/" class="md-nav__link">
        Quad SPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/reset_manager/reset_manager/" class="md-nav__link">
        Reset Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/seu/seu/" class="md-nav__link">
        Single Event Upset (SEU)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/smp/smp/" class="md-nav__link">
        SMP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/uart/uart/" class="md-nav__link">
        UART
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../zephyr-embedded/watchdog/watchdog/" class="md-nav__link">
        Watchdog Timer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Virtualization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Virtualization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
          Hypervisors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Hypervisors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
          Xen
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_1">
          <span class="md-nav__icon md-icon"></span>
          Xen
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../virtualization/hypervisors/xen/xen-overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1_2" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1_1_2" id="__nav_4_1_1_2_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_1_2">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../virtualization/hypervisors/xen/ug-xen-agx5e-premium/" class="md-nav__link">
        Agilex™ 5 E-Series Premium Development Kit Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../virtualization/hypervisors/xen/ug-xen-agx5e-modular/" class="md-nav__link">
        Agilex™ 5 E-Series Modular Development Kit Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../virtualization/hypervisors/xen/ug-xen-agx7f-soc/" class="md-nav__link">
        Agilex™ 7 F-Series SoC Development Kit Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../../driver-list_baremetal/">Baremetal Drivers</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Baremetal Drivers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Host Attach Utilities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Host Attach Utilities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../sw-tools-list/host-attach-tools/" class="md-nav__link">
        Host Attach Utilities Summary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/fpgaconf/fpgaconf/" class="md-nav__link">
        fpgaconf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/fpgad/fpgad/" class="md-nav__link">
        fpgad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/fpgainfo/fpgainfo/" class="md-nav__link">
        fpgainfo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/fpgaport/fpgaport/" class="md-nav__link">
        fpgaport
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/fpgasupdate/fpgasupdate/" class="md-nav__link">
        fpgasupdate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/hssi/hssi/" class="md-nav__link">
        hssi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/host_exerciser/host_exerciser/" class="md-nav__link">
        host_exerciser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/hssi_ethernet/hssimac/" class="md-nav__link">
        HSSI ethernet loopback
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/hssi_ethernet/hssistats/" class="md-nav__link">
        HSSI ethernet statistics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/hssi_ethernet/hssimac/" class="md-nav__link">
        HSSI ethernet mac
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/mem_tg/mem_tg/" class="md-nav__link">
        mem_tg
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/mmlink/mmlink/" class="md-nav__link">
        mmlink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/ofs_uio/ofs_uio/" class="md-nav__link">
        ofs.uio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/opae_io/opae_io/" class="md-nav__link">
        opae.io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/opaeuio/opaeuio/" class="md-nav__link">
        opaeuio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/opaevfio/opaevfio/" class="md-nav__link">
        opaevfio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/pac_hssi_config/pac_hssi_config/" class="md-nav__link">
        pac_hssi_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/packager/packager/" class="md-nav__link">
        packager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/pci_device/pci_device/" class="md-nav__link">
        pci_device
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/rsu/rsu/" class="md-nav__link">
        rsu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/userclk/userclk/" class="md-nav__link">
        userclk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../host-attach-util/vabtool/vabtool/" class="md-nav__link">
        vabtool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Example Designs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Example Designs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../ed-demo-list/ed-list/" class="md-nav__link">
        Summary
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
          Agilex™ 5
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Agilex™ 5
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_1" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2_1" id="__nav_7_2_1_label" tabindex="0">
          E-Series Premium Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_2_1">
          <span class="md-nav__icon md-icon"></span>
          E-Series Premium Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/gsrd/ug-gsrd-agx5e-premium/" class="md-nav__link">
        GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/gsrd_zephyr/ug-zgsrd-agx5e-premium/" class="md-nav__link">
        Zephyr GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/boot-examples/ug-linux-boot-agx5e-premium/" class="md-nav__link">
        GHRD Linux Boot Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_1_4" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2_1_4" id="__nav_7_2_1_4_label" tabindex="0">
          TSN Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_2_1_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_2_1_4">
          <span class="md-nav__icon md-icon"></span>
          TSN Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/tsn/rgmii-hps/ug-tsncfg1-agx5e-premium/" class="md-nav__link">
        TSN - HPS RGMII System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/tsn/rgmii-hvio/ug-tsncfg2-agx5e-premium/" class="md-nav__link">
        TSN - RGMII HVIO System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/tsn/sgmii_xcvr/ug-tsn-sgmii-xcvr-agilex5/" class="md-nav__link">
        TSN - SGMII XCVR System
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/remote-debug/ug-remote-debug-agx5e-premium/" class="md-nav__link">
        FPGA Remote Debug Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/rsu/ug-rsu-agx5e-soc/" class="md-nav__link">
        SoC HPS Remote System Update Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/premium/xen/ug-xen-agx5e-premium/" class="md-nav__link">
        Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_2" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2_2" id="__nav_7_2_2_label" tabindex="0">
          E-Series Modular Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_2_2">
          <span class="md-nav__icon md-icon"></span>
          E-Series Modular Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/gsrd/ug-gsrd-agx5e-modular/" class="md-nav__link">
        GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/boot-examples/ug-linux-boot-agx5e-modular/" class="md-nav__link">
        GHRD Linux Boot Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/e-series/modular/xen/ug-xen-agx5e-modular/" class="md-nav__link">
        Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_3" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2_3" id="__nav_7_2_3_label" tabindex="0">
          Intel Simics Virtual Platform Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_2_3">
          <span class="md-nav__icon md-icon"></span>
          Intel Simics Virtual Platform Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/common/virtual-platforms/linux-gsrd/ug-linux-gsrd-agilex5-virtual-platforms/" class="md-nav__link">
        Linux GSRD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../agilex-5/common/virtual-platforms/zephyr-gsrd/ug-zephyr-gsrd-agilex5-virtual-platforms/" class="md-nav__link">
        Zephyr GSRD
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" checked>
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
          Agilex™ 7
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Agilex™ 7
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_1" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_1" id="__nav_7_3_1_label" tabindex="0">
          F-Series SoC Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_7_3_1">
          <span class="md-nav__icon md-icon"></span>
          F-Series SoC Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gsrd/ug-gsrd-agx7f-soc/" class="md-nav__link">
        GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rsu/ug-rsu-agx7f-soc/" class="md-nav__link">
        SoC HPS Remote System Update Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rsu/ug-rsu-multiqspi-agx7f-soc/" class="md-nav__link">
        SoC HPS Multi-QSPI Remote System Update Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../remote-debug/ug-remote-debug-agx7f-soc/" class="md-nav__link">
        SoC FPGA Remote Debug Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../emmc/ug-emmc-agx7f-soc/" class="md-nav__link">
        HPS eMMC Boot Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fabric-config/ug-linux-fabric-config-agx7f-soc/" class="md-nav__link">
        SoC Fabric Configuration from Linux Example
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          GHRD Linux Boot Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        GHRD Linux Boot Examples
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#intro" class="md-nav__link">
    Intro
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-versions" class="md-nav__link">
    Component Versions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u-boot-build-flow" class="md-nav__link">
    U-Boot Build Flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-boot-image" class="md-nav__link">
    Single Boot Image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u-boot-branches" class="md-nav__link">
    U-Boot Branches
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u-boot-to-linux-boot-booting-from-sdcard-example" class="md-nav__link">
    U-Boot to Linux Boot - Booting From SDCard Example
  </a>
  
    <nav class="md-nav" aria-label="U-Boot to Linux Boot - Booting From SDCard Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-environment" class="md-nav__link">
    Setting Up Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-hardware-design" class="md-nav__link">
    Build Hardware Design
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-arm-trusted-firmware" class="md-nav__link">
    Build Arm Trusted Firmware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-u-boot" class="md-nav__link">
    Build U-Boot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-qspi-image" class="md-nav__link">
    Prepare QSPI Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-linux-kernel" class="md-nav__link">
    Building Linux Kernel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-yocto-rootfs" class="md-nav__link">
    Building Yocto Rootfs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-sd-card-image" class="md-nav__link">
    Build SD Card Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-linux" class="md-nav__link">
    Boot Linux
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-examples" class="md-nav__link">
    Other Examples
  </a>
  
    <nav class="md-nav" aria-label="Other Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boot-from-qspi" class="md-nav__link">
    Boot from QSPI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-with-nand-storage-on-hps" class="md-nav__link">
    Boot with NAND Storage on HPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-with-emmc-storage-on-hps" class="md-nav__link">
    Boot with eMMC Storage on HPS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-u-boot-with-the-debugger-from-command-line" class="md-nav__link">
    Running U-Boot with the Debugger from Command Line
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-u-boot-with-arm-ds-eclipse" class="md-nav__link">
    Debugging U-Boot with Arm DS Eclipse
  </a>
  
    <nav class="md-nav" aria-label="Debugging U-Boot with Arm DS Eclipse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugging-spl" class="md-nav__link">
    Debugging SPL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-u-boot" class="md-nav__link">
    Debugging U-Boot
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#direct-atf-to-linux-boot-flow" class="md-nav__link">
    Direct ATF to Linux Boot Flow
  </a>
  
    <nav class="md-nav" aria-label="Direct ATF to Linux Boot Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#atf-to-linux-from-sd-card" class="md-nav__link">
    ATF to Linux from SD Card
  </a>
  
    <nav class="md-nav" aria-label="ATF to Linux from SD Card">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toolchain-setup-atf-to-linux" class="md-nav__link">
    Toolchain Setup (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-hardware-design-atf-to-linux" class="md-nav__link">
    Build Hardware Design (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-arm-trusted-firmware-for-sdcard-atf-to-linux" class="md-nav__link">
    Build Arm Trusted Firmware for SDCard (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-linux-file-system-atf-to-linux" class="md-nav__link">
    Build Linux File System  (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-linux-for-sdcard-atf-to-linux" class="md-nav__link">
    Build Linux for SDCard (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-sd-card-image-with-fip-inside-atf-to-linux" class="md-nav__link">
    Build SD Card image with FIP inside (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-jic-image-for-sdcard-boot-atf-to-linux" class="md-nav__link">
    Build JIC image for SDCard Boot (ATF-To-Linux)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atf-to-linux-from-qspi" class="md-nav__link">
    ATF to Linux from QSPI
  </a>
  
    <nav class="md-nav" aria-label="ATF to Linux from QSPI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-arm-trusted-firmware-for-qspi-atf-to-linux" class="md-nav__link">
    Build Arm Trusted Firmware for QSPI (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-linux-for-qspi-atf-to-linux" class="md-nav__link">
    Build Linux for QSPI (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-pfg-file-for-qspi-boot-atf-to-linux" class="md-nav__link">
    Create pfg file for QSPI Boot (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-qspi-jic-image-for-qspi-boot-atf-to-linux" class="md-nav__link">
    Create QSPI JIC image for QSPI Boot (ATF-To-Linux)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-secure-l3-registers-on-stratix-10-agilextm-and-n5x" class="md-nav__link">
    Managing Secure L3 Registers on Stratix® 10, Agilex™ and N5X®
  </a>
  
    <nav class="md-nav" aria-label="Managing Secure L3 Registers on Stratix® 10, Agilex™ and N5X®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-initial-values-of-secure-l3-registers" class="md-nav__link">
    Setting Initial Values of Secure L3 Registers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-secure-l3-registers-from-u-boot-command-line" class="md-nav__link">
    Accessing Secure L3 Registers from U-Boot Command Line
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-access-to-more-secure-l3-registers-for-debug-purposes" class="md-nav__link">
    Enabling Access to more Secure L3 Registers for Debug Purposes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boot-scratch-register-usage" class="md-nav__link">
    Boot Scratch Register Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconfiguring-core-fabric-from-u-boot" class="md-nav__link">
    Reconfiguring Core Fabric from U-Boot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-bridges-from-u-boot" class="md-nav__link">
    Enabling Bridges from U-Boot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notices-disclaimers" class="md-nav__link">
    Notices &amp; Disclaimers
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../xen/ug-xen-agx7f-soc/" class="md-nav__link">
        Xen Hypervisor GSRD
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_2" id="__nav_7_3_2_label" tabindex="0">
          F-Series FPGA Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_2">
          <span class="md-nav__icon md-icon"></span>
          F-Series FPGA Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../fpga/gsrd/ug-gsrd-agx7f-fpga/" class="md-nav__link">
        GSRD User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_3" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_3" id="__nav_7_3_3_label" tabindex="0">
          I-Series FPGA Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_3">
          <span class="md-nav__icon md-icon"></span>
          I-Series FPGA Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../i-series/soc/gsrd/ug-gsrd-agx7i-soc/" class="md-nav__link">
        GSRD User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_4" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3_4" id="__nav_7_3_4_label" tabindex="0">
          M-Series HBM2e Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_4">
          <span class="md-nav__icon md-icon"></span>
          M-Series HBM2e Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../m-series/hbm2e/ug-gsrd-agx7m-hbm2e/" class="md-nav__link">
        GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../m-series/pcie_rp/ug-pcie_rp-agx7m-hbm2e/" class="md-nav__link">
        PCIe Root Port User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
          Stratix® 10
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4">
          <span class="md-nav__icon md-icon"></span>
          Stratix® 10
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_1" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4_1" id="__nav_7_4_1_label" tabindex="0">
          SX SoC Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4_1">
          <span class="md-nav__icon md-icon"></span>
          SX SoC Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/gsrd/ug-gsrd-s10sx-soc/" class="md-nav__link">
        GSRD User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/rsu/ug-rsu-s10sx-soc/" class="md-nav__link">
        SoC HPS Remote System Update Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/remote-debug/ug-remote-debug-s10sx-soc/" class="md-nav__link">
        SoC FPGA Remote Debug Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/emmc/ug-emmc-s10sx-soc/" class="md-nav__link">
        HPS eMMC Boot Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/fabric-config/ug-linux-fabric-config-s10sx-soc/" class="md-nav__link">
        SoC Fabric Configuration from Linux Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../stratix-10/sx/soc/boot-examples/ug-linux-boot-s10-soc/" class="md-nav__link">
        GHRD Linux Boot Examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Demos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Demos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../ed-demo-list/demo-list/" class="md-nav__link">
        Summary
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
          Agilex™ 5
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2">
          <span class="md-nav__icon md-icon"></span>
          Agilex™ 5
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_1" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_2_1" id="__nav_8_2_1_label" tabindex="0">
          E-Series Premium Development Kit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_1">
          <span class="md-nav__icon md-icon"></span>
          E-Series Premium Development Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../baremetal-embedded/agilex-5/e-series/premium/ug-baremetal-agx5e-premium/" class="md-nav__link">
        Baremetal Hello World Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/altera-fpga/agilex5-demo-hps2fpga-interfaces/blob/main/documentation/01_index.md" class="md-nav__link">
        Third Party Boards - HPS-FPGA Interfaces Demos User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-5/e-series/premium/armds-debug-uboot/ug-armds-debug-uboot-agx5e-premium/" class="md-nav__link">
        Debugging U-Boot with Arm Development Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-5/e-series/premium/riscfree-debug-u-boot/ug-riscfree-debug-uboot-agx5e-premium/" class="md-nav__link">
        Debugging U-Boot with Ashling RiscFree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-5/e-series/premium/riscfree-debug-linux/ug-riscfree-debug-linux-agx5e-premium/" class="md-nav__link">
        Debugging Linux with Ashling RiscFree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../demos/agilex-5/e-series/premium/armds-debug-linux/ug-armds-debug-linux-agx5e-premium/" class="md-nav__link">
        Debugging Linux with Arm Development Studio
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#intro" class="md-nav__link">
    Intro
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-versions" class="md-nav__link">
    Component Versions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u-boot-build-flow" class="md-nav__link">
    U-Boot Build Flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-boot-image" class="md-nav__link">
    Single Boot Image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u-boot-branches" class="md-nav__link">
    U-Boot Branches
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u-boot-to-linux-boot-booting-from-sdcard-example" class="md-nav__link">
    U-Boot to Linux Boot - Booting From SDCard Example
  </a>
  
    <nav class="md-nav" aria-label="U-Boot to Linux Boot - Booting From SDCard Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-environment" class="md-nav__link">
    Setting Up Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-hardware-design" class="md-nav__link">
    Build Hardware Design
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-arm-trusted-firmware" class="md-nav__link">
    Build Arm Trusted Firmware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-u-boot" class="md-nav__link">
    Build U-Boot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-qspi-image" class="md-nav__link">
    Prepare QSPI Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-linux-kernel" class="md-nav__link">
    Building Linux Kernel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-yocto-rootfs" class="md-nav__link">
    Building Yocto Rootfs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-sd-card-image" class="md-nav__link">
    Build SD Card Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-linux" class="md-nav__link">
    Boot Linux
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-examples" class="md-nav__link">
    Other Examples
  </a>
  
    <nav class="md-nav" aria-label="Other Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boot-from-qspi" class="md-nav__link">
    Boot from QSPI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-with-nand-storage-on-hps" class="md-nav__link">
    Boot with NAND Storage on HPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-with-emmc-storage-on-hps" class="md-nav__link">
    Boot with eMMC Storage on HPS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-u-boot-with-the-debugger-from-command-line" class="md-nav__link">
    Running U-Boot with the Debugger from Command Line
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-u-boot-with-arm-ds-eclipse" class="md-nav__link">
    Debugging U-Boot with Arm DS Eclipse
  </a>
  
    <nav class="md-nav" aria-label="Debugging U-Boot with Arm DS Eclipse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugging-spl" class="md-nav__link">
    Debugging SPL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-u-boot" class="md-nav__link">
    Debugging U-Boot
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#direct-atf-to-linux-boot-flow" class="md-nav__link">
    Direct ATF to Linux Boot Flow
  </a>
  
    <nav class="md-nav" aria-label="Direct ATF to Linux Boot Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#atf-to-linux-from-sd-card" class="md-nav__link">
    ATF to Linux from SD Card
  </a>
  
    <nav class="md-nav" aria-label="ATF to Linux from SD Card">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toolchain-setup-atf-to-linux" class="md-nav__link">
    Toolchain Setup (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-hardware-design-atf-to-linux" class="md-nav__link">
    Build Hardware Design (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-arm-trusted-firmware-for-sdcard-atf-to-linux" class="md-nav__link">
    Build Arm Trusted Firmware for SDCard (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-linux-file-system-atf-to-linux" class="md-nav__link">
    Build Linux File System  (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-linux-for-sdcard-atf-to-linux" class="md-nav__link">
    Build Linux for SDCard (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-sd-card-image-with-fip-inside-atf-to-linux" class="md-nav__link">
    Build SD Card image with FIP inside (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-jic-image-for-sdcard-boot-atf-to-linux" class="md-nav__link">
    Build JIC image for SDCard Boot (ATF-To-Linux)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atf-to-linux-from-qspi" class="md-nav__link">
    ATF to Linux from QSPI
  </a>
  
    <nav class="md-nav" aria-label="ATF to Linux from QSPI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-arm-trusted-firmware-for-qspi-atf-to-linux" class="md-nav__link">
    Build Arm Trusted Firmware for QSPI (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-linux-for-qspi-atf-to-linux" class="md-nav__link">
    Build Linux for QSPI (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-pfg-file-for-qspi-boot-atf-to-linux" class="md-nav__link">
    Create pfg file for QSPI Boot (ATF-To-Linux)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-qspi-jic-image-for-qspi-boot-atf-to-linux" class="md-nav__link">
    Create QSPI JIC image for QSPI Boot (ATF-To-Linux)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-secure-l3-registers-on-stratix-10-agilextm-and-n5x" class="md-nav__link">
    Managing Secure L3 Registers on Stratix® 10, Agilex™ and N5X®
  </a>
  
    <nav class="md-nav" aria-label="Managing Secure L3 Registers on Stratix® 10, Agilex™ and N5X®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-initial-values-of-secure-l3-registers" class="md-nav__link">
    Setting Initial Values of Secure L3 Registers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-secure-l3-registers-from-u-boot-command-line" class="md-nav__link">
    Accessing Secure L3 Registers from U-Boot Command Line
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-access-to-more-secure-l3-registers-for-debug-purposes" class="md-nav__link">
    Enabling Access to more Secure L3 Registers for Debug Purposes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boot-scratch-register-usage" class="md-nav__link">
    Boot Scratch Register Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconfiguring-core-fabric-from-u-boot" class="md-nav__link">
    Reconfiguring Core Fabric from U-Boot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-bridges-from-u-boot" class="md-nav__link">
    Enabling Bridges from U-Boot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notices-disclaimers" class="md-nav__link">
    Notices &amp; Disclaimers
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>GHRD Linux Boot Examples</h1>

<h2 id="intro">Intro<a class="headerlink" href="#intro" title="Permanent link">&para;</a></h2>
<p>This page contains instructions on how to build U-Boot and ATF to boot Linux. The examples provided in this page are focus on the Agilex™ 7 Transceiver-SoC Development kit P-Tile/E-Tile production (DK-SI-AGF014EB) which uses a Linear power regulators. </p>
<h2 id="component-versions">Component Versions<a class="headerlink" href="#component-versions" title="Permanent link">&para;</a></h2>
<p>This example was created with Quartus<sup>&reg;</sup> Prime Pro Edition Version 24.3.1 and the following component versions.</p>
<table>
<thead>
<tr>
<th align="left">Repository</th>
<th align="left">Branch/Tag</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="https://github.com/altera-opensource/ghrd-socfpga">ghrd-socfpga</a></td>
<td align="left">QPDS24.3.1_REL_GSRD_PR</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/altera-opensource/linux-socfpga">linux-socfpga</a></td>
<td align="left">socfpga-6.6.51-lts/QPDS24.3.1_REL_GSRD_PR</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/altera-opensource/arm-trusted-firmware">arm-trusted-firmware</a></td>
<td align="left">socfpga_v2.11.1/QPDS24.3.1_REL_GSRD_PR</td>
</tr>
<tr>
<td align="left"><a href="https://github.com/altera-opensource/u-boot-socfpga">u-boot-socfpga</a></td>
<td align="left">socfpga_v2024.07/QPDS24.3.1_REL_GSRD_PR</td>
</tr>
</tbody>
</table>
<p>Starting with SoC EDS Pro version 19.3, the following changes were made:
The bootloader source code was removed from SoC EDS. Instead, the user needs to clone the git trees from https://github.com/altera-opensource/u-boot-socfpga.</p>
<p>The same U-Boot branch is used for all SoC FPGA devices: Cyclone® V SoC, Arria® V SoC, Arria® 10 SoC, Stratix® 10 SoC, Agilex™ 7 and Agilex™ 5.</p>
<p>Starting with Quartus® Pro 20.3, the SoC EDS was discontinued, and the functionality of the tools which were previously part of SoC EDS are provided separately.</p>
<h2 id="u-boot-build-flow">U-Boot Build Flow<a class="headerlink" href="#u-boot-build-flow" title="Permanent link">&para;</a></h2>
<p>For Stratix® 10, Agilex™ 7 and Agilex™ 5 devices, all the handoff information created by the Quartus® Pro compilation is part of the configuration bitstream. The bsp-editor is not used, and the bootloader build flow does not depend on the Quartus® Pro outputs.</p>
<p><a class="glightbox" href="../images/s10-flow.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/s10-flow.png" /></a> </p>
<h2 id="single-boot-image">Single Boot Image<a class="headerlink" href="#single-boot-image" title="Permanent link">&para;</a></h2>
<p>Starting with U-Boot 2021.07, the following changes were made to enable a single set of binaries to be used with multiple boards and hardware projects:</p>
<ul>
<li>The Quartus® hardware project defines a JTAG User Code which is used by the rest of the system as a board_id to indentify the hardware.</li>
<li>U-Boot has a single defconfig enabling all possible HPS hardware, and depending on the timeouts to determine which hardware is not actually available.</li>
<li>U-Boot has a single device tree FIT file enabling all possible HPS hardware, but with different configurations inside, selected according to the board_id.</li>
<li>Linux FIT file also has a different configuration for each board_id. Each configuration includes the kernel, the specific device file, and an optional core.rbf file. If the core.rbf file is specified, the fabric is configured with that file.</li>
</ul>
<p>Refer to <a href="https://www.rocketboards.org/foswiki/Documentation/SingleImageBoot">Single Image Boot</a> for more details about this feature.</p>
<p>The Agilex™ 7 GSRDs are also updated to use this feature. See the GSRD documentation for details:</p>
<ul>
<li><a href="https://altera-fpga.github.io/latest/embedded-designs/agilex-7/f-series/soc/gsrd/ug-gsrd-agx7f-soc/">Agilex™ 7 F-Series SoC Development Kit GSRD User Guide (P-Tiles &amp; E-Tiles)</a></li>
<li><a href="https://altera-fpga.github.io/latest/embedded-designs/agilex-7/f-series/fpga/gsrd/ug-gsrd-agx7f-fpga/">GSRD for Agilex 7 F-Series FPGA DevKit (2x F-Tile)</a></li>
<li><a href="https://altera-fpga.github.io/latest/embedded-designs/agilex-7/i-series/soc/gsrd/ug-gsrd-agx7i-soc/">Agilex™ 7 I-Series FPGA Development Kit GSRD User Guide</a></li>
<li><a href="https://altera-fpga.github.io/latest/embedded-designs/agilex-7/m-series/hbm2e/ug-gsrd-agx7m-hbm2e/">Agilex™ 7 M-Series HBM2e Development Kit GSRD User Guide</a></li>
</ul>
<h2 id="u-boot-branches">U-Boot Branches<a class="headerlink" href="#u-boot-branches" title="Permanent link">&para;</a></h2>
<p>The official Intel SOCFPGA U-Boot repository is located at https://github.com/altera-opensource/u-boot-socfpga.</p>
<p><strong>Notes:</strong></p>
<ul>
<li>A "RC" labeled branch is for internal active development use and customer early access without official customer support.</li>
<li>Latest stable branch (no RC labeled) is strongly recommended for development and production use outside of Intel.</li>
<li>See doc/README.socfpga for Quartus® Pro and Device support.</li>
</ul>
<h2 id="u-boot-to-linux-boot-booting-from-sdcard-example">U-Boot to Linux Boot - Booting From SDCard Example<a class="headerlink" href="#u-boot-to-linux-boot-booting-from-sdcard-example" title="Permanent link">&para;</a></h2>
<p>This example shows a simple example of the U-Boot to Linux boot flow, booting Agilex™ 7 device  from SD card.</p>
<p>Note the following:</p>
<ul>
<li>Hardware design was customized as follows: <br>
    -Disable SGMII and PR to reduce boot time    </li>
</ul>
<ul>
<li>U-Boot was customized as follows: <br>
    - Disable NAND in the unified defconfig file, as we do not need it. <br>
    - Boot only from SD card, as opposed to trying SD, QSPI and NAND. <br>
    - Use Dwarf4 for debug information, to be compatible with current Arm DS debugger. <br>
    - Configure FPGA fabric from boot command using fpga load command explicitly (instead of using the bootm command to do it). <br>
    - Use booti command to boot Linux, with separate files for kernel and device tree. <br></li>
</ul>
<p>The above customizations may be useful for debugging purposes for example.</p>
<p>The following build instructions produce a QSPI(.jic) and an SDCard Image (.img) which includes the components indicated in the following figure:</p>
<p><a class="glightbox" href="../images/bootLoaderImages.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/bootLoaderImages.jpg" style="height:500px" /></a></p>
<p>This example uses building U-Boot manually. See <a href="https://altera-fpga.github.io/latest/embedded-designs/agilex-7/f-series/soc/gsrd/ug-gsrd-agx7f-soc/">Agilex™ 7 F-Series SoC Development Kit GSRD User Guide (P-Tiles &amp; E-Tiles)</a> for the full fledged booting from SD card example, where U-Boot is built through Yocto recipes.</p>
<p>This example, and the current GSRD release target the production version of the Intel Agilex™ 7 F-Series Transceiver-SoC Development Kit. You can confirm you have a production version of the board by checking that it's serial number, on a sticker on the back of the board, is greater than AGF61SI0000576. Refer to https://www.intel.com/content/www/us/en/products/details/fpga/development-kits/agilex/f-series-transceiver.html for more details about the board.</p>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<p>The following are required:</p>
<ul>
<li>Host machine running Linux. Ubuntu 22.04 was used, but other versions may work too.</li>
<li>Internet connection to download the tools and clone the U-Boot git tree from github. If you are behind a firewall you will need your system administrator to enable you to get to the git trees.</li>
<li>Agilex™ 7 Transceiver-SoC Development kit P-Tile E-Tile production (DK-SI-AGF014EB).</li>
<li>Quartus<sup>&reg;</sup> Prime Pro Edition Version 24.3.1</li>
</ul>
<p>Note that the examples presented on this page boot to Linux and they require Linux kernel, device tree and rootfilesystem to boot. However, you can omit the Linux binaries and just boot to U-Boot prompt if you want to.</p>
<h3 id="setting-up-environment">Setting Up Environment<a class="headerlink" href="#setting-up-environment" title="Permanent link">&para;</a></h3>
<p>Create a top folder to store the example files.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>agilex7UbootToLinux.sdmmc
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>mkdir<span class="w"> </span>agilex7UbootToLinux.sdmmc<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>agilex7UbootToLinux.sdmmc<span class="w"> </span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nb">export</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">TOP_FOLDER</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span><span class="w"> </span>
</code></pre></div>
<p>Download and setup the the toolchain as follows:</p>
<p>Download the compiler toolchain, add it to the PATH variable, to be used by the GHRD makefile to build the HPS Debug FSBL:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>wget<span class="w"> </span>https://developer.arm.com/-/media/Files/downloads/gnu/11.2-2022.02/binrel/<span class="se">\</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>gcc-arm-11.2-2022.02-x86_64-aarch64-none-linux-gnu.tar.xz
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>tar<span class="w"> </span>xf<span class="w"> </span>gcc-arm-11.2-2022.02-x86_64-aarch64-none-linux-gnu.tar.xz
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>rm<span class="w"> </span>-f<span class="w"> </span>gcc-arm-11.2-2022.02-x86_64-aarch64-none-linux-gnu.tar.xz
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/gcc-arm-11.2-2022.02-x86_64-aarch64-none-linux-gnu/bin:<span class="nv">$PATH</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="nb">export</span><span class="w"> </span><span class="nv">ARCH</span><span class="o">=</span>arm64
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="nb">export</span><span class="w"> </span><span class="nv">CROSS_COMPILE</span><span class="o">=</span>aarch64-none-linux-gnu-
</code></pre></div>
<p>Enable Quartus tools to be called from command line:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">QUARTUS_ROOTDIR</span><span class="o">=</span>~/intelFPGA_pro/24.3.1/quartus/
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$QUARTUS_ROOTDIR</span>/bin:<span class="nv">$QUARTUS_ROOTDIR</span>/linux64:<span class="nv">$QUARTUS_ROOTDIR</span>/../qsys/bin:<span class="nv">$PATH</span>
</code></pre></div>
<h3 id="build-hardware-design">Build Hardware Design<a class="headerlink" href="#build-hardware-design" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>ghrd-socfpga<span class="w"> </span>agilex_soc_devkit_ghrd
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>QPDS24.3.1_REL_GSRD_PR<span class="w"> </span>https://github.com/altera-opensource/ghrd-socfpga
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>mv<span class="w"> </span>ghrd-socfpga/agilex_soc_devkit_ghrd<span class="w"> </span>.
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>rm<span class="w"> </span>-rf<span class="w"> </span>ghrd-socfpga
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="nb">cd</span><span class="w"> </span>agilex_soc_devkit_ghrd
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="c1"># Select Linear regulator</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="nb">export</span><span class="w"> </span><span class="nv">BOARD_PWRMGT</span><span class="o">=</span>linear
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="c1"># disable sgmii and partial reconfiguration - to decrease build time</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="nb">export</span><span class="w"> </span><span class="nv">HPS_ENABLE_SGMII</span><span class="o">=</span><span class="m">0</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="nb">export</span><span class="w"> </span><span class="nv">ENABLE_PARTIAL_RECONFIGURATION</span><span class="o">=</span><span class="m">0</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>make<span class="w"> </span>scrub_clean_all
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>make<span class="w"> </span>generate_from_tcl
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>make<span class="w"> </span>all
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="nb">unset</span><span class="w"> </span>HPS_ENABLE_SGMII
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="nb">unset</span><span class="w"> </span>ENABLE_PARTIAL_RECONFIGURATION
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="nb">unset</span><span class="w"> </span>BOARD_PWRMGT
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="nb">cd</span><span class="w"> </span>..
</code></pre></div>
<p>After building the hardware design the following binary is created:</p>
<ul>
<li>$TOP_FOLDER/agilex_soc_devkit_ghrd/output_files/ghrd_agfb014r24b2e2v.sof</li>
</ul>
<h3 id="build-arm-trusted-firmware">Build Arm Trusted Firmware<a class="headerlink" href="#build-arm-trusted-firmware" title="Permanent link">&para;</a></h3>
<p>The following commands are used to retrieve the Arm Trusted Firmware (ATF) and compile it.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span><span class="w"> </span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>arm-trusted-firmware<span class="w"> </span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>QPDS24.3.1_REL_GSRD_PR<span class="w"> </span>https://github.com/altera-opensource/arm-trusted-firmware<span class="w"> </span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nb">cd</span><span class="w"> </span>arm-trusted-firmware<span class="w"> </span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>make<span class="w"> </span>bl31<span class="w"> </span><span class="nv">PLAT</span><span class="o">=</span>agilex<span class="w"> </span><span class="nv">DEPRECATED</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span>
</code></pre></div>
<p>After completing the above steps, the Arm Trusted Firmware binary file is created and is located here.</p>
<ul>
<li>$TOP_FOLDER/arm-trusted-firmware/build/agilex/release/bl31.bin </li>
</ul>
<h3 id="build-u-boot">Build U-Boot<a class="headerlink" href="#build-u-boot" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>u-boot-socfpga
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>QPDS24.3.1_REL_GSRD_PR<span class="w"> </span>https://github.com/altera-opensource/u-boot-socfpga
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nb">cd</span><span class="w"> </span>u-boot-socfpga
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="c1"># enable dwarf4 debug info, for compatibility with arm ds </span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/PLATFORM_CPPFLAGS += -D__ARM__/PLATFORM_CPPFLAGS += -D__ARM__ -gdwarf-4/g&#39;</span><span class="w"> </span>arch/arm/config.mk
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="c1"># only boot from SD, do not try QSPI and NAND </span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/u-boot,spl-boot-order.*/u-boot\,spl-boot-order = \&amp;mmc;/g&#39;</span><span class="w"> </span>arch/arm/dts/socfpga_agilex_socdk-u-boot.dtsi
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="c1"># disable NAND in the device tree </span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;/&amp;nand {/!b;n;c\\tstatus = &quot;disabled&quot;;&#39;</span><span class="w"> </span>arch/arm/dts/socfpga_agilex_socdk-u-boot.dtsi<span class="w"> </span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="c1"># remove the NAND configuration from device tree </span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;/images/,/binman/{/binman/!d}&#39;</span><span class="w"> </span>arch/arm/dts/socfpga_agilex_socdk-u-boot.dtsi
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="c1"># link to atf</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>ln<span class="w"> </span>-s<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/arm-trusted-firmware/build/agilex/release/bl31.bin<span class="w"> </span>.
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="c1"># Create configuration custom file.</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; config-fragment-agilex</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="s"># Use &#39;Image&#39; for kernel image instead of &#39;kernel.itb&#39;</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="s">CONFIG_BOOTFILE=&quot;Image&quot;</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="s"># - Disable NAND/UBI related settings from defconfig.</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="s">CONFIG_NAND_BOOT=n</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="s">CONFIG_SPL_NAND_SUPPORT=n</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="s">CONFIG_CMD_NAND_TRIMFFS=n</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="s">CONFIG_CMD_NAND_LOCK_UNLOCK=n</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="s">CONFIG_NAND_DENALI_DT=n</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="s">CONFIG_SYS_NAND_U_BOOT_LOCATIONS=n</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="s">CONFIG_SPL_NAND_FRAMEWORK=n</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="s">CONFIG_CMD_NAND=n</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="s">CONFIG_MTD_RAW_NAND=n</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="s">CONFIG_CMD_UBI=n</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="s">CONFIG_CMD_UBIFS=n</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a><span class="s">CONFIG_MTD_UBI=n</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="s">CONFIG_ENV_IS_IN_UBI=n</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="s">CONFIG_UBI_SILENCE_MSG=n</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="s">CONFIG_UBIFS_SILENCE_MSG=n</span>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a><span class="s"># - Disable distroboot and use specific boot command.</span>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a><span class="s">CONFIG_DISTRO_DEFAULTS=n</span>
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a><span class="s">CONFIG_HUSH_PARSER=y</span>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a><span class="s">CONFIG_SYS_PROMPT_HUSH_PS2=&quot;&gt; &quot;</span>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="s">CONFIG_USE_BOOTCOMMAND=y</span>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a><span class="s">CONFIG_BOOTCOMMAND=&quot;load mmc 0:1 \${loadaddr} ghrd.core.rbf; bridge disable;fpga load 0 \${loadaddr} \${filesize};bridge enable; setenv bootfile Image; run mmcload;run linux_qspi_enable;run rsu_status;run mmcboot&quot;</span>
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a><span class="s">CONFIG_CMD_FAT=y</span>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a><span class="s">CONFIG_CMD_FS_GENERIC=y</span>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a><span class="s">CONFIG_DOS_PARTITION=y</span>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a><span class="s">CONFIG_SPL_DOS_PARTITION=y</span>
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a><span class="s">CONFIG_CMD_PART=y</span>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a><span class="s">CONFIG_SPL_CRC32=y</span>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a><span class="s">CONFIG_LZO=y</span>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a><span class="s">CONFIG_CMD_DHCP=y</span>
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a><span class="s"># Enable more QSPI flash manufacturers</span>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a><span class="s">CONFIG_SPI_FLASH_MACRONIX=y</span>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a><span class="s">CONFIG_SPI_FLASH_GIGADEVICE=y</span>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a><span class="s">CONFIG_SPI_FLASH_WINBOND=y</span>
<a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a><span class="s">CONFIG_SPI_FLASH_ISSI=y</span>
<a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a><span class="s">EOF</span>
<a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a>
<a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a><span class="c1"># build U-Boot </span>
<a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a>make<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>mrproper
<a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a>make<span class="w"> </span>socfpga_agilex_defconfig
<a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a><span class="c1"># Use created custom configuration file to merge with the default configuration obtained in .config file.</span>
<a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a>./scripts/kconfig/merge_config.sh<span class="w"> </span>-O<span class="w"> </span>./<span class="w"> </span>./.config<span class="w"> </span>./config-fragment-agilex
<a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a>make<span class="w"> </span>-j<span class="w"> </span><span class="m">64</span>
<a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a><span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span>
</code></pre></div>
<p>After completing the above steps, the following files are created.</p>
<ul>
<li>$TOP_FOLDER/u-boot-socfpga/spl/u-boot-spl-dtb.hex - FSBL (U-boot SPL) hex file. </li>
<li>$TOP_FOLDER/u-boot-socfpga/u-boot.itb - FIT image file containing SSBL (U-Boot) and ATF (Arm Trusted Firmware) binaries. </li>
</ul>
<p><strong>Note:</strong> The following commands are ran before starting Linux:</p>
<ul>
<li><strong>run linux_qspi_enable</strong>: This passes the QSPI reference clock value to Linux. See <a href="#qspi-reference-clock">QSPI Reference Clock</a> section..</li>
<li><strong>run rsu_status</strong>: This performs some RSU operations that must be done before booting Linux. Only needed when enabling RSU. See: <a href="https://www.intel.com/content/www/us/en/docs/programmable/683184/21-4.html">Agilex™ 7 HPS Remote System Update User Guide</a>.</li>
</ul>
<p><strong>Important:</strong> If the fabric is already configured, before running the 'fpga load' command, you must first run the 'bridge disable' command as shown in the above example. If the fabric is not already configured, the command will fail without any adverse effects.</p>
<h3 id="prepare-qspi-image">Prepare QSPI Image<a class="headerlink" href="#prepare-qspi-image" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>quartus_pfg<span class="w"> </span>-c<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>agilex_soc_devkit_ghrd/output_files/ghrd_agfb014r24b2e2v.sof<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>ghrd.jic<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>-o<span class="w"> </span><span class="nv">device</span><span class="o">=</span>MT25QU128<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>-o<span class="w"> </span><span class="nv">flash_loader</span><span class="o">=</span>AGFB014R24B2E2V<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>-o<span class="w"> </span><span class="nv">hps_path</span><span class="o">=</span>u-boot-socfpga/spl/u-boot-spl-dtb.hex<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>-o<span class="w"> </span><span class="nv">mode</span><span class="o">=</span>ASX4<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>-o<span class="w"> </span><span class="nv">hps</span><span class="o">=</span><span class="m">1</span>
</code></pre></div>
<p>The following binaries are created:</p>
<ul>
<li>$TOP_FOLDER/ghrd.hps.jic - Image to be flashed in the QSPI device</li>
<li>$TOP_FOLDER/ghrd.core.rbf - Phase2 fabric design</li>
</ul>
<h3 id="building-linux-kernel">Building Linux Kernel<a class="headerlink" href="#building-linux-kernel" title="Permanent link">&para;</a></h3>
<p>The following commands can be used to obtain the Linux source code and build Linux.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>linux-socfpga
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>QPDS24.3.1_REL_GSRD_PR<span class="w">  </span>https://github.com/altera-opensource/linux-socfpga<span class="w"> </span>linux-socfpga
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="nb">cd</span><span class="w"> </span>linux-socfpga
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>make<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>mrproper
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>make<span class="w"> </span>defconfig
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="c1"># enable kernel debugging with RiscFree</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>./scripts/config<span class="w"> </span>--set-val<span class="w"> </span>CONFIG_DEBUG_INFO<span class="w">  </span>y
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>./scripts/config<span class="w"> </span>--set-val<span class="w"> </span>CONFIG_GDB_SCRIPTS<span class="w"> </span>y
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>make<span class="w"> </span>oldconfig
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>make<span class="w"> </span>-j<span class="w"> </span><span class="m">64</span><span class="w"> </span>Image<span class="w"> </span>dtbs
</code></pre></div>
<p>The following items are built in $TOP_FOLDER:</p>
<ul>
<li>linux-socfpga/arch/arm64/boot/dts/intel/socfpga_agilex_socdk.dtb</li>
<li>linux-socfpga/arch/arm64/boot/Image</li>
</ul>
<h3 id="building-yocto-rootfs">Building Yocto Rootfs<a class="headerlink" href="#building-yocto-rootfs" title="Permanent link">&para;</a></h3>
<p>This section presents how to build the Linux rootfs using Yocto recipes. Note that the yocto recipes actually build everything, but are only interested in the rootfs.</p>
<p>First, make sure you have Yocto system requirements met: https://docs.yoctoproject.org/3.4.1/ref-manual/system-requirements.html#supported-linux-distributions.</p>
<p>1. Make sure you have Yocto system requirements met: https://docs.yoctoproject.org/5.0.1/ref-manual/system-requirements.html#supported-linux-distributions.</p>
<p>The command to install the required packages on Ubuntu 22.04 is:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>upgrade
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>openssh-server<span class="w"> </span>mc<span class="w"> </span>libgmp3-dev<span class="w"> </span>libmpc-dev<span class="w"> </span>gawk<span class="w"> </span>wget<span class="w"> </span>git<span class="w"> </span>diffstat<span class="w"> </span>unzip<span class="w"> </span>texinfo<span class="w"> </span>gcc<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>build-essential<span class="w"> </span>chrpath<span class="w"> </span>socat<span class="w"> </span>cpio<span class="w"> </span>python3<span class="w"> </span>python3-pip<span class="w"> </span>python3-pexpect<span class="w"> </span>xz-utils<span class="w"> </span>debianutils<span class="w"> </span>iputils-ping<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>python3-git<span class="w"> </span>python3-jinja2<span class="w"> </span>libegl1-mesa<span class="w"> </span>libsdl1.2-dev<span class="w"> </span>pylint<span class="w"> </span>xterm<span class="w"> </span>python3-subunit<span class="w"> </span>mesa-common-dev<span class="w"> </span>zstd<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>liblz4-tool<span class="w"> </span>git<span class="w"> </span>fakeroot<span class="w"> </span>build-essential<span class="w"> </span>ncurses-dev<span class="w"> </span>xz-utils<span class="w"> </span>libssl-dev<span class="w"> </span>bc<span class="w"> </span>flex<span class="w"> </span>libelf-dev<span class="w"> </span>bison<span class="w"> </span>xinetd<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>tftpd<span class="w"> </span>tftp<span class="w"> </span>nfs-kernel-server<span class="w"> </span>libncurses5<span class="w"> </span>libc6-i386<span class="w"> </span>libstdc++6:i386<span class="w"> </span>libgcc++1:i386<span class="w"> </span>lib32z1<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>device-tree-compiler<span class="w"> </span>curl<span class="w"> </span>mtd-utils<span class="w"> </span>u-boot-tools<span class="w"> </span>net-tools<span class="w"> </span>swig<span class="w"> </span>-y
</code></pre></div>
<p>On Ubuntu 22.04 you will also need to point the /bin/sh to /bin/bash, as the default is a link to /bin/dash:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="w"> </span>sudo<span class="w"> </span>ln<span class="w"> </span>-sf<span class="w"> </span>/bin/bash<span class="w"> </span>/bin/sh
</code></pre></div>
<p><strong>Note</strong>: You can also use a Docker container to build the Yocto recipes, refer to https://rocketboards.org/foswiki/Documentation/DockerYoctoBuild for details. When using a Docker container, it does not matter what Linux distribution or packages you have installed on your host, as all dependencies are provided by the Docker container.</p>
<p><strong>Note:</strong> You can also use a Docker container to build the Yocto recipes, refer to https://rocketboards.org/foswiki/Documentation/DockerYoctoBuild for details. When using a Docker container, it does not matter what Linux distribution or packages you have installed on your host, as all dependencies are provided by the Docker container.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span><span class="w"> </span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>yocto<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>yocto<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>yocto
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>styhead<span class="w"> </span>https://git.yoctoproject.org/poky
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>styhead<span class="w"> </span>https://git.yoctoproject.org/meta-intel-fpga
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>styhead<span class="w">   </span>https://github.com/openembedded/meta-openembedded
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="c1"># work around issue</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;do_package_qa[noexec] = &quot;1&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>meta-intel-fpga<span class="w"> </span>-name<span class="w"> </span>linux-socfpga_6.6.bb<span class="k">)</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="nb">source</span><span class="w"> </span>poky/oe-init-build-env<span class="w"> </span>./build
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;MACHINE = &quot;agilex7_dk_si_agf014eb&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>conf/local.conf
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;BBLAYERS += &quot; ${TOPDIR}/../meta-intel-fpga &quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>conf/bblayers.conf
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;BBLAYERS += &quot; ${TOPDIR}/../meta-openembedded/meta-oe &quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>conf/bblayers.conf<span class="w">  </span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;CORE_IMAGE_EXTRA_INSTALL += &quot;openssh gdbserver devmem2&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>conf/local.conf
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>bitbake<span class="w"> </span>core-image-minimal
</code></pre></div>
<p>After the build completes, which can take a few hours depending on your host system processing power and Internet connection speed, the following root file system archive is created.</p>
<ul>
<li>TOP_FOLDER/yocto/build/tmp/deploy/images/agilex7_dk_si_agf014eb/core-image-minimal-agilex7_dk_si_agf014eb.rootfs.tar.gz </li>
</ul>
<h3 id="build-sd-card-image">Build SD Card Image<a class="headerlink" href="#build-sd-card-image" title="Permanent link">&para;</a></h3>
<p>The following commands can be used to create the SD card image used in this example.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>sd_card<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>sd_card<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>sd_card
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>wget<span class="w"> </span>https://releases.rocketboards.org/release/2020.11/gsrd/tools/make_sdimage_p3.py
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="c1"># remove mkfs.fat parameter which has some issues on Ubuntu 22.04</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/\&quot;\-F 32\&quot;,//g&#39;</span><span class="w"> </span>make_sdimage_p3.py
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>chmod<span class="w"> </span>+x<span class="w"> </span>make_sdimage_p3.py
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>mkdir<span class="w"> </span>sdfs<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w">  </span><span class="nb">cd</span><span class="w"> </span>sdfs
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>cp<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/u-boot-socfpga/u-boot.itb<span class="w"> </span>.
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>cp<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/linux-socfpga/arch/arm64/boot/Image<span class="w"> </span>.
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>cp<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/linux-socfpga/arch/arm64/boot/dts/intel/socfpga_agilex_socdk.dtb<span class="w"> </span>.
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>cp<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/ghrd.core.rbf<span class="w"> </span>.
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="nb">cd</span><span class="w"> </span>..
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>mkdir<span class="w"> </span>rootfs<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>rootfs
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>sudo<span class="w"> </span>tar<span class="w"> </span>xf<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/yocto/build/tmp/deploy/images/agilex7_dk_si_agf014eb/core-image-minimal-agilex7_dk_si_agf014eb.rootfs.tar.gz
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>lib/modules/*
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="nb">cd</span><span class="w"> </span>..
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>sudo<span class="w"> </span>python3<span class="w"> </span>make_sdimage_p3.py<span class="w"> </span>-f<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>-P<span class="w"> </span>sdfs/*,num<span class="o">=</span><span class="m">1</span>,format<span class="o">=</span>fat32,size<span class="o">=</span>56M<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>-P<span class="w"> </span>rootfs/*,num<span class="o">=</span><span class="m">2</span>,format<span class="o">=</span>ext3,size<span class="o">=</span>56M<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>-s<span class="w"> </span>128M<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>-n<span class="w"> </span>sdcard.img
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="nb">cd</span><span class="w"> </span>..
</code></pre></div>
<p>The following items are included in the rootfs on the SD card. </p>
<ul>
<li>U-Boot </li>
<li>ATF </li>
<li>Linux kernel</li>
<li>Linux device tree</li>
<li>Linux Root File System</li>
<li>Phase2 Fabric design</li>
</ul>
<p>After completting the binaries build, the following files will be needed to boot Linux:</p>
<ul>
<li>$TOP_FOLDER/ghrd.hps.jic</li>
<li>$TOP_FOLDER/sd_card/sdcard.img</li>
</ul>
<h3 id="boot-linux">Boot Linux<a class="headerlink" href="#boot-linux" title="Permanent link">&para;</a></h3>
<p>Write SD card image to SD card and insert it in the slot.</p>
<p>1) Set MSEL to JTAG<br>
  2) Write the QSPI flash image:</p>
<p>Use Quartus® Pro Programmer to program the QSPI flash:
    <div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>cd $TOP_FOLDER/flash_image/
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>quartus_pgm -m jtag -o &quot;pvi;./ghrd.hps.jic&quot;
</code></pre></div>
  3) Set MSEL to QSPI and power cycle the board. Linux will boot, log in with 'root' as username.</p>
<h2 id="other-examples">Other Examples<a class="headerlink" href="#other-examples" title="Permanent link">&para;</a></h2>
<h3 id="boot-from-qspi">Boot from QSPI<a class="headerlink" href="#boot-from-qspi" title="Permanent link">&para;</a></h3>
<p>See  <a href="https://altera-fpga.github.io/latest/embedded-designs/agilex-7/f-series/soc/gsrd/ug-gsrd-agx7f-soc/#boot-from-qspi_1">Agilex™ 7 Boot From QSPI</a></p>
<h3 id="boot-with-nand-storage-on-hps">Boot with NAND Storage on HPS<a class="headerlink" href="#boot-with-nand-storage-on-hps" title="Permanent link">&para;</a></h3>
<p>See <a href="https://altera-fpga.github.io/latest/embedded-designs/agilex-7/f-series/soc/gsrd/ug-gsrd-agx7f-soc/#boot-from-nand_1">Agilex™ 7 Boot From NAND</a></p>
<h3 id="boot-with-emmc-storage-on-hps">Boot with eMMC Storage on HPS<a class="headerlink" href="#boot-with-emmc-storage-on-hps" title="Permanent link">&para;</a></h3>
<p>See <a href="https://altera-fpga.github.io/latest/embedded-designs/agilex-7/f-series/soc/emmc/ug-emmc-agx7f-soc/">HPS eMMC Boot Example</a></p>
<h2 id="running-u-boot-with-the-debugger-from-command-line">Running U-Boot with the Debugger from Command Line<a class="headerlink" href="#running-u-boot-with-the-debugger-from-command-line" title="Permanent link">&para;</a></h2>
<p>This section presents examples of how to run U-Boot with the Arm Development Studio from command line. This offers a simple and convenient way to run U-Boot and use it for example to program onboard flash.</p>
<p>1.- Use the binaries built for the <a href="#u-boot-to-linux-boot-booting-from-sdcard-example">U-Boot to Linux Boot - Booting From SDCard Example</a>:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>cd agilex7UbootToLinux.sdmmc
</code></pre></div></p>
<p>2.-  Run <strong>jtagconfig</strong> command to determine if the HPS is currently in the JTAG scanchain:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>jtagconfig
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>1) Agilex SI/SoC Dev Kit [3-4.3.4]
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>  6BA00477   S10HPS/AGILEX_HPS
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>  0341A0DD   AGFB014(F25A|R24AR0)
</code></pre></div>
  If HPS is not present, the line with S10HPS/AGILEX_HPS above will not appear.</p>
<p>3.- Configure the FPGA with the debug SOF:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a> quartus_pgm -c 1 -m jtag -o &quot;p;agilex_soc_devkit_ghrd/output_files/ghrd_agfb014r24a3e3vr0_hps_debug.sof@2&quot;
</code></pre></div>
  If the HPS is not present in the jtagconfig output above, please remove the "@2" from the command line above.</p>
<p>4.-  Create debugger script:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>cat &lt;&lt;EOT &gt; run-u-boot.ds
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>interrupt
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>restore &quot;u-boot-socfpga/spl/u-boot-spl-dtb.bin&quot; binary 0xFFE00000
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>loadfile &quot;u-boot-socfpga/spl/u-boot-spl&quot;
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>core 1
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>set \$PC = \$ENTRYPOINT
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>core 2
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>set \$PC = \$ENTRYPOINT
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>core 3
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>set \$PC = \$ENTRYPOINT
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>core 0
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>set \$PC = \$ENTRYPOINT
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>thbreak board_boot_order
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>continue
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>wait
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>set spl_boot_list[0]=0
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>set \$PC=\$LR
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>restore &quot;u-boot-socfpga/u-boot.itb&quot; binary 0x2000000
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>continue
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>EOT
</code></pre></div>
  5.- Run the debugger from command line, using the connection parameters reported above by jtagconfig, shown in red below:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>/opt/arm/developmentstudio-2022.2/bin/armdbg  \
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>--cdb-entry=&quot;Intel SoC FPGA::Agilex 7 SoC::Bare Metal Debug::Bare Metal Debug::Cortex-A53x4 SMP::Intel FPGA Download Cable&quot;  \
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>--cdb-entry-param=&quot;rvi_address=Agilex SI/SoC Dev Kit on localhost [3-4.3.4]:Agilex SI/SoC Dev Kit 3-4.3.4&quot;  \
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>--continue_on_error=true \
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>--stop_on_connect=false \
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>-s run-u-boot.ds
</code></pre></div>
  6.- The serial console will show SPL then U-Boot being run:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>U-Boot SPL 2024.07-35102-g135e53726d-dirty (Jan 29 2025 - 11:04:08 -0600)
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>Reset state: Cold
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>MPU          1200000 kHz
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>L4 Main         400000 kHz
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>L4 sys free   100000 kHz
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>L4 MP         200000 kHz
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>L4 SP         100000 kHz
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>SDMMC          50000 kHz
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>DDR: 8192 MiB
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>SDRAM-ECC: Initialized success with 1715 ms
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>QSPI: Reference clock at 400000 kHz
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>WDT:   Started watchdog@ffd00200 with servicing every 1000ms (10s timeout)
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>Trying to boot from MMC1
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>## Checking hash(es) for config board-0 … OK
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>## Checking hash(es) for Image atf … crc32+ OK
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>## Checking hash(es) for Image uboot … crc32+ OK
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>## Checking hash(es) for Image fdt-0 … crc32+ OK
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>NOTICE:  BL31: v2.11.1(release):QPDS24.3.1_REL_GSRD_PR
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>NOTICE:  BL31: Built : 11:03:24, Jan 29 2025
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>U-Boot 2024.07-35102-g135e53726d-dirty (Jan 29 2025 - 11:04:08 -0600)socfpga_agilex
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>CPU:   Intel FPGA SoCFPGA Platform (ARMv8 64bit Cortex-A53)
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>Model: SoCFPGA Agilex SoCDK
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>DRAM:  2 GiB (effective 8 GiB)
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a>Core:  28 devices, 23 uclasses, devicetree: separate
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a>WDT:   Started watchdog@ffd00200 with servicing every 1000ms (10s timeout)
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>MMC:   dwmmc0@ff808000: 0
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>Loading Environment from FAT... Unable to read &quot;uboot.env&quot; from mmc0:1...
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>In:    serial0@ffc02000
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>Out:   serial0@ffc02000
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>Err:   serial0@ffc02000
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>Net:   
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>Warning: ethernet@ff800000 (eth0) using random MAC address - 96:09:0f:73:d5:f5
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>eth0: ethernet@ff800000
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a>Hit any key to stop autoboot:    
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a>SOCFPGA_AGILEX #
</code></pre></div></p>
<h2 id="debugging-u-boot-with-arm-ds-eclipse">Debugging U-Boot with Arm DS Eclipse<a class="headerlink" href="#debugging-u-boot-with-arm-ds-eclipse" title="Permanent link">&para;</a></h2>
<p>This section presents examples of how to debug U-Boot with from the Arm Development Studio Eclipse-based GUI.</p>
<p>### Prerequisites
 1.- Use the binaries built for the <a href="#u-boot-to-linux-boot-booting-from-sdcard-example">U-Boot to Linux Boot - Booting From SDCard Example</a>:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>cd agilex7UbootToLinux.sdmmc
</code></pre></div></p>
<p>2.- Run jtagconfig to determine if the HPS is currently in the JTAG scanchain:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>jtagconfig
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>1) Agilex SI/SoC Dev Kit [3-4.3.4]
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>  6BA00477   S10HPS/AGILEX_HPS
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>  0341A0DD   AGFB014(F25A|R24AR0)
</code></pre></div></p>
<p>If HPS is not present, the line with S10HPS/AGILEX_HPS above will not appear.</p>
<p>3.- Configure the FPGA with the debug SOF:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>  quartus_pgm -c 1 -m jtag -o &quot;p;agilex_soc_devkit_ghrd/output_files/ghrd_agfb014r24b2e2v_hps_debug.sof@2&quot;
</code></pre></div></p>
<p>If the HPS is not present in the jtagconfig output above, please remove the "@2" from the command line above.</p>
<h3 id="debugging-spl">Debugging SPL<a class="headerlink" href="#debugging-spl" title="Permanent link">&para;</a></h3>
<p>1.- Run the steps from <strong>Prerequisites section</strong><br>
  2.- Start the Arm Development Studio Eclipse-based GUI:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>/opt/arm/developmentstudio-2022.2/bin/armds_ide -data workspace &amp;
</code></pre></div></p>
<p>Note the above creates a new workspace in the <strong>agilex7UbootToLinux.sdmmc</strong> folder.<br>
  3.- In <strong>Eclipse</strong>, Go to <strong>Run &gt; Debug Configurations</strong> to open the <strong>Debug Configurations</strong> window. <br>
  4.- In the <strong>Debug Configurations</strong> window: <br>
  a) Select the <strong>Generic Arm C/C++ Application</strong> on the left panel and right-click it. From the menu that appears, select <strong>New Configuration</strong>.<br>
  b) Edit the <strong>Name</strong> field from <strong>New_configuration</strong> to something more descriptive, such as <strong>Debug Agilex 7 Bootloader</strong>.<br></p>
<p>5.- In the <strong>Connection</strong> tab:<br>
  a) Go to <strong>Select target</strong> section and select <strong>Intel SoC FPGA &gt; Agilex &gt; Bare Metal Debug &gt; Cortex-A53x4 SMP</strong><br>
  b) Select the <strong>Target Connection</strong> to be <strong>Intel FPGA Download Cable</strong><br>
  c) Click the <strong>Bare Metal Debug &gt; Connection Browse</strong> button and select your cable.</p>
<p>The <strong>Debug Configurations</strong> window should now look like this:
  <a class="glightbox" href="../images/agilex-ds-boot-config2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/agilex-ds-boot-config2.png" /></a> </p>
<p>6.- Go to the <strong>Debugger</strong> tab, and do the following:<br>
  a) Select <strong>Connect Only</strong><br>
  b) Check <strong>Execute debugger commands</strong> and enter the following commands:</p>
<div class="highlight"><pre><span></span><code>```
interrupt
restore &quot;u-boot-socfpga/spl/u-boot-spl-dtb.bin&quot; binary 0xFFE00000
loadfile &quot;u-boot-socfpga/spl/u-boot-spl&quot;
set $PC = $ENTRYPOINT
```
</code></pre></div>
<p>c) Uncheck <strong>Host working directory &gt; Use default</strong> and edit the value to add "/../" so that it looks in the parent folder of the workspace.<br></p>
<p>The <strong>Debug Configurations</strong> window should now look like this:</p>
<p><a class="glightbox" href="../images/agilex-ds-boot-spl-debugger.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/agilex-ds-boot-spl-debugger.png" /></a></p>
<p>7.- Click the <strong>Debug</strong> button. Arm Development Studio will run the commands, therefore downloading the SPL to board and starting it. The Eclipse window should now look like this: </p>
<p><a class="glightbox" href="../images/agilex-ds-boot-spl-started.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/agilex-ds-boot-spl-started.png" /></a></p>
<p>8.- At this point you can use standard debug techniques to debug U-Boot SPL: viewing registers, variables, putting breakpoints, running step-by-step etc.</p>
<h3 id="debugging-u-boot">Debugging U-Boot<a class="headerlink" href="#debugging-u-boot" title="Permanent link">&para;</a></h3>
<p>1.- Run the steps from <strong>Prerequisites</strong> section<br>
  2.- Create the <strong>Debug Agilex Bootloader</strong> debug configuration as described in <a href="#debugging-spl">Debugging SPL</a> section.<br>
  3.- Change the <strong>Execute debugger commands</strong> box to contain the following commands:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>interrupt
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>restore &quot;u-boot-socfpga/spl/u-boot-spl-dtb.bin&quot; binary 0xFFE00000
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>loadfile &quot;u-boot-socfpga/spl/u-boot-spl&quot;
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>thb board_boot_order
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>core 1
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>set $PC = $ENTRYPOINT
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>core 2
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>set $PC = $ENTRYPOINT
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>core 3
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>set $PC = $ENTRYPOINT
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>core 0
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>set $PC = $ENTRYPOINT
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>continue
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>wait 60s
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>set spl_boot_list[0]=0
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a>set $PC=$LR
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>restore &quot;u-boot-socfpga/u-boot.itb&quot; binary 0x2000000
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>thb el3:0x1000
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>continue
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a>wait 60s
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a>symbol-file &quot;u-boot-socfpga/u-boot&quot;
<a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a>thb el2:relocate_code
<a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a>continue
<a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a>wait 60s
<a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a>symbol-file &quot;u-boot-socfpga/u-boot&quot; ((gd_t*)$x18)-&gt;reloc_off
<a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a>thb board_init_r
<a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a>continue
<a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a>wait 60s
</code></pre></div>
  What the above does is:<br>
  a) Load and run SPL<br>
  b) Make SPL report boot from RAM was selected <br>
  c) Load ATF+U-Boot image and run it up until U-Boot starts running<br>
  d) Load U-Boot symbols<br>
  e) Run U-Boot until the relocation routine is called<br>
  f) Relocate the U-Boot symbols<br>
  g) Run U-Boot until the <em>board_init_r</em> function<br></p>
<p>4.-  Click on the <strong>Debug</strong> button. All the above will be executed, and Eclipse will show the code stopped at <em>board_init_r</em> function. The <strong>Eclipse</strong> window should look like this:</p>
<p><a class="glightbox" href="../images/agilex-ds-boot-uboot-started.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/agilex-ds-boot-uboot-started.png" /></a></p>
<p>5.- At this point you can use standard debug techniques to debug U-Boot SPL: viewing registers, variables, putting breakpoints, running step-by-step etc.</p>
<h2 id="direct-atf-to-linux-boot-flow">Direct ATF to Linux Boot Flow<a class="headerlink" href="#direct-atf-to-linux-boot-flow" title="Permanent link">&para;</a></h2>
<p>Starting from 24.2 release, the Agilex™ 7 device is provided with the support of direct booting from ATF to Linux. In this boot flow, ATF acts as a First Stage Bootloader (BL2) and also as a Second Stage Bootloader (BL31). This last one is in charge of loading and launching Linux OS, so U-Boot is not used in this boot flow.</p>
<p><a class="glightbox" href="../images/ATF_Linux_bootflow.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/ATF_Linux_bootflow.jpg" /></a></p>
<p>In this boot flow, the BL2 (FSBL) is included in the bitstream together with the SDM FW and hardware design (first phase only in HPS boot first mode). When booting from QSPI, this bitstream is stored in the QSPI memory. In this boot flow, the BL31 (SSBL) is packed with the Linux kernel and device tree into a FIP format image. This format provides to ATF the information about the components included in the image in a partition header. The resulting FIP image is added to the final flash image used to boot from (QSPI or SDCard). The following sections provide instructions about how to generate the binaries to exercise this boot flow booting from an SDcard and QSPI devices.</p>
<p>When creating the flash image, it's necessary to provide the location in where ATF expects to find the FIP image (fip.bin). This is hardcoded in the ATF code (<strong>plat/intel/soc/common/include/platform_def.h</strong>) for each one of the flash devices in which this boot flow is supported as indicated in the next table:</p>
<table>
<thead>
<tr>
<th align="left">Flash Device</th>
<th align="left">Definition</th>
<th align="left">Location in Flash device</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">QSPI</td>
<td align="left">PLAT_QSPI_DATA_BASE</td>
<td align="left">0x3C00000</td>
</tr>
<tr>
<td align="left">SDCard</td>
<td align="left">PLAT_SDMMC_DATA_BASE</td>
<td align="left">0x0</td>
</tr>
</tbody>
</table>
<h3 id="atf-to-linux-from-sd-card">ATF to Linux from SD Card<a class="headerlink" href="#atf-to-linux-from-sd-card" title="Permanent link">&para;</a></h3>
<p>The following recipe provides all the steps needed to create the binaries that allow you to exercise the ATF to Linux boot flow from a SD Card device. The recipe includes building the hardware design, ATF (BL2, BL31), Linux file system, and Linux. These are some notes about the build instructions:</p>
<ul>
<li>Excercise the HPS boot first flow.</li>
<li>When building ATF, we indicate the device used to boot from. We also indicate the SDRAM memory locations where the Linux kernel image and device tree will be loaded and launched from. In this boot flow, Linux is referred to as BL33.</li>
<li>The FIP image (fip.bin) is created using the ATF fiptool, indicating the binaries that integrates this image.</li>
<li>The SD Card created will include 2 partitions. One in which the fip.bin file is located (raw format and type A2) and the other for the file system (ext3 format).</li>
<li>
<p>If wanted to perform FPGA configuration (2<sup>nd</sup> phase from Linux) from Linux create overlays.dtb as indicated in <a href="https://altera-fpga.github.io/latest/embedded-designs/agilex-7/f-series/soc/fabric-config/ug-linux-fabric-config-agx7f-soc/">Agilex™ 7 SoC Fabric Configuration from Linux Example</a></p>
<p><a class="glightbox" href="../images/ATF_Linux_Image_SDCard.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/ATF_Linux_Image_SDCard.jpg" style="height:500px" /></a></p>
</li>
</ul>
<h4 id="toolchain-setup-atf-to-linux">Toolchain Setup (ATF-To-Linux)<a class="headerlink" href="#toolchain-setup-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>atfToLinux_sdcard_qspi
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>mkdir<span class="w"> </span>atfToLinux_sdcard_qspi<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>atfToLinux_sdcard_qspi
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="nb">export</span><span class="w"> </span><span class="nv">TOP_FOLDER</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
</code></pre></div>
<p>Download the compiler toolchain, add it to the PATH variable, to be used by the GHRD makefile to build the HPS Debug FSBL:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>wget<span class="w"> </span>https://developer.arm.com/-/media/Files/downloads/gnu/11.2-2022.02/binrel/<span class="se">\</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>gcc-arm-11.2-2022.02-x86_64-aarch64-none-linux-gnu.tar.xz
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>tar<span class="w"> </span>xf<span class="w"> </span>gcc-arm-11.2-2022.02-x86_64-aarch64-none-linux-gnu.tar.xz
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>rm<span class="w"> </span>-f<span class="w"> </span>gcc-arm-11.2-2022.02-x86_64-aarch64-none-linux-gnu.tar.xz
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/gcc-arm-11.2-2022.02-x86_64-aarch64-none-linux-gnu/bin:<span class="nv">$PATH</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="nb">export</span><span class="w"> </span><span class="nv">ARCH</span><span class="o">=</span>arm64
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="nb">export</span><span class="w"> </span><span class="nv">CROSS_COMPILE</span><span class="o">=</span>aarch64-none-linux-gnu-
</code></pre></div>
<p>Enable Quartus tools to be called from command line:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">QUARTUS_ROOTDIR</span><span class="o">=</span>~/intelFPGA_pro/24.3.1/quartus/
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$QUARTUS_ROOTDIR</span>/bin:<span class="nv">$QUARTUS_ROOTDIR</span>/linux64:<span class="nv">$QUARTUS_ROOTDIR</span>/../qsys/bin:<span class="nv">$PATH</span>
</code></pre></div>
<h4 id="build-hardware-design-atf-to-linux">Build Hardware Design (ATF-To-Linux)<a class="headerlink" href="#build-hardware-design-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>ghrd-socfpga<span class="w"> </span>agilex_soc_devkit_ghrd
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>QPDS24.3.1_REL_GSRD_PR<span class="w">  </span>https://github.com/altera-opensource/ghrd-socfpga
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>mv<span class="w"> </span>ghrd-socfpga/agilex_soc_devkit_ghrd<span class="w"> </span>.
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>rm<span class="w"> </span>-rf<span class="w"> </span>ghrd-socfpga
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="nb">cd</span><span class="w"> </span>agilex_soc_devkit_ghrd
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="c1"># disable sgmii and partial reconfiguration - to decrease build time</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="nb">export</span><span class="w"> </span><span class="nv">HPS_ENABLE_SGMII</span><span class="o">=</span><span class="m">0</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="nb">export</span><span class="w"> </span><span class="nv">ENABLE_PARTIAL_RECONFIGURATION</span><span class="o">=</span><span class="m">0</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="nb">export</span><span class="w"> </span><span class="nv">BOARD_PWRMGT</span><span class="o">=</span>linear
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>make<span class="w"> </span>scrub_clean_all
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>make<span class="w"> </span>generate_from_tcl
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>make<span class="w"> </span>all
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="nb">cd</span><span class="w"> </span>..
</code></pre></div>
<p>The following file is created:</p>
<ul>
<li>$TOP_FOLDER/agilex_soc_devkit_ghrd/output_files/ghrd_agfb014r24b2e2v.sof</li>
</ul>
<h4 id="build-arm-trusted-firmware-for-sdcard-atf-to-linux">Build Arm Trusted Firmware for SDCard (ATF-To-Linux)<a class="headerlink" href="#build-arm-trusted-firmware-for-sdcard-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>arm-trusted-firmware-sdcard
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>QPDS24.3.1_REL_GSRD_PR<span class="w"> </span>https://github.com/altera-opensource/arm-trusted-firmware<span class="w"> </span>arm-trusted-firmware-sdcard
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="nb">cd</span><span class="w"> </span>arm-trusted-firmware-sdcard<span class="w"> </span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>make<span class="w"> </span>realclean
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="c1"># Setting Bootsource as SDMMC</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>make<span class="w"> </span>bl2<span class="w"> </span>bl31<span class="w"> </span><span class="nv">PLAT</span><span class="o">=</span>agilex<span class="w"> </span><span class="nv">ARM_LINUX_KERNEL_AS_BL33</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">SOCFPGA_BOOT_SOURCE_SDMMC</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">PRELOADED_BL33_BASE</span><span class="o">=</span>0x02000000<span class="w"> </span><span class="nv">ARM_PRELOADED_DTB_BASE</span><span class="o">=</span>0x10000000<span class="w"> </span>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="c1"># Create Fiptool tool</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>make<span class="w"> </span>-C<span class="w"> </span>tools/fiptool<span class="w"> </span>clean
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>make<span class="w"> </span>fiptool
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="nb">cd</span><span class="w"> </span>..
</code></pre></div>
<p>The following files are created:</p>
<ul>
<li>$TOP_FOLDER/arm-trusted-firmware-sdcard/build/agilex/release/bl2.bin</li>
<li>$TOP_FOLDER/arm-trusted-firmware-sdcard/build/agilex/release/bl31.bin</li>
</ul>
<h4 id="build-linux-file-system-atf-to-linux">Build Linux File System  (ATF-To-Linux)<a class="headerlink" href="#build-linux-file-system-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>yocto<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>yocto<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>yocto
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>styhead<span class="w"> </span>https://git.yoctoproject.org/poky
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>styhead<span class="w"> </span>https://git.yoctoproject.org/meta-intel-fpga
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>styhead<span class="w"> </span>https://github.com/openembedded/meta-openembedded
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="c1"># work around issue</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;do_package_qa[noexec] = &quot;1&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>meta-intel-fpga<span class="w"> </span>-name<span class="w"> </span>linux-socfpga_6.6.bb<span class="k">)</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="nb">source</span><span class="w"> </span>poky/oe-init-build-env<span class="w"> </span>./build
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;MACHINE = &quot;agilex7_dk_si_agf014eb&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>conf/local.conf
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;BBLAYERS += &quot; ${TOPDIR}/../meta-intel-fpga &quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>conf/bblayers.conf
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;BBLAYERS += &quot; ${TOPDIR}/../meta-openembedded/meta-oe &quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>conf/bblayers.conf
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;IMAGE_FSTYPES = &quot;tar.gz cpio jffs2&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>conf/local.conf
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="c1"># enable ssh and gdb access</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;CORE_IMAGE_EXTRA_INSTALL += &quot;openssh gdbserver devmem2&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>conf/local.conf
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>bitbake<span class="w"> </span>core-image-minimal
</code></pre></div>
<p>The following file is created:</p>
<ul>
<li>$TOP_FOLDER/yocto/build/tmp/deploy/images/agilex7_dk_si_agf014eb/core-image-minimal-agilex7_dk_si_agf014eb.rootfs.cpio</li>
</ul>
<h4 id="build-linux-for-sdcard-atf-to-linux">Build Linux for SDCard (ATF-To-Linux)<a class="headerlink" href="#build-linux-for-sdcard-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>linux-socfpga
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>QPDS24.3.1_REL_GSRD_PR<span class="w"> </span>https://github.com/altera-opensource/linux-socfpga<span class="w"> </span>linux-socfpga-sdcard
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="nb">cd</span><span class="w"> </span>linux-socfpga-sdcard
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="c1"># Replace bootargs to use file system from SDcard instead of RAMFS (New device tree will be provided later 14023675777)</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/bootargs/bootargs_old/g&#39;</span><span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dts
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;/bootargs_old/i \\t\tbootargs = &quot;earlycon panic=-1 root=/dev/mmcblk0p2 rw rootwait&quot;;&#39;</span><span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dts
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;/bootargs_old/,+2d&#39;</span><span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dts
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="c1">## Disabling GMAC (14023884834)</span>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;&amp;gmac0 {\n\tstatus = \&quot;disabled\&quot;;\n};&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dts
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; config-fragment-agilex</span>
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a><span class="s"># enable kernel debugging with RiscFree</span>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a><span class="s">CONFIG_DEBUG_INFO=y</span>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a><span class="s">CONFIG_GDB_SCRIPTS=y</span>
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a><span class="s">CONFIG_INITRAMFS_ROOT_UID=0</span>
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a><span class="s">CONFIG_INITRAMFS_ROOT_GID=0</span>
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a><span class="s">CONFIG_INITRAMFS_COMPRESSION_GZIP=y</span>
<a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a>
<a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a><span class="s"># Include these configs if wanted to perform fpga reconfiguration using overlays (enable device tree overlays and fpga bridges)</span>
<a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a><span class="s"># Taken from https://altera-fpga.github.io/latest/embedded-designs/agilex-7/f-series/soc/fabric-config/ug-linux-fabric-config-agx7f-soc/</span>
<a id="__codelineno-31-23" name="__codelineno-31-23" href="#__codelineno-31-23"></a><span class="s">CONFIG_OF_RESOLVE=y</span>
<a id="__codelineno-31-24" name="__codelineno-31-24" href="#__codelineno-31-24"></a><span class="s">CONFIG_OF_OVERLAY=y</span>
<a id="__codelineno-31-25" name="__codelineno-31-25" href="#__codelineno-31-25"></a><span class="s">CONFIG_OF_CONFIGFS=y</span>
<a id="__codelineno-31-26" name="__codelineno-31-26" href="#__codelineno-31-26"></a><span class="s">CONFIG_FPGA_MGR_STRATIX10_SOC=y</span>
<a id="__codelineno-31-27" name="__codelineno-31-27" href="#__codelineno-31-27"></a><span class="s">CONFIG_FPGA_BRIDGE=y</span>
<a id="__codelineno-31-28" name="__codelineno-31-28" href="#__codelineno-31-28"></a><span class="s">CONFIG_FPGA_REGION=y</span>
<a id="__codelineno-31-29" name="__codelineno-31-29" href="#__codelineno-31-29"></a><span class="s">CONFIG_OF_FPGA_REGION=y</span>
<a id="__codelineno-31-30" name="__codelineno-31-30" href="#__codelineno-31-30"></a><span class="s">CONFIG_OVERLAY_FS=y</span>
<a id="__codelineno-31-31" name="__codelineno-31-31" href="#__codelineno-31-31"></a><span class="s">CONFIG_ALTERA_SYSID=y</span>
<a id="__codelineno-31-32" name="__codelineno-31-32" href="#__codelineno-31-32"></a><span class="s">EOF</span>
<a id="__codelineno-31-33" name="__codelineno-31-33" href="#__codelineno-31-33"></a>
<a id="__codelineno-31-34" name="__codelineno-31-34" href="#__codelineno-31-34"></a>make<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>mrproper
<a id="__codelineno-31-35" name="__codelineno-31-35" href="#__codelineno-31-35"></a>make<span class="w"> </span>defconfig
<a id="__codelineno-31-36" name="__codelineno-31-36" href="#__codelineno-31-36"></a><span class="c1"># Apply custom Configs in file</span>
<a id="__codelineno-31-37" name="__codelineno-31-37" href="#__codelineno-31-37"></a>./scripts/kconfig/merge_config.sh<span class="w"> </span>-O<span class="w"> </span>./<span class="w"> </span>./.config<span class="w"> </span>./config-fragment-agilex
<a id="__codelineno-31-38" name="__codelineno-31-38" href="#__codelineno-31-38"></a>
<a id="__codelineno-31-39" name="__codelineno-31-39" href="#__codelineno-31-39"></a>make<span class="w"> </span>oldconfig
<a id="__codelineno-31-40" name="__codelineno-31-40" href="#__codelineno-31-40"></a>make<span class="w"> </span>-j<span class="w"> </span><span class="m">64</span><span class="w"> </span>Image<span class="w"> </span>dtbs
</code></pre></div>
<p>The following files are created:</p>
<ul>
<li>$TOP_FOLDER/linux-socfpga-sdcard/arch/arm64/boot/Image</li>
<li>$TOP_FOLDER/linux-socfpga-sdcard/arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dtb</li>
</ul>
<h4 id="build-sd-card-image-with-fip-inside-atf-to-linux">Build SD Card image with FIP inside (ATF-To-Linux)<a class="headerlink" href="#build-sd-card-image-with-fip-inside-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1">#--- Build FIP Image</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>mkdir<span class="w"> </span>sd_card<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>sd_card
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="nv">$TOP_FOLDER</span>/arm-trusted-firmware-sdcard/tools/fiptool/fiptool<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>--soc-fw<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/arm-trusted-firmware-sdcard/build/agilex/release/bl31.bin<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>--nt-fw<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/linux-socfpga-sdcard/arch/arm64/boot/Image<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>--nt-fw-config<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/linux-socfpga-sdcard/arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dtb<span class="w"> </span>fip.bin
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="c1">#--- Build SDCard Image</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>wget<span class="w"> </span>https://releases.rocketboards.org/release/2020.11/gsrd/tools/make_sdimage_p3.py
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="c1"># remove mkfs.fat parameter which has some issues on Ubuntu 22.04</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/\&quot;\-F 32\&quot;,//g&#39;</span><span class="w"> </span>make_sdimage_p3.py
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>chmod<span class="w"> </span>+x<span class="w"> </span>make_sdimage_p3.py
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>mkdir<span class="w"> </span>rootfs<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>rootfs
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>sudo<span class="w"> </span>tar<span class="w"> </span>-xf<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/yocto/build/tmp/deploy/images/agilex7_dk_si_agf014eb/core-image-minimal-agilex7_dk_si_agf014eb.rootfs.tar.gz
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>lib/modules/*
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a><span class="nb">cd</span><span class="w"> </span>..
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>sudo<span class="w"> </span>python3<span class="w"> </span>make_sdimage_p3.py<span class="w"> </span>-f<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>-P<span class="w"> </span>fip.bin,num<span class="o">=</span><span class="m">1</span>,format<span class="o">=</span>raw,size<span class="o">=</span>64M,type<span class="o">=</span>a2<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>-P<span class="w"> </span>rootfs/*,num<span class="o">=</span><span class="m">2</span>,format<span class="o">=</span>ext3,size<span class="o">=</span>64M<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>-s<span class="w"> </span>128M<span class="w"> </span>-n<span class="w"> </span>sdimage_atf.img
</code></pre></div>
<p>The following file is created:</p>
<ul>
<li>$TOP_FOLDER/sd_card/sdimage_atf.img</li>
</ul>
<h4 id="build-jic-image-for-sdcard-boot-atf-to-linux">Build JIC image for SDCard Boot (ATF-To-Linux)<a class="headerlink" href="#build-jic-image-for-sdcard-boot-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="c1"># Convert fsbl</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>aarch64-none-linux-gnu-objcopy<span class="w"> </span>-v<span class="w"> </span>-I<span class="w"> </span>binary<span class="w"> </span>-O<span class="w"> </span>ihex<span class="w"> </span>--change-addresses<span class="w"> </span>0xffe00000<span class="w"> </span>arm-trusted-firmware-sdcard/build/agilex/release/bl2.bin<span class="w"> </span>fsbl.hex
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="c1"># Create .jic file</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>quartus_pfg<span class="w"> </span>-c<span class="w"> </span>agilex_soc_devkit_ghrd/output_files/ghrd_agfb014r24b2e2v.sof<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>design_atf.jic<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>-o<span class="w"> </span><span class="nv">hps_path</span><span class="o">=</span>fsbl.hex<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>-o<span class="w"> </span><span class="nv">device</span><span class="o">=</span>MT25QU128<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>-o<span class="w"> </span><span class="nv">flash_loader</span><span class="o">=</span>AGFB014R24B2E2V<span class="w">  </span><span class="se">\</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>-o<span class="w"> </span><span class="nv">mode</span><span class="o">=</span>ASX4<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>-o<span class="w"> </span><span class="nv">hps</span><span class="o">=</span><span class="m">1</span>
</code></pre></div>
<p>You can exercise ATF to Linux boot flow from SD Card using the following binaries generated:</p>
<ul>
<li>$TOP_FOLDER/sd_card/sdimage_atf.img</li>
<li>$TOP_FOLDER/design_atf.hps.jic</li>
</ul>
<p>When booting with the binaries generated, this is the log that you will see:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>NOTICE:  SDMMC boot
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>NOTICE:  BL2: 2.11.1(release):QPDS24.3.1_REL_GSRD_PR
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>NOTICE:  BL2: Built : 11:48:31, Jan 29 2025
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>NOTICE:  BL2: Booting BL31
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>NOTICE:  BL31: 2.11.1(release):QPDS24.3.1_REL_GSRD_PR
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>NOTICE:  BL31: Built : 11:48:36, Jan 29 2025
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>[    0.000000] Booting Linux on physical CPU 0x0000000000 [0x410fd034]
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>[    0.000000] Linux version 6.6.51-lts-g346486b5245f-dirty (rolando@rolando2-linux-lab) (aarch64-none-linux-gnu-gcc (GNU Toolchain for the Arm Architecture 11.2-2022.02 (arm-11.14)) 11.2.1 20220111, GNU ld (GNU Toolchain for the Arm Architecture 11.2-2022.02 (arm-11.14)) 2.37.20220122) #1 SMP PREEMPT Wed Jan 29 11:56:17 CST 2025
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>[    0.000000] KASLR disabled due to lack of seed
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>[    0.000000] Machine model: SoCFPGA Agilex SoCDK
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a>[    0.000000] efi: UEFI not found.
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a>[    0.000000] Reserved memory: created DMA memory pool at 0x0000000000000000, size 32 MiB
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>[    0.000000] OF: reserved mem: initialized node svcbuffer@0, compatible id shared-dma-pool
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a>[    0.000000] OF: reserved mem: 0x0000000000000000..0x0000000001ffffff (32768 KiB) nomap non-reusable svcbuffer@0
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>[    0.000000] earlycon: uart0 at MMIO32 0x00000000ffc02000 (options &#39;115200n8&#39;)
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>[    0.000000] printk: bootconsole [uart0] enabled
<a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>
<a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a>:
<a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a>Poky (Yocto Project Reference Distro) 5.0.5 agilex7_dk_si_agf014eb /dev/ttyS0
<a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a>
<a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a>WARNING: Poky is a reference Yocto Project distribution that should be used for
<a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a>testing and development purposes only. It is recommended that you create your
<a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a>own distribution for production use.
<a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a>
<a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a>root@agilex7_dk_si_agf014eb:~# 
</code></pre></div></p>
<h3 id="atf-to-linux-from-qspi">ATF to Linux from QSPI<a class="headerlink" href="#atf-to-linux-from-qspi" title="Permanent link">&para;</a></h3>
<p>For boot from QSPI flow, some of the binaries created in the section are reused. ATF requires to be rebuilt to enable booting from QSPI updating BOOT_SOURCE to BOOT_SOURCE_QSPI. Linux also need to be rebuild since this time we are included the file system in the kernel. The file system will be loaded as RAM file system, so there is no data persistency in Linux. The FIP image is created in the same way but this time the FIP image is put into the QSPI image using a specific .pfg file. In this .pfg file we are indicating that the fip file will be located at <strong>0x3C00000</strong> location in the QSPI since this is also indicated by the <strong>PLAT_QSPI_DATA_BASE</strong> definition.</p>
<p><a class="glightbox" href="../images/ATF_Linux_Image_QSPI.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../images/ATF_Linux_Image_QSPI.jpg" style="height:500px" /></a></p>
<h4 id="build-arm-trusted-firmware-for-qspi-atf-to-linux">Build Arm Trusted Firmware for QSPI (ATF-To-Linux)<a class="headerlink" href="#build-arm-trusted-firmware-for-qspi-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="c1"># Building ATF</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>rm<span class="w"> </span>-rf<span class="w"> </span>arm-trusted-firmware-qspi
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>QPDS24.3.1_REL_GSRD_PR<span class="w"> </span>https://github.com/altera-opensource/arm-trusted-firmware<span class="w"> </span>arm-trusted-firmware-qspi
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="nb">cd</span><span class="w"> </span>arm-trusted-firmware-qspi
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="c1"># Select QSPI as boot source</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>make<span class="w"> </span>realclean
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>make<span class="w"> </span>bl2<span class="w"> </span>bl31<span class="w"> </span><span class="nv">PLAT</span><span class="o">=</span>agilex<span class="w"> </span><span class="nv">ARM_LINUX_KERNEL_AS_BL33</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">SOCFPGA_BOOT_SOURCE_QSPI</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">PRELOADED_BL33_BASE</span><span class="o">=</span>0x02000000<span class="w"> </span><span class="nv">ARM_PRELOADED_DTB_BASE</span><span class="o">=</span>0x10000000<span class="w"> </span><span class="nv">DEBUG</span><span class="o">=</span><span class="m">0</span>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="c1"># Create Fiptool tool</span>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>make<span class="w"> </span>-C<span class="w"> </span>tools/fiptool<span class="w"> </span>clean
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>make<span class="w"> </span>fiptool
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="nb">cd</span><span class="w"> </span>..
</code></pre></div>
<p>The following files are created:</p>
<ul>
<li>$TOP_FOLDER/arm-trusted-firmware-qspi/build/agilex/release/bl2.bin </li>
<li>$TOP_FOLDER/arm-trusted-firmware-qspi/build/agilex/release/bl31.bin</li>
</ul>
<h4 id="build-linux-for-qspi-atf-to-linux">Build Linux for QSPI (ATF-To-Linux)<a class="headerlink" href="#build-linux-for-qspi-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>linux-socfpga-qspi
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>QPDS24.3.1_REL_GSRD_PR<span class="w"> </span>https://github.com/altera-opensource/linux-socfpga<span class="w"> </span>linux-socfpga-qspi
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="nb">cd</span><span class="w"> </span>linux-socfpga-qspi
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="c1">## Change QSPI CLK frequency to 50 MHZ to match ATF cfg (This may not be needed after 14023675777)</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>sed<span class="w"> </span>-i<span class="w">  </span><span class="s1">&#39;s/spi-max-frequency = &lt;100000000&gt;;/spi-max-frequency = &lt;50000000&gt;;/g&#39;</span><span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk.dts
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>sed<span class="w"> </span>-i<span class="w">  </span><span class="s1">&#39;s/root: partition@4200000/root: partition@7000000/g&#39;</span><span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk.dts
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>sed<span class="w"> </span>-i<span class="w">  </span><span class="s1">&#39;s/reg = &lt;0x04200000 0x0BE00000&gt;/reg = &lt;0x07000000 0x09000000&gt;/g&#39;</span><span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk.dts
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="c1"># Replace bootargs to use file system from QSPI instead of RAMFS (New device tree will be provided later 14023675777)</span>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/bootargs/bootargs_old/g&#39;</span><span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dts
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;/bootargs_old/i \\t\tbootargs = &quot;earlycon panic=-1 root=/dev/mtdblock1 rw rootfstype=jffs2 rootwait&quot;;&#39;</span><span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dts
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;/bootargs_old/,+2d&#39;</span><span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dts
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a><span class="c1">## Disabling GMAC (14023884834)</span>
<a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;&amp;gmac0 {\n\tstatus = \&quot;disabled\&quot;;\n};&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dts
<a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a>
<a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; config-fragment-agilex</span>
<a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a><span class="s"># enable kernel debugging with RiscFree</span>
<a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a><span class="s">CONFIG_DEBUG_INFO=y</span>
<a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a><span class="s">CONFIG_GDB_SCRIPTS=y</span>
<a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a>
<a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a><span class="s"># Include these configs if wanted to perform fpga reconfiguration using overlays (enable device tree overlays and fpga bridges)</span>
<a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a><span class="s"># Taken from https://altera-fpga.github.io/latest/embedded-designs/agilex-7/f-series/soc/fabric-config/ug-linux-fabric-config-agx7f-soc/  </span>
<a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a><span class="s">CONFIG_OF_RESOLVE=y</span>
<a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a><span class="s">CONFIG_OF_OVERLAY=y</span>
<a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a><span class="s">CONFIG_OF_CONFIGFS=y</span>
<a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a><span class="s">CONFIG_FPGA_MGR_STRATIX10_SOC=y</span>
<a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a><span class="s">CONFIG_FPGA_BRIDGE=y</span>
<a id="__codelineno-36-31" name="__codelineno-36-31" href="#__codelineno-36-31"></a><span class="s">CONFIG_FPGA_REGION=y</span>
<a id="__codelineno-36-32" name="__codelineno-36-32" href="#__codelineno-36-32"></a><span class="s">CONFIG_OF_FPGA_REGION=y</span>
<a id="__codelineno-36-33" name="__codelineno-36-33" href="#__codelineno-36-33"></a><span class="s">CONFIG_OVERLAY_FS=y</span>
<a id="__codelineno-36-34" name="__codelineno-36-34" href="#__codelineno-36-34"></a><span class="s">CONFIG_ALTERA_SYSID=y</span>
<a id="__codelineno-36-35" name="__codelineno-36-35" href="#__codelineno-36-35"></a><span class="s"># Enabling JFFS2 File system</span>
<a id="__codelineno-36-36" name="__codelineno-36-36" href="#__codelineno-36-36"></a><span class="s">CONFIG_JFFS2_FS=y</span>
<a id="__codelineno-36-37" name="__codelineno-36-37" href="#__codelineno-36-37"></a><span class="s">EOF</span>
<a id="__codelineno-36-38" name="__codelineno-36-38" href="#__codelineno-36-38"></a>
<a id="__codelineno-36-39" name="__codelineno-36-39" href="#__codelineno-36-39"></a>make<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>mrproper
<a id="__codelineno-36-40" name="__codelineno-36-40" href="#__codelineno-36-40"></a>make<span class="w"> </span>defconfig
<a id="__codelineno-36-41" name="__codelineno-36-41" href="#__codelineno-36-41"></a><span class="c1"># Apply custom Configs in file</span>
<a id="__codelineno-36-42" name="__codelineno-36-42" href="#__codelineno-36-42"></a>./scripts/kconfig/merge_config.sh<span class="w"> </span>-O<span class="w"> </span>./<span class="w"> </span>./.config<span class="w"> </span>./config-fragment-agilex
<a id="__codelineno-36-43" name="__codelineno-36-43" href="#__codelineno-36-43"></a>
<a id="__codelineno-36-44" name="__codelineno-36-44" href="#__codelineno-36-44"></a>make<span class="w"> </span>oldconfig
<a id="__codelineno-36-45" name="__codelineno-36-45" href="#__codelineno-36-45"></a>make<span class="w"> </span>-j<span class="w"> </span><span class="m">64</span><span class="w"> </span>Image<span class="w"> </span>dtbs
</code></pre></div>
<p>The output files from this stage are:</p>
<ul>
<li>$TOP_FOLDER/linux-socfpga-qspi/arch/arm64/boot/Image</li>
<li>$TOP_FOLDER/linux-socfpga-qspi/arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dtb</li>
</ul>
<h4 id="create-pfg-file-for-qspi-boot-atf-to-linux">Create pfg file for QSPI Boot (ATF-To-Linux)<a class="headerlink" href="#create-pfg-file-for-qspi-boot-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; qspi_flash_image_agilex_boot.pfg</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="s">&lt;pfg version=&quot;1&quot;&gt;</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="s">  &lt;settings custom_db_dir=&quot;./&quot; mode=&quot;ASX4&quot;/&gt;</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="s">  &lt;output_files&gt;</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="s">      &lt;output_file name=&quot;flash_image_atf_qspi&quot; directory=&quot;.&quot; type=&quot;JIC&quot;&gt;</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="s">          &lt;file_options/&gt;</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="s">          &lt;secondary_file type=&quot;MAP&quot; name=&quot;flash_image_atf_qspi_jic&quot;&gt;</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="s">              &lt;file_options/&gt;</span>
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="s">          &lt;/secondary_file&gt;</span>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="s">          &lt;secondary_file type=&quot;SEC_RPD&quot; name=&quot;flash_image_atf_qspi_jic&quot;&gt;</span>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="s">              &lt;file_options bitswap=&quot;1&quot;/&gt;</span>
<a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a><span class="s">          &lt;/secondary_file&gt;</span>
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a><span class="s">          &lt;flash_device_id&gt;Flash_Device_1&lt;/flash_device_id&gt;</span>
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a><span class="s">      &lt;/output_file&gt;</span>
<a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a><span class="s">  &lt;/output_files&gt;</span>
<a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a><span class="s">  &lt;bitstreams&gt;</span>
<a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a><span class="s">      &lt;bitstream id=&quot;Bitstream_1&quot;&gt;</span>
<a id="__codelineno-37-19" name="__codelineno-37-19" href="#__codelineno-37-19"></a><span class="s">          &lt;path hps_path=&quot;./fsbl.hex&quot;&gt;./ghrd_agfb014r24b2e2v.sof&lt;/path&gt;</span>
<a id="__codelineno-37-20" name="__codelineno-37-20" href="#__codelineno-37-20"></a><span class="s">      &lt;/bitstream&gt;</span>
<a id="__codelineno-37-21" name="__codelineno-37-21" href="#__codelineno-37-21"></a><span class="s">  &lt;/bitstreams&gt;</span>
<a id="__codelineno-37-22" name="__codelineno-37-22" href="#__codelineno-37-22"></a><span class="s">  &lt;raw_files&gt;</span>
<a id="__codelineno-37-23" name="__codelineno-37-23" href="#__codelineno-37-23"></a><span class="s">      &lt;raw_file bitswap=&quot;1&quot; type=&quot;RBF&quot; id=&quot;Raw_File_1&quot;&gt;fip.bin&lt;/raw_file&gt;</span>
<a id="__codelineno-37-24" name="__codelineno-37-24" href="#__codelineno-37-24"></a><span class="s">      &lt;raw_file bitswap=&quot;1&quot; type=&quot;RBF&quot; id=&quot;Raw_File_2&quot;&gt;rootfs.bin&lt;/raw_file&gt;</span>
<a id="__codelineno-37-25" name="__codelineno-37-25" href="#__codelineno-37-25"></a><span class="s">  &lt;/raw_files&gt;</span>
<a id="__codelineno-37-26" name="__codelineno-37-26" href="#__codelineno-37-26"></a><span class="s">  &lt;flash_devices&gt;</span>
<a id="__codelineno-37-27" name="__codelineno-37-27" href="#__codelineno-37-27"></a><span class="s">      &lt;flash_device type=&quot;MT25QU02G&quot; id=&quot;Flash_Device_1&quot;&gt;</span>
<a id="__codelineno-37-28" name="__codelineno-37-28" href="#__codelineno-37-28"></a><span class="s">          &lt;partition reserved=&quot;1&quot; fixed_s_addr=&quot;1&quot; s_addr=&quot;0x00000000&quot; e_addr=&quot;0x001FFFFF&quot; fixed_e_addr=&quot;1&quot; id=&quot;BOOT_INFO&quot; size=&quot;0&quot;/&gt;</span>
<a id="__codelineno-37-29" name="__codelineno-37-29" href="#__codelineno-37-29"></a><span class="s">          &lt;partition reserved=&quot;0&quot; fixed_s_addr=&quot;0&quot; s_addr=&quot;auto&quot; e_addr=&quot;auto&quot; fixed_e_addr=&quot;0&quot; id=&quot;P1&quot; size=&quot;0&quot;/&gt;</span>
<a id="__codelineno-37-30" name="__codelineno-37-30" href="#__codelineno-37-30"></a><span class="s">          &lt;partition reserved=&quot;0&quot; fixed_s_addr=&quot;0&quot; s_addr=&quot;0x03C00000&quot; e_addr=&quot;auto&quot; fixed_e_addr=&quot;0&quot; id=&quot;fip&quot; size=&quot;0&quot;/&gt;</span>
<a id="__codelineno-37-31" name="__codelineno-37-31" href="#__codelineno-37-31"></a><span class="s">          &lt;partition reserved=&quot;0&quot; fixed_s_addr=&quot;0&quot; s_addr=&quot;0x07000000&quot; e_addr=&quot;auto&quot; fixed_e_addr=&quot;0&quot; id=&quot;Rootfs&quot; size=&quot;0&quot;/&gt;</span>
<a id="__codelineno-37-32" name="__codelineno-37-32" href="#__codelineno-37-32"></a><span class="s">      &lt;/flash_device&gt;</span>
<a id="__codelineno-37-33" name="__codelineno-37-33" href="#__codelineno-37-33"></a><span class="s">      &lt;flash_loader&gt;agfb014r24b2e2v&lt;/flash_loader&gt;</span>
<a id="__codelineno-37-34" name="__codelineno-37-34" href="#__codelineno-37-34"></a><span class="s">  &lt;/flash_devices&gt;</span>
<a id="__codelineno-37-35" name="__codelineno-37-35" href="#__codelineno-37-35"></a><span class="s">  &lt;assignments&gt;</span>
<a id="__codelineno-37-36" name="__codelineno-37-36" href="#__codelineno-37-36"></a><span class="s">      &lt;assignment page=&quot;0&quot; partition_id=&quot;P1&quot;&gt;</span>
<a id="__codelineno-37-37" name="__codelineno-37-37" href="#__codelineno-37-37"></a><span class="s">          &lt;bitstream_id&gt;Bitstream_1&lt;/bitstream_id&gt;</span>
<a id="__codelineno-37-38" name="__codelineno-37-38" href="#__codelineno-37-38"></a><span class="s">      &lt;/assignment&gt;</span>
<a id="__codelineno-37-39" name="__codelineno-37-39" href="#__codelineno-37-39"></a><span class="s">      &lt;assignment page=&quot;0&quot; partition_id=&quot;fip&quot;&gt;</span>
<a id="__codelineno-37-40" name="__codelineno-37-40" href="#__codelineno-37-40"></a><span class="s">          &lt;raw_file_id&gt;Raw_File_1&lt;/raw_file_id&gt;</span>
<a id="__codelineno-37-41" name="__codelineno-37-41" href="#__codelineno-37-41"></a><span class="s">      &lt;/assignment&gt;</span>
<a id="__codelineno-37-42" name="__codelineno-37-42" href="#__codelineno-37-42"></a><span class="s">      &lt;assignment page=&quot;0&quot; partition_id=&quot;Rootfs&quot;&gt;</span>
<a id="__codelineno-37-43" name="__codelineno-37-43" href="#__codelineno-37-43"></a><span class="s">          &lt;raw_file_id&gt;Raw_File_2&lt;/raw_file_id&gt;</span>
<a id="__codelineno-37-44" name="__codelineno-37-44" href="#__codelineno-37-44"></a><span class="s">      &lt;/assignment&gt;</span>
<a id="__codelineno-37-45" name="__codelineno-37-45" href="#__codelineno-37-45"></a><span class="s">  &lt;/assignments&gt;</span>
<a id="__codelineno-37-46" name="__codelineno-37-46" href="#__codelineno-37-46"></a><span class="s">&lt;/pfg&gt;</span>
<a id="__codelineno-37-47" name="__codelineno-37-47" href="#__codelineno-37-47"></a><span class="s">EOF</span>
</code></pre></div>
<p>The following file will be created:</p>
<ul>
<li>$TOP_FOLDER/qspi_flash_image_agilex_boot.pfg</li>
</ul>
<h4 id="create-qspi-jic-image-for-qspi-boot-atf-to-linux">Create QSPI JIC image for QSPI Boot (ATF-To-Linux)<a class="headerlink" href="#create-qspi-jic-image-for-qspi-boot-atf-to-linux" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$TOP_FOLDER</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="c1"># Create FIP image</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>./arm-trusted-firmware-qspi/tools/fiptool/fiptool<span class="w"> </span>create<span class="w"> </span>--soc-fw<span class="w"> </span>arm-trusted-firmware-qspi/build/agilex/release/bl31.bin<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>--nt-fw<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/linux-socfpga-qspi/arch/arm64/boot/Image<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>--nt-fw-config<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/linux-socfpga-qspi/arch/arm64/boot/dts/intel/socfpga_agilex_socdk_atfboot.dtb<span class="w"> </span>fip.bin
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="c1"># Convert bl2.bin</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>aarch64-none-linux-gnu-objcopy<span class="w"> </span>-v<span class="w"> </span>-I<span class="w"> </span>binary<span class="w"> </span>-O<span class="w"> </span>ihex<span class="w"> </span>--change-addresses<span class="w"> </span>0xffe00000<span class="w"> </span>arm-trusted-firmware-qspi/build/agilex/release/bl2.bin<span class="w"> </span>fsbl.hex
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="c1"># Create the local links to .sof and rootfs</span>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a>ln<span class="w"> </span>-s<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/agilex_soc_devkit_ghrd/output_files/ghrd_agfb014r24b2e2v.sof<span class="w"> </span>.
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a>ln<span class="w"> </span>-s<span class="w"> </span><span class="nv">$TOP_FOLDER</span>/yocto/build/tmp/deploy/images/agilex7_dk_si_agf014eb/core-image-minimal-agilex7_dk_si_agf014eb.rootfs.jffs2<span class="w"> </span>rootfs.bin
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="c1">#Create final .jic</span>
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a>quartus_pfg<span class="w"> </span>-c<span class="w"> </span>qspi_flash_image_agilex_boot.pfg
</code></pre></div>
<p>After building, you can use the following binary to exercise the ATF to Linux boot flow booting from QSPI:</p>
<ul>
<li>$TOP_FOLDER/flash_image_atf_qspi.jic</li>
</ul>
<p>When booting with flash_image_atf_qspi.jic, this is the log that you will see:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>NOTICE:  QSPI boot
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>NOTICE:  BL2: v2.11.1(release):QPDS24.3.1_REL_GSRD_PR
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>NOTICE:  BL2: Built : 11:57:29, Jan 29 2025
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>NOTICE:  BL2: Booting BL31
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>NOTICE:  BL31: v2.11.1(release):QPDS24.3_REL_GSRD_PR
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>NOTICE:  BL31: Built : 11:57:34, Jan 29 2025
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>[    0.000000] Booting Linux on physical CPU 0x0000000000 [0x410fd034]
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>[    0.000000] Linux version 6.6.37-g346486b5245f-dirty (rolando@rolando2-linux-lab) (aarch64-none-linux-gnu-gcc (GNU Toolchain for the Arm Architecture 11.2-2022.02 (arm-11.14)) 11.2.1 20220111, GNU ld (GNU Toolchain for the Arm Architecture 11.2-2022.02 (arm-11.14)) 2.37.20220122) #1 SMP PREEMPT Wed Jan 29 12:03:28 CST 2025
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>[    0.000000] KASLR disabled due to lack of seed
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a>[    0.000000] Machine model: SoCFPGA Agilex SoCDK
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a>[    0.000000] efi: UEFI not found.
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a>[    0.000000] Reserved memory: created DMA memory pool at 0x0000000000000000, size 32 MiB
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a>[    0.000000] OF: reserved mem: initialized node svcbuffer@0, compatible id shared-dma-pool
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>[    0.000000] OF: reserved mem: 0x0000000000000000..0x0000000001ffffff (32768 KiB) nomap non-reusable svcbuffer@0
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a>[    0.000000] earlycon: uart0 at MMIO32 0x00000000ffc02000 (options &#39;115200n8&#39;)
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a>[    0.000000] printk: bootconsole [uart0] enabled
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a>
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a>:
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a>Poky (Yocto Project Reference Distro) 5.0.5 agilex7_dk_si_agf014eb /dev/ttyS0
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a>WARNING: Poky is a reference Yocto Project distribution that should be used for
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a>testing and development purposes only. It is recommended that you create your
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a>own distribution for production use.
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a>root@agilex7_dk_si_agf014eb:~#
</code></pre></div>
<h2 id="managing-secure-l3-registers-on-stratix-10-agilextm-and-n5x">Managing Secure L3 Registers on Stratix® 10, Agilex™ and N5X®<a class="headerlink" href="#managing-secure-l3-registers-on-stratix-10-agilextm-and-n5x" title="Permanent link">&para;</a></h2>
<p>On Stratix® 10, Agilex™ 7 and N5X® HPS there are specific peripherals which are critical for system operation which can only be accessed from software running at EL3.</p>
<p>The following HPS software components run at EL3 on these devices and can access Secure L3 registers:</p>
<ul>
<li>U-Boot SPL: initial values for the secure L3 registers are set here through the device tree 'secreg' entries. The user can customize them as needed by editing the device tree.</li>
<li>Arm Trusted Firmware (ATF): Both U-Boot and Linux call the ATF SMC (Secure Monitor Call) handler to access a restricted subset of secure L3 registers needed for routine system operation.</li>
</ul>
<p>This section presents the following:</p>
<ul>
<li>How to use the 'secreg' device tree entries to customize initial secure L3 registers values set by U-Boot SPL</li>
<li>How to access registers from the restricted subset from U-Boot, for debug purposes.</li>
<li>How to access other secure EL3 register from U-Boot, by by changing the ATF source code to add add them to the restricted subset.</li>
</ul>
<h3 id="setting-initial-values-of-secure-l3-registers">Setting Initial Values of Secure L3 Registers<a class="headerlink" href="#setting-initial-values-of-secure-l3-registers" title="Permanent link">&para;</a></h3>
<p>The initial values for the Secure L3 registes are set from U-Boot SPL. The register values are specified in secreg entries in the U-Boot device tree file.</p>
<p>Refer to <a href="https://github.com/altera-opensource/u-boot-socfpga/blob/HEAD/doc/device-tree-bindings/misc/socfpga_secreg.txt">u-boot-socfpga/blob/HEAD/doc/device-tree-bindings/misc/socfpga_secreg.txt</a> for documentation the <strong>secreg</strong>. The  socfpga_v2021.04 version shows the following:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>* Firewall and privilege register settings in device tree
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>Required properties:
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>--------------------
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>- compatible: should contain &quot;intel,socfpga-secreg&quot;
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>- intel,offset-settings: 32-bit offset address of block register, and then
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>                       followed by 32-bit value settings.
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a>Example:
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a>--------
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a>      socfpga_secreg: socfpga-secreg {
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a>          compatible = &quot;intel,socfpga-secreg&quot;;
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a>          #address-cells = &lt;1&gt;;
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a>          #size-cells = &lt;1&gt;;
<a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a>          u-boot,dm-pre-reloc;
<a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a>
<a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a>          i_sys_mgr@ffd12000 {
<a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a>              reg = &lt;0xffd12000 0x00000228&gt;;
<a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a>              intel,offset-settings =
<a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a>                  &lt;0x00000020 0xff010000&gt;,
<a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a>                  &lt;0x00000024 0xffffffff&gt;;
<a id="__codelineno-40-21" name="__codelineno-40-21" href="#__codelineno-40-21"></a>              u-boot,dm-pre-reloc;
<a id="__codelineno-40-22" name="__codelineno-40-22" href="#__codelineno-40-22"></a>          };
<a id="__codelineno-40-23" name="__codelineno-40-23" href="#__codelineno-40-23"></a>      };
</code></pre></div>
Notes about the example:</p>
<ul>
<li>The u-boot,dm-pre-reloc; statement in the example informs U-Boot the driver will be loaded in SPL.</li>
<li>The i_sys_mgr@ffd12000 statement in the example is informative only to enable readers to quickly see what IP is being set up, it is not actually used by the code.</li>
<li>The reg =&lt;0xffd12000 0x00000228&gt; entry specifies the IP module base address 0xffd12000 and span of 0x00000228 bytes.</li>
<li>The &lt;0x00000020 0xff010000&gt;, specifies that the register at offset 0x00000020 from the IP module base address will be set to value 0xff010000.</li>
</ul>
<p>These are the files which currently define the initial value of the Secure L3 registers:</p>
<ul>
<li>Common: u-boot-socfpga/arch/arm/dts/socfpga_soc64_u-boot.dtsi.</li>
<li>Stratix® 10: u-boot-socfpga/arch/arm/dts/socfpga_stratix10-u-boot.dtsi.</li>
<li>Agilex™ 7: arch/arm/dts/socfpga_agilex-u-boot.dtsi</li>
<li>N5X®: u-boot-socfpga/arch/arm/dts/socfpga_n5x-u-boot.dtsi</li>
</ul>
<p>You can edit the above files accordingly to change the default values, or set the initial value of more registers.</p>
<h3 id="accessing-secure-l3-registers-from-u-boot-command-line">Accessing Secure L3 Registers from U-Boot Command Line<a class="headerlink" href="#accessing-secure-l3-registers-from-u-boot-command-line" title="Permanent link">&para;</a></h3>
<p>A small subset of critical EL3 restricted access registers are made visible through the ATF SMC handler. The current list of registers is defined in <a href="https://github.com/altera-opensource/arm-trusted-firmware/blob/HEAD/plat/intel/soc/common/socfpga_sip_svc.c">arm-trusted-firmware/blob/HEAD/plat/intel/soc/common/socfpga_sip_svc.c.</a>.</p>
<p>The secure L3 registers accessible through the ATF SMC handler can also optionally be accessed from U-Boot command line for debug purposes. The feature can be enabled by setting <strong>CONFIG_CMD_SMC=y</strong> in the U-Boot configuration file.</p>
<p>Once the feature is enabled, the following command will be avaible from U-Boot command line interface:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>SOCFPGA # smc
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>smc - Issue a Secure Monitor Call
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>Usage:
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>smc  [arg1 … arg6] [id]
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>  - fid Function ID
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>  - arg SMC arguments, passed to X1-X6 (default to zero)
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>  - id  Secure OS ID / Session ID, passed to W7 (defaults to zero)
</code></pre></div>
The U-Boot environment already includes predefined ids to facilitate the usage of the command:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>smc_fid_rd=0xC2000007
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>smc_fid_upd=0xC2000009
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>smc_fid_wr=0xC2000008
</code></pre></div>
The command can be used as follows:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>smc ${smc_fid_rd} &lt;address&gt;
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>smc ${smc_fid_wr} &lt;address&gt; &lt;value&gt;
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>smc ${smc_fid_upd} &lt;address&gt; &lt;mask&gt; &lt;value&gt;
</code></pre></div>
See below using the new command to access the BOOT_SCRATCH_COLD0 register (note there is no need to access that register, this is just an example):</p>
<p>1.- Read the register:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>SOCFPGA_STRATIX10 # smc ${smc_fid_rd} 0xffd12200
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>Res:  0 400000 4291895808 0
</code></pre></div>
Note:</p>
<ul>
<li>First value from Res is the return code, 0 means operation succesfull.</li>
<li>Second value represents the read register value in decimal 400000=0x00061a80.</li>
<li>Third value is the address in decimal 4291895808=0xffd12200.</li>
</ul>
<p>2.- Write the register with a new value:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>SOCFPGA_STRATIX10 # smc ${smc_fid_wr} 0xffd12200 0x00061a81
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>Res:  0 400001 4291895808 0
</code></pre></div></p>
<p>3.-  Read back the register to confirm it has been updated:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>SOCFPGA_STRATIX10 # smc ${smc_fid_rd} 0xffd12200
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>Res:  0 400001 4291895808 0
</code></pre></div></p>
<h3 id="enabling-access-to-more-secure-l3-registers-for-debug-purposes">Enabling Access to more Secure L3 Registers for Debug Purposes<a class="headerlink" href="#enabling-access-to-more-secure-l3-registers-for-debug-purposes" title="Permanent link">&para;</a></h3>
<p>By default, only a small subset of critical EL3 restricted access registers are made visible through the ATF SMC handler. The current list of registers is defined in <a href="https://github.com/altera-opensource/arm-trusted-firmware/blob/HEAD/plat/intel/soc/common/socfpga_sip_svc.c">arm-trusted-firmware/blob/HEAD/plat/intel/soc/common/socfpga_sip_svc.c</a>. For debug purposes, you can add more registers to the restricted register list that can be accessed through the ATF SMC handler.</p>
<p><strong>Warning: Changing the list of EL3 restricted access registers in ATF is risky, and must be done only for debug purposes only! Do not forget to remove the code once debugging has completed!</strong></p>
<p>When trying to access a register which is not made visible by the ATF SMC handler, an error will be reported. See below example trying to read the noc_fw_soc2fpga_soc2fpga_scr register:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>SOCFPGA_STRATIX10 # smc ${smc_fid_rd} 0xffd21200
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>Res:  4 0 4291957248 0
</code></pre></div>
Note:</p>
<ul>
<li>The non-zero (4) return code means the operation was not succesfull.</li>
</ul>
<p>After editing the file <a href="https://github.com/altera-opensource/arm-trusted-firmware/blob/HEAD/plat/intel/soc/common/socfpga_sip_svc.c">arm-trusted-firmware/blob/HEAD/plat/intel/soc/common/socfpga_sip_svc.c</a> to add this register to the list, and recompiling ATF, the operation is succesfull:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>SOCFPGA_STRATIX10 # smc ${smc_fid_rd} 0xffd21200
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>Res:  0 268304641 4291957248
</code></pre></div>
Note:</p>
<ul>
<li>Return code is zero, operation was succesfull.</li>
<li>Read value is decimal 268304641=0xFFE0101.</li>
</ul>
<h2 id="boot-scratch-register-usage">Boot Scratch Register Usage<a class="headerlink" href="#boot-scratch-register-usage" title="Permanent link">&para;</a></h2>
<p>On Stratix® 10 SoC, Agilex™ 7 and N5X® devices, the boot scratch registers are part of the System Manager and are used to pass values between various software components. The table below summarizes the usage.</p>
<p><strong>Note:</strong></p>
<ul>
<li>If no device is provided it means that it applies for all.</li>
<li>If a cell is not specified for a device, then this could be used as a scratch memory.</li>
</ul>
<table>
<thead>
<tr>
<th align="left">Address</th>
<th align="left">Name</th>
<th align="left">Usage</th>
<th align="left">SDM</th>
<th align="left">U-Boot</th>
<th align="left">ATF</th>
<th align="left">Linux</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">0xFFD1 2200</td>
<td align="left">boot_scratch_cold0</td>
<td align="left">Bits[31] N5X. DDR retention</td>
<td align="left">Sets this bit</td>
<td align="left">Read <br> (is_ddr_retention_enabled)</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2200</td>
<td align="left">boot_scratch_cold0</td>
<td align="left">Bits[30:28] N5X, Agilex7M. DDR reset type</td>
<td align="left">Sets this field</td>
<td align="left">Read <br> (get_reset_type)</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2200</td>
<td align="left">boot_scratch_cold0</td>
<td align="left">Bits[27:0] SOC 64-bit storing qspi ref clock(kHz)</td>
<td align="left">Sets this field</td>
<td align="left">Sets value cm_set_qspi_controller_clk_hz <br> Reads value cm_get_qspi_controller_clk_hz</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2204</td>
<td align="left">boot_scratch_cold1</td>
<td align="left">osc1 clock freq</td>
<td align="left"></td>
<td align="left">Sets and read(cm_get_osc_clk_hz)</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2208</td>
<td align="left">boot_scratch_cold 2</td>
<td align="left">fpga clock freq</td>
<td align="left"></td>
<td align="left">Sets and read (cm_get_fpga_clk_hz)</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 220C</td>
<td align="left">boot_scratch_cold3</td>
<td align="left">reserved for customer use</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2210 <br> 0xFFD1 2214</td>
<td align="left">boot_scratch_cold4 <br> boot_scratch_cold5</td>
<td align="left">Secondary CPU RELEASE ADDRESS</td>
<td align="left"></td>
<td align="left">Main core clears it (lowlevel_init)</td>
<td align="left">Main CPU Write (bl31_platform_setup)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2218 <br> 0xFFD1 221C</td>
<td align="left">boot_scratch_cold6 <br> boot_scratch_cold7</td>
<td align="left">64-bit signature with L2 reset indication done.</td>
<td align="left">Writes signature (l2_reset_cpu) Reads the register (lowlevel_init)</td>
<td align="left">Writes register (socfpga_system_reset2) Reads register (plat_get_my_entrypoint)</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2220</td>
<td align="left">boot_scratch_cold8</td>
<td align="left">Bit[31:31] N5X, Agilex 7M. DBE status</td>
<td align="left">Set by SDM</td>
<td align="left">Check if bit is set (is_ddr_dbe_triggered)</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2220</td>
<td align="left">boot_scratch_cold8</td>
<td align="left">Bit[30:30] N5X, Agilex 7M. DDR Init Progress</td>
<td align="left"></td>
<td align="left">Set and clear bit(ddr_init_inprogress) Read status (is_ddr_init_hang)</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2220</td>
<td align="left">boot_scratch_cold8</td>
<td align="left">Bit[29:29] Agilex 7M. OCRAM_DBE  Error status</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2220</td>
<td align="left">boot_scratch_cold8</td>
<td align="left">Bits[28:27] Agilex 7M. Number of IO96B instances</td>
<td align="left"></td>
<td align="left">Sets this field (update_io96b_assigned_to_hps)</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2220</td>
<td align="left">boot_scratch_cold8</td>
<td align="left">Bit[19:19] Agilex 7, Agilex 7M, S10. CPU power domain is about to be turned on.</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Handled call under event (socfpga_pwr_domain_on)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2220</td>
<td align="left">boot_scratch_cold8</td>
<td align="left">Bit[18:18] Agilex 7, S10. ACF DDR Data rate</td>
<td align="left">Set this bit</td>
<td align="left">Read this value (sdram_mmr_init_full)</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2220</td>
<td align="left">boot_scratch_cold8</td>
<td align="left">Bit[17,16,1] ECC_DDR1 Error Flag, ECC_DDR0 Error Flag, ECC_OCRAM Error Flag</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2220</td>
<td align="left">boot_scratch_cold8</td>
<td align="left">Checks if any of the flags are set (socfpga_system_reset2)</td>
<td align="left">Set via ATF SMC</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">0xFFD1 2224</td>
<td align="left">boot_scratch_cold9</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Write (via ATF SMC)</td>
</tr>
</tbody>
</table>
<p>Links:</p>
<ul>
<li><a href="https://www.intel.com/content/www/us/en/programmable/hps/stratix-10/hps.html">Stratix® 10 HPS Registers</a></li>
<li><a href="https://www.intel.com/content/www/us/en/programmable/hps/agilex/hps.html">Agilex™ 7 HPS Registers</a></li>
<li>Review device-specific Boot User Guide for more information about these registers.</li>
</ul>
<h2 id="reconfiguring-core-fabric-from-u-boot">Reconfiguring Core Fabric from U-Boot<a class="headerlink" href="#reconfiguring-core-fabric-from-u-boot" title="Permanent link">&para;</a></h2>
<p>The GSRD configures the FPGA core fabric only once, from U-Boot, by using the <strong>bootm</strong> command. The example in this page configures the fabric only once, from U-Boot, using <strong>fpga load</strong> command.</p>
<p><strong>Important</strong>: If the FPGA fabric is already configured and bridges are enabled, you must call the <strong>bridge disable</strong> command from U-Boot before issuing the <strong>bootm</strong> or <strong>fppga load</strong> commands to reconfigure the fabric. Only do this if you are using an <strong>arm-trusted-firmware</strong> version more recent than the following:</p>
<ul>
<li>v2.7.1 = https://github.com/altera-opensource/arm-trusted-firmware/commit/0a5edaed853e0dc1e687706ccace8e844b2a8db7</li>
<li>v2.8.0 = https://github.com/altera-opensource/arm-trusted-firmware/commit/bf933536d4582d63d0e29434e807a641941f3937</li>
</ul>
<h2 id="enabling-bridges-from-u-boot">Enabling Bridges from U-Boot<a class="headerlink" href="#enabling-bridges-from-u-boot" title="Permanent link">&para;</a></h2>
<p>U-Boot offers the <strong>bridge</strong> command for controlling the bridges.</p>
<p>The <strong>bridge</strong> command can be used with either <strong>'enable'</strong> or <strong>'disable'</strong> parameter, followed by an optional <strong>'mask'</strong> parameter indicating which of the bridges needs to be enabled or disabled. When the <strong>'mask'</strong> parameter is omitted, all bridges are either enabled or disabled.</p>
<p>See bellow the help message for the command:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a># bridge
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>bridge - SoCFPGA HPS FPGA bridge control
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>Usage:
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>bridge enable [mask] - Enable HPS-to-FPGA (Bit 0), LWHPS-to-FPGA (Bit 1), FPGA-to-HPS (Bit 2), F2SDRAM0 (Bit 3), F2SDRAM1 (Bit 4), F2SDRAM2 (Bit 5) bridges 
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>bridge disable [mask] - Disable HPS-to-FPGA (Bit 0), LWHPS-to-FPGA (Bit 1), FPGA-to-HPS (Bit 2), F2SDRAM0 (Bit 3), F2SDRAM1 (Bit 4), F2SDRAM2 (Bit 5) bridges
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a>Bit 3, Bit 4 and Bit 5 bridges only available in Stratix 10
</code></pre></div>
The** 'mask'** is a hexadecimal number, with 3 bits available for Agilex™ 7, and 6 bits for Stratix® 10, as indicated above.</p>
<p>The following table shows examples of enabling and disabling various bridges:</p>
<table>
<thead>
<tr>
<th align="left">Command</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">bridge enable</td>
<td align="left">Enable all bridges</td>
</tr>
<tr>
<td align="left">bridge disable</td>
<td align="left">Disable all bridges</td>
</tr>
<tr>
<td align="left">bridge enable 1</td>
<td align="left">Enable HPS-to-FPGA bridge</td>
</tr>
<tr>
<td align="left">bridge enable 2</td>
<td align="left">Enable LWHPS-to-FPGA bridge</td>
</tr>
<tr>
<td align="left">bridge enable 4</td>
<td align="left">Enable FPGA-to-HPS bridge</td>
</tr>
<tr>
<td align="left">bridge enable 7</td>
<td align="left">Enable HPS-to-FPGA, LWHPS-to-FPGA, FPGA-to-HPS bridges</td>
</tr>
<tr>
<td align="left">bridge enable 35</td>
<td align="left">Enable HPS-to-FPGA, FPGA-to-HPS, F2SDRAM1, F2SDRAM2 bridges(Stratix® 10 only)</td>
</tr>
<tr>
<td align="left">bridge disable 30</td>
<td align="left">Disable F2SDRAM1, F2SDRAM2 bridges (Stratix® 10 only)</td>
</tr>
</tbody>
</table>
<h2 id="notices-disclaimers">Notices &amp; Disclaimers<a class="headerlink" href="#notices-disclaimers" title="Permanent link">&para;</a></h2>
<p>Altera<sup>&reg;</sup> Corporation technologies may require enabled hardware, software or service activation.
No product or component can be absolutely secure. 
Performance varies by use, configuration and other factors.
Your costs and results may vary. 
You may not use or facilitate the use of this document in connection with any infringement or other legal analysis concerning Altera or Intel products described herein. You agree to grant Altera Corporation a non-exclusive, royalty-free license to any patent claim thereafter drafted which includes subject matter disclosed herein.
No license (express or implied, by estoppel or otherwise) to any intellectual property rights is granted by this document, with the sole exception that you may publish an unmodified copy. You may create software implementations based on this document and in compliance with the foregoing that are intended to execute on the Altera or Intel product(s) referenced in this document. No rights are granted to create modifications or derivatives of this document.
The products described may contain design defects or errors known as errata which may cause the product to deviate from published specifications.  Current characterized errata are available on request.
Altera disclaims all express and implied warranties, including without limitation, the implied warranties of merchantability, fitness for a particular purpose, and non-infringement, as well as any warranty arising from course of performance, course of dealing, or usage in trade.
You are responsible for safety of the overall system, including compliance with applicable safety-related requirements or standards. 
<sup>&copy;</sup> Altera Corporation.  Altera, the Altera logo, and other Altera marks are trademarks of Altera Corporation.  Other names and brands may be claimed as the property of others. </p>
<p>OpenCL* and the OpenCL* logo are trademarks of Apple Inc. used by permission of the Khronos Group™. </p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">March 5, 2025</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 7, 2025</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../fabric-config/ug-linux-fabric-config-agx7f-soc/" class="md-footer__link md-footer__link--prev" aria-label="Previous: SoC Fabric Configuration from Linux Example" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                SoC Fabric Configuration from Linux Example
              </div>
            </div>
          </a>
        
        
          
          <a href="../../xen/ug-xen-agx7f-soc/" class="md-footer__link md-footer__link--next" aria-label="Next: Xen Hypervisor GSRD" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Xen Hypervisor GSRD
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.altera.com" target="_blank" rel="noopener" title="www.altera.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2 0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/altera-fpga" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/altera-fpga/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "navigation.indexes", "navigation.footer", "navigation.path", "navigation.tabs", "navigation.tabs.sticky", "search.suggest", "search.highlight", "content.code.copy", "navigation.indexes", "toc.follow"], "search": "../../../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
  <script defer src="https://cloud.umami.is/script.js" data-website-id="95a45ca2-f7f4-47e3-ab82-76a7057c6f0f"></script>
  
      <script src="../../../../../../assets/javascripts/bundle.fac441b0.min.js"></script>
      
        <script src="https://unpkg.com/tablefilter@0.7.3/dist/tablefilter/tablefilter.js"></script>
      
        <script src="../../../../../../assets/tables.js"></script>
      
        <script src="../../../../../../assets/extra.js"></script>
      
    

  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>